import{Editor as e,Operation as t,Path as n,Node as r,Range as o,Element as i,Text as a,Transforms as s,Point as l,createEditor as u}from"slate";import c from"lodash.toarray";import f,{css as d,append as h,addClass as p,removeClass as g,hasClass as v,on as y,focus as m,attr as b,removeAttr as w,hide as x,show as S,offset as k,width as E,height as O,parent as C,parents as N,is as T,dataset as M,val as L,text as P,html as D,children as R,remove as j,find as A,each as F,empty as I}from"dom7";import _ from"lodash.foreach";import"nanoid";import B from"lodash.throttle";import{init as $,classModule as W,propsModule as V,styleModule as z,datasetModule as U,eventListenersModule as H,jsx as K,h as q}from"snabbdom";import G from"lodash.camelcase";import{isKeyHotkey as J,isHotkey as Y}from"is-hotkey";import X from"lodash.debounce";import Q from"lodash.clonedeep";import Z from"@uppy/core";import ee from"@uppy/xhr-upload";var te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ne(e){var t={exports:{}};return e(t,t.exports),t.exports}var re,oe,ie=function(e){return e&&e.Math==Math&&e},ae=ie("object"==typeof globalThis&&globalThis)||ie("object"==typeof window&&window)||ie("object"==typeof self&&self)||ie("object"==typeof te&&te)||function(){return this}()||Function("return this")(),se=Object.defineProperty,le=function(e,t){try{se(ae,e,{value:t,configurable:!0,writable:!0})}catch(n){ae[e]=t}return t},ue=ae["__core-js_shared__"]||le("__core-js_shared__",{}),ce=ne((function(e){(e.exports=function(e,t){return ue[e]||(ue[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),fe=Function.prototype,de=fe.bind,he=fe.call,pe=de&&de.bind(he),ge=de?function(e){return e&&pe(he,e)}:function(e){return e&&function(){return he.apply(e,arguments)}},ve=ae.TypeError,ye=function(e){if(null==e)throw ve("Can't call method on "+e);return e},me=ae.Object,be=function(e){return me(ye(e))},we=ge({}.hasOwnProperty),xe=Object.hasOwn||function(e,t){return we(be(e),t)},Se=0,ke=Math.random(),Ee=ge(1..toString),Oe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ee(++Se+ke,36)},Ce=function(e){return"function"==typeof e},Ne=function(e){return Ce(e)?e:void 0},Te=function(e,t){return arguments.length<2?Ne(ae[e]):ae[e]&&ae[e][t]},Me=Te("navigator","userAgent")||"",Le=ae.process,Pe=ae.Deno,De=Le&&Le.versions||Pe&&Pe.version,Re=De&&De.v8;Re&&(oe=(re=Re.split("."))[0]>0&&re[0]<4?1:+(re[0]+re[1])),!oe&&Me&&(!(re=Me.match(/Edge\/(\d+)/))||re[1]>=74)&&(re=Me.match(/Chrome\/(\d+)/))&&(oe=+re[1]);var je=oe,Ae=function(e){try{return!!e()}catch(e){return!0}},Fe=!!Object.getOwnPropertySymbols&&!Ae((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&je&&je<41})),Ie=Fe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_e=ce("wks"),Be=ae.Symbol,$e=Be&&Be.for,We=Ie?Be:Be&&Be.withoutSetter||Oe,Ve=function(e){if(!xe(_e,e)||!Fe&&"string"!=typeof _e[e]){var t="Symbol."+e;Fe&&xe(Be,e)?_e[e]=Be[e]:_e[e]=Ie&&$e?$e(t):We(t)}return _e[e]},ze={};ze[Ve("toStringTag")]="z";var Ue="[object z]"===String(ze),He=!Ae((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Ke=function(e){return"object"==typeof e?null!==e:Ce(e)},qe=ae.document,Ge=Ke(qe)&&Ke(qe.createElement),Je=function(e){return Ge?qe.createElement(e):{}},Ye=!He&&!Ae((function(){return 7!=Object.defineProperty(Je("div"),"a",{get:function(){return 7}}).a})),Xe=ae.String,Qe=ae.TypeError,Ze=function(e){if(Ke(e))return e;throw Qe(Xe(e)+" is not an object")},et=Function.prototype.call,tt=et.bind?et.bind(et):function(){return et.apply(et,arguments)},nt=ge({}.isPrototypeOf),rt=ae.Object,ot=Ie?function(e){return"symbol"==typeof e}:function(e){var t=Te("Symbol");return Ce(t)&&nt(t.prototype,rt(e))},it=ae.String,at=function(e){try{return it(e)}catch(e){return"Object"}},st=ae.TypeError,lt=function(e){if(Ce(e))return e;throw st(at(e)+" is not a function")},ut=function(e,t){var n=e[t];return null==n?void 0:lt(n)},ct=ae.TypeError,ft=ae.TypeError,dt=Ve("toPrimitive"),ht=function(e,t){if(!Ke(e)||ot(e))return e;var n,r=ut(e,dt);if(r){if(void 0===t&&(t="default"),n=tt(r,e,t),!Ke(n)||ot(n))return n;throw ft("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&Ce(n=e.toString)&&!Ke(r=tt(n,e)))return r;if(Ce(n=e.valueOf)&&!Ke(r=tt(n,e)))return r;if("string"!==t&&Ce(n=e.toString)&&!Ke(r=tt(n,e)))return r;throw ct("Can't convert object to primitive value")}(e,t)},pt=function(e){var t=ht(e,"string");return ot(t)?t:t+""},gt=ae.TypeError,vt=Object.defineProperty,yt={f:He?vt:function(e,t,n){if(Ze(e),t=pt(t),Ze(n),Ye)try{return vt(e,t,n)}catch(e){}if("get"in n||"set"in n)throw gt("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},mt=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},bt=He?function(e,t,n){return yt.f(e,t,mt(1,n))}:function(e,t,n){return e[t]=n,e},wt=ge(Function.toString);Ce(ue.inspectSource)||(ue.inspectSource=function(e){return wt(e)});var xt,St,kt,Et=ue.inspectSource,Ot=ae.WeakMap,Ct=Ce(Ot)&&/native code/.test(Et(Ot)),Nt=ce("keys"),Tt=function(e){return Nt[e]||(Nt[e]=Oe(e))},Mt={},Lt=ae.TypeError,Pt=ae.WeakMap;if(Ct||ue.state){var Dt=ue.state||(ue.state=new Pt),Rt=ge(Dt.get),jt=ge(Dt.has),At=ge(Dt.set);xt=function(e,t){if(jt(Dt,e))throw new Lt("Object already initialized");return t.facade=e,At(Dt,e,t),t},St=function(e){return Rt(Dt,e)||{}},kt=function(e){return jt(Dt,e)}}else{var Ft=Tt("state");Mt[Ft]=!0,xt=function(e,t){if(xe(e,Ft))throw new Lt("Object already initialized");return t.facade=e,bt(e,Ft,t),t},St=function(e){return xe(e,Ft)?e[Ft]:{}},kt=function(e){return xe(e,Ft)}}var It={set:xt,get:St,has:kt,enforce:function(e){return kt(e)?St(e):xt(e,{})},getterFor:function(e){return function(t){var n;if(!Ke(t)||(n=St(t)).type!==e)throw Lt("Incompatible receiver, "+e+" required");return n}}},_t=Function.prototype,Bt=He&&Object.getOwnPropertyDescriptor,$t=xe(_t,"name"),Wt={EXISTS:$t,PROPER:$t&&"something"===function(){}.name,CONFIGURABLE:$t&&(!He||He&&Bt(_t,"name").configurable)},Vt=ne((function(e){var t=Wt.CONFIGURABLE,n=It.get,r=It.enforce,o=String(String).split("String");(e.exports=function(e,n,i,a){var s,l=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet,f=a&&void 0!==a.name?a.name:n;Ce(i)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!xe(i,"name")||t&&i.name!==f)&&bt(i,"name",f),(s=r(i)).source||(s.source=o.join("string"==typeof f?f:""))),e!==ae?(l?!c&&e[n]&&(u=!0):delete e[n],u?e[n]=i:bt(e,n,i)):u?e[n]=i:le(n,i)})(Function.prototype,"toString",(function(){return Ce(this)&&n(this).source||Et(this)}))})),zt=ge({}.toString),Ut=ge("".slice),Ht=function(e){return Ut(zt(e),8,-1)},Kt=Ve("toStringTag"),qt=ae.Object,Gt="Arguments"==Ht(function(){return arguments}()),Jt=Ue?Ht:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=qt(e),Kt))?n:Gt?Ht(t):"Object"==(r=Ht(t))&&Ce(t.callee)?"Arguments":r},Yt=Ue?{}.toString:function(){return"[object "+Jt(this)+"]"};Ue||Vt(Object.prototype,"toString",Yt,{unsafe:!0});var Xt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Qt=Je("span").classList,Zt=Qt&&Qt.constructor&&Qt.constructor.prototype,en=Zt===Object.prototype?void 0:Zt,tn=ge(ge.bind),nn=function(e,t){return lt(e),void 0===t?e:tn?tn(e,t):function(){return e.apply(t,arguments)}},rn=ae.Object,on=ge("".split),an=Ae((function(){return!rn("z").propertyIsEnumerable(0)}))?function(e){return"String"==Ht(e)?on(e,""):rn(e)}:rn,sn=Math.ceil,ln=Math.floor,un=function(e){var t=+e;return t!=t||0===t?0:(t>0?ln:sn)(t)},cn=Math.min,fn=function(e){return e>0?cn(un(e),9007199254740991):0},dn=function(e){return fn(e.length)},hn=Array.isArray||function(e){return"Array"==Ht(e)},pn=function(){},gn=[],vn=Te("Reflect","construct"),yn=/^\s*(?:class|function)\b/,mn=ge(yn.exec),bn=!yn.exec(pn),wn=function(e){if(!Ce(e))return!1;try{return vn(pn,gn,e),!0}catch(e){return!1}},xn=!vn||Ae((function(){var e;return wn(wn.call)||!wn(Object)||!wn((function(){e=!0}))||e}))?function(e){if(!Ce(e))return!1;switch(Jt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return bn||!!mn(yn,Et(e))}:wn,Sn=Ve("species"),kn=ae.Array,En=function(e,t){return new(function(e){var t;return hn(e)&&(t=e.constructor,(xn(t)&&(t===kn||hn(t.prototype))||Ke(t)&&null===(t=t[Sn]))&&(t=void 0)),void 0===t?kn:t}(e))(0===t?0:t)},On=ge([].push),Cn=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=7==e,s=5==e||i;return function(l,u,c,f){for(var d,h,p=be(l),g=an(p),v=nn(u,c),y=dn(g),m=0,b=f||En,w=t?b(l,y):n||a?b(l,0):void 0;y>m;m++)if((s||m in g)&&(h=v(d=g[m],m,p),e))if(t)w[m]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return m;case 2:On(w,d)}else switch(e){case 4:return!1;case 7:On(w,d)}return i?-1:r||o?o:w}},Nn={forEach:Cn(0),map:Cn(1),filter:Cn(2),some:Cn(3),every:Cn(4),find:Cn(5),findIndex:Cn(6),filterReject:Cn(7)},Tn=function(e,t){var n=[][e];return!!n&&Ae((function(){n.call(null,t||function(){throw 1},1)}))},Mn=Nn.forEach,Ln=Tn("forEach")?[].forEach:function(e){return Mn(this,e,arguments.length>1?arguments[1]:void 0)},Pn=function(e){if(e&&e.forEach!==Ln)try{bt(e,"forEach",Ln)}catch(t){e.forEach=Ln}};for(var Dn in Xt)Xt[Dn]&&Pn(ae[Dn]&&ae[Dn].prototype);Pn(en);var Rn={}.propertyIsEnumerable,jn=Object.getOwnPropertyDescriptor,An=jn&&!Rn.call({1:2},1)?function(e){var t=jn(this,e);return!!t&&t.enumerable}:Rn,Fn={f:An},In=function(e){return an(ye(e))},_n=Object.getOwnPropertyDescriptor,Bn={f:He?_n:function(e,t){if(e=In(e),t=pt(t),Ye)try{return _n(e,t)}catch(e){}if(xe(e,t))return mt(!tt(Fn.f,e,t),e[t])}},$n=Math.max,Wn=Math.min,Vn=function(e,t){var n=un(e);return n<0?$n(n+t,0):Wn(n,t)},zn=function(e){return function(t,n,r){var o,i=In(t),a=dn(i),s=Vn(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},Un={includes:zn(!0),indexOf:zn(!1)},Hn=Un.indexOf,Kn=ge([].push),qn=function(e,t){var n,r=In(e),o=0,i=[];for(n in r)!xe(Mt,n)&&xe(r,n)&&Kn(i,n);for(;t.length>o;)xe(r,n=t[o++])&&(~Hn(i,n)||Kn(i,n));return i},Gn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Jn=Gn.concat("length","prototype"),Yn={f:Object.getOwnPropertyNames||function(e){return qn(e,Jn)}},Xn={f:Object.getOwnPropertySymbols},Qn=ge([].concat),Zn=Te("Reflect","ownKeys")||function(e){var t=Yn.f(Ze(e)),n=Xn.f;return n?Qn(t,n(e)):t},er=function(e,t){for(var n=Zn(t),r=yt.f,o=Bn.f,i=0;i<n.length;i++){var a=n[i];xe(e,a)||r(e,a,o(t,a))}},tr=/#|\.prototype\./,nr=function(e,t){var n=or[rr(e)];return n==ar||n!=ir&&(Ce(t)?Ae(t):!!t)},rr=nr.normalize=function(e){return String(e).replace(tr,".").toLowerCase()},or=nr.data={},ir=nr.NATIVE="N",ar=nr.POLYFILL="P",sr=nr,lr=Bn.f,ur=function(e,t){var n,r,o,i,a,s=e.target,l=e.global,u=e.stat;if(n=l?ae:u?ae[s]||le(s,{}):(ae[s]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=lr(n,r))&&a.value:n[r],!sr(l?r:s+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;er(i,o)}(e.sham||o&&o.sham)&&bt(i,"sham",!0),Vt(n,r,i,e)}},cr=Ve("species"),fr=function(e){return je>=51||!Ae((function(){var t=[];return(t.constructor={})[cr]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},dr=Nn.map,hr=fr("map");ur({target:"Array",proto:!0,forced:!hr},{map:function(e){return dr(this,e,arguments.length>1?arguments[1]:void 0)}});var pr=function(e,t,n){var r,o;Ze(e);try{if(!(r=ut(e,"return"))){if("throw"===t)throw n;return n}r=tt(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return Ze(r),n},gr=function(e,t,n,r){try{return r?t(Ze(n)[0],n[1]):t(n)}catch(t){pr(e,"throw",t)}},vr={},yr=Ve("iterator"),mr=Array.prototype,br=function(e){return void 0!==e&&(vr.Array===e||mr[yr]===e)},wr=function(e,t,n){var r=pt(t);r in e?yt.f(e,r,mt(0,n)):e[r]=n},xr=Ve("iterator"),Sr=function(e){if(null!=e)return ut(e,xr)||ut(e,"@@iterator")||vr[Jt(e)]},kr=ae.TypeError,Er=function(e,t){var n=arguments.length<2?Sr(e):t;if(lt(n))return Ze(tt(n,e));throw kr(at(e)+" is not iterable")},Or=ae.Array,Cr=Ve("iterator"),Nr=!1;try{var Tr=0,Mr={next:function(){return{done:!!Tr++}},return:function(){Nr=!0}};Mr[Cr]=function(){return this},Array.from(Mr,(function(){throw 2}))}catch(e){}var Lr=function(e,t){if(!t&&!Nr)return!1;var n=!1;try{var r={};r[Cr]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Pr=!Lr((function(e){Array.from(e)}));ur({target:"Array",stat:!0,forced:Pr},{from:function(e){var t=be(e),n=xn(this),r=arguments.length,o=r>1?arguments[1]:void 0,i=void 0!==o;i&&(o=nn(o,r>2?arguments[2]:void 0));var a,s,l,u,c,f,d=Sr(t),h=0;if(!d||this==Or&&br(d))for(a=dn(t),s=n?new this(a):Or(a);a>h;h++)f=i?o(t[h],h):t[h],wr(s,h,f);else for(c=(u=Er(t,d)).next,s=n?new this:[];!(l=tt(c,u)).done;h++)f=i?gr(u,o,[l.value,h],!0):l.value,wr(s,h,f);return s.length=h,s}});var Dr,Rr=ae.String,jr=function(e){if("Symbol"===Jt(e))throw TypeError("Cannot convert a Symbol value to a string");return Rr(e)},Ar=ge("".charAt),Fr=ge("".charCodeAt),Ir=ge("".slice),_r=function(e){return function(t,n){var r,o,i=jr(ye(t)),a=un(n),s=i.length;return a<0||a>=s?e?"":void 0:(r=Fr(i,a))<55296||r>56319||a+1===s||(o=Fr(i,a+1))<56320||o>57343?e?Ar(i,a):r:e?Ir(i,a,a+2):o-56320+(r-55296<<10)+65536}},Br={codeAt:_r(!1),charAt:_r(!0)},$r=Object.keys||function(e){return qn(e,Gn)},Wr=He?Object.defineProperties:function(e,t){Ze(e);for(var n,r=In(t),o=$r(t),i=o.length,a=0;i>a;)yt.f(e,n=o[a++],r[n]);return e},Vr=Te("document","documentElement"),zr=Tt("IE_PROTO"),Ur=function(){},Hr=function(e){return"<script>"+e+"<\/script>"},Kr=function(e){e.write(Hr("")),e.close();var t=e.parentWindow.Object;return e=null,t},qr=function(){try{Dr=new ActiveXObject("htmlfile")}catch(e){}var e,t;qr="undefined"!=typeof document?document.domain&&Dr?Kr(Dr):((t=Je("iframe")).style.display="none",Vr.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Hr("document.F=Object")),e.close(),e.F):Kr(Dr);for(var n=Gn.length;n--;)delete qr.prototype[Gn[n]];return qr()};Mt[zr]=!0;var Gr,Jr,Yr,Xr=Object.create||function(e,t){var n;return null!==e?(Ur.prototype=Ze(e),n=new Ur,Ur.prototype=null,n[zr]=e):n=qr(),void 0===t?n:Wr(n,t)},Qr=!Ae((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Zr=Tt("IE_PROTO"),eo=ae.Object,to=eo.prototype,no=Qr?eo.getPrototypeOf:function(e){var t=be(e);if(xe(t,Zr))return t[Zr];var n=t.constructor;return Ce(n)&&t instanceof n?n.prototype:t instanceof eo?to:null},ro=Ve("iterator"),oo=!1;[].keys&&("next"in(Yr=[].keys())?(Jr=no(no(Yr)))!==Object.prototype&&(Gr=Jr):oo=!0);var io=null==Gr||Ae((function(){var e={};return Gr[ro].call(e)!==e}));io&&(Gr={}),Ce(Gr[ro])||Vt(Gr,ro,(function(){return this}));var ao={IteratorPrototype:Gr,BUGGY_SAFARI_ITERATORS:oo},so=yt.f,lo=Ve("toStringTag"),uo=function(e,t,n){e&&!xe(e=n?e:e.prototype,lo)&&so(e,lo,{configurable:!0,value:t})},co=ao.IteratorPrototype,fo=function(){return this},ho=ae.String,po=ae.TypeError,go=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=ge(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Ze(n),function(e){if("object"==typeof e||Ce(e))return e;throw po("Can't set "+ho(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),vo=Wt.PROPER,yo=Wt.CONFIGURABLE,mo=ao.IteratorPrototype,bo=ao.BUGGY_SAFARI_ITERATORS,wo=Ve("iterator"),xo=function(){return this},So=function(e,t,n,r,o,i,a){!function(e,t,n,r){var o=t+" Iterator";e.prototype=Xr(co,{next:mt(+!r,n)}),uo(e,o,!1),vr[o]=fo}(n,t,r);var s,l,u,c=function(e){if(e===o&&g)return g;if(!bo&&e in h)return h[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",d=!1,h=e.prototype,p=h[wo]||h["@@iterator"]||o&&h[o],g=!bo&&p||c(o),v="Array"==t&&h.entries||p;if(v&&(s=no(v.call(new e)))!==Object.prototype&&s.next&&(no(s)!==mo&&(go?go(s,mo):Ce(s[wo])||Vt(s,wo,xo)),uo(s,f,!0)),vo&&"values"==o&&p&&"values"!==p.name&&(yo?bt(h,"name","values"):(d=!0,g=function(){return tt(p,this)})),o)if(l={values:c("values"),keys:i?g:c("keys"),entries:c("entries")},a)for(u in l)(bo||d||!(u in h))&&Vt(h,u,l[u]);else ur({target:t,proto:!0,forced:bo||d},l);return h[wo]!==g&&Vt(h,wo,g,{name:o}),vr[t]=g,l},ko=Br.charAt,Eo=It.set,Oo=It.getterFor("String Iterator");So(String,"String",(function(e){Eo(this,{type:"String Iterator",string:jr(e),index:0})}),(function(){var e,t=Oo(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=ko(n,r),t.index+=e.length,{value:e,done:!1})}));var Co=Ae((function(){$r(1)}));
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function No(e){return"[object Object]"===Object.prototype.toString.call(e)}ur({target:"Object",stat:!0,forced:Co},{keys:function(e){return $r(be(e))}});var To={isHistory(e){return!1!==No(n=e)&&(void 0===(r=n.constructor)||!1!==No(o=r.prototype)&&!1!==o.hasOwnProperty("isPrototypeOf"))&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||t.isOperationList(e.redos[0]))&&(0===e.undos.length||t.isOperationList(e.undos[0]));var n,r,o}},Mo=new WeakMap,Lo=new WeakMap,Po={isHistoryEditor:t=>To.isHistory(t.history)&&e.isEditor(t),isMerging:e=>Lo.get(e),isSaving:e=>Mo.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var n=Po.isMerging(e);Lo.set(e,!1),t(),Lo.set(e,n)},withoutSaving(e,t){var n=Po.isSaving(e);Mo.set(e,!1),t(),Mo.set(e,n)}},Do=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!n.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!n.equals(e.path,t.path))),Ro=(e,t)=>"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties,jo=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),Ao=e=>"set_selection"!==e.type,Fo=function(){var e=Ze(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Io=Wt.PROPER,_o=RegExp.prototype,Bo=_o.toString,$o=ge(Fo),Wo=Ae((function(){return"/a/b"!=Bo.call({source:"a",flags:"b"})})),Vo=Io&&"toString"!=Bo.name;(Wo||Vo)&&Vt(RegExp.prototype,"toString",(function(){var e=Ze(this),t=jr(e.source),n=e.flags;return"/"+t+"/"+jr(void 0===n&&nt(_o,e)&&!("flags"in _o)?$o(e):n)}),{unsafe:!0});var zo=Ve("unscopables"),Uo=Array.prototype;null==Uo[zo]&&yt.f(Uo,zo,{configurable:!0,value:Xr(null)});var Ho=function(e){Uo[zo][e]=!0},Ko=Un.includes;ur({target:"Array",proto:!0},{includes:function(e){return Ko(this,e,arguments.length>1?arguments[1]:void 0)}}),Ho("includes");var qo=Ve("match"),Go=function(e){var t;return Ke(e)&&(void 0!==(t=e[qo])?!!t:"RegExp"==Ht(e))},Jo=ae.TypeError,Yo=function(e){if(Go(e))throw Jo("The method doesn't accept regular expressions");return e},Xo=Ve("match"),Qo=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Xo]=!1,"/./"[e](t)}catch(e){}}return!1},Zo=ge("".indexOf);ur({target:"String",proto:!0,forced:!Qo("includes")},{includes:function(e){return!!~Zo(jr(ye(this)),jr(Yo(e)),arguments.length>1?arguments[1]:void 0)}});var ei,ti=/"/g,ni=ge("".replace);ur({target:"String",proto:!0,forced:(ei="anchor",Ae((function(){var e=""[ei]('"');return e!==e.toLowerCase()||e.split('"').length>3})))},{anchor:function(e){return t="a",n="name",r=e,o=jr(ye(this)),i="<"+t,""!==n&&(i+=" "+n+'="'+ni(jr(r),ti,"&quot;")+'"'),i+">"+o+"</"+t+">";var t,n,r,o,i}});var ri,oi=Bn.f,ii=ge("".endsWith),ai=ge("".slice),si=Math.min,li=Qo("endsWith"),ui=!(li||(ri=oi(String.prototype,"endsWith"),!ri||ri.writable));ur({target:"String",proto:!0,forced:!ui&&!li},{endsWith:function(e){var t=jr(ye(this));Yo(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,o=void 0===n?r:si(fn(n),r),i=jr(e);return ii?ii(t,i,o):ai(t,o-i.length,o)===i}});var ci=ge([].join),fi=an!=Object,di=Tn("join",",");ur({target:"Array",proto:!0,forced:fi||!di},{join:function(e){return ci(In(this),void 0===e?",":e)}});var hi=ae.RegExp,pi=Ae((function(){var e=hi("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),gi=pi||Ae((function(){return!hi("a","y").sticky})),vi={BROKEN_CARET:pi||Ae((function(){var e=hi("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:gi,UNSUPPORTED_Y:pi},yi=ae.RegExp,mi=Ae((function(){var e=yi(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),bi=ae.RegExp,wi=Ae((function(){var e=bi("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),xi=It.get,Si=ce("native-string-replace",String.prototype.replace),ki=RegExp.prototype.exec,Ei=ki,Oi=ge("".charAt),Ci=ge("".indexOf),Ni=ge("".replace),Ti=ge("".slice),Mi=function(){var e=/a/,t=/b*/g;return tt(ki,e,"a"),tt(ki,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Li=vi.BROKEN_CARET,Pi=void 0!==/()??/.exec("")[1];(Mi||Pi||Li||mi||wi)&&(Ei=function(e){var t,n,r,o,i,a,s,l=this,u=xi(l),c=jr(e),f=u.raw;if(f)return f.lastIndex=l.lastIndex,t=tt(Ei,f,c),l.lastIndex=f.lastIndex,t;var d=u.groups,h=Li&&l.sticky,p=tt(Fo,l),g=l.source,v=0,y=c;if(h&&(p=Ni(p,"y",""),-1===Ci(p,"g")&&(p+="g"),y=Ti(c,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==Oi(c,l.lastIndex-1))&&(g="(?: "+g+")",y=" "+y,v++),n=new RegExp("^(?:"+g+")",p)),Pi&&(n=new RegExp("^"+g+"$(?!\\s)",p)),Mi&&(r=l.lastIndex),o=tt(ki,h?n:l,y),h?o?(o.input=Ti(o.input,v),o[0]=Ti(o[0],v),o.index=l.lastIndex,l.lastIndex+=o[0].length):l.lastIndex=0:Mi&&o&&(l.lastIndex=l.global?o.index+o[0].length:r),Pi&&o&&o.length>1&&tt(Si,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=Xr(null),i=0;i<d.length;i++)a[(s=d[i])[0]]=o[s[1]];return o});var Di=Ei;ur({target:"RegExp",proto:!0,forced:/./.exec!==Di},{exec:Di});var Ri=Function.prototype,ji=Ri.apply,Ai=Ri.bind,Fi=Ri.call,Ii="object"==typeof Reflect&&Reflect.apply||(Ai?Fi.bind(ji):function(){return Fi.apply(ji,arguments)}),_i=Ve("species"),Bi=RegExp.prototype,$i=function(e,t,n,r){var o=Ve(e),i=!Ae((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),a=i&&!Ae((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[_i]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!i||!a||n){var s=ge(/./[o]),l=t(o,""[e],(function(e,t,n,r,o){var a=ge(e),l=t.exec;return l===Di||l===Bi.exec?i&&!o?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));Vt(String.prototype,e,l[0]),Vt(Bi,o,l[1])}r&&bt(Bi[o],"sham",!0)},Wi=Br.charAt,Vi=function(e,t,n){return t+(n?Wi(e,t).length:1)},zi=Math.floor,Ui=ge("".charAt),Hi=ge("".replace),Ki=ge("".slice),qi=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Gi=/\$([$&'`]|\d{1,2})/g,Ji=function(e,t,n,r,o,i){var a=n+e.length,s=r.length,l=Gi;return void 0!==o&&(o=be(o),l=qi),Hi(i,l,(function(i,l){var u;switch(Ui(l,0)){case"$":return"$";case"&":return e;case"`":return Ki(t,0,n);case"'":return Ki(t,a);case"<":u=o[Ki(l,1,-1)];break;default:var c=+l;if(0===c)return i;if(c>s){var f=zi(c/10);return 0===f?i:f<=s?void 0===r[f-1]?Ui(l,1):r[f-1]+Ui(l,1):i}u=r[c-1]}return void 0===u?"":u}))},Yi=ae.TypeError,Xi=function(e,t){var n=e.exec;if(Ce(n)){var r=tt(n,e,t);return null!==r&&Ze(r),r}if("RegExp"===Ht(e))return tt(Di,e,t);throw Yi("RegExp#exec called on incompatible receiver")},Qi=Ve("replace"),Zi=Math.max,ea=Math.min,ta=ge([].concat),na=ge([].push),ra=ge("".indexOf),oa=ge("".slice),ia="$0"==="a".replace(/./,"$0"),aa=!!/./[Qi]&&""===/./[Qi]("a","$0");$i("replace",(function(e,t,n){var r=aa?"$":"$0";return[function(e,n){var r=ye(this),o=null==e?void 0:ut(e,Qi);return o?tt(o,e,r,n):tt(t,jr(r),e,n)},function(e,o){var i=Ze(this),a=jr(e);if("string"==typeof o&&-1===ra(o,r)&&-1===ra(o,"$<")){var s=n(t,i,a,o);if(s.done)return s.value}var l=Ce(o);l||(o=jr(o));var u=i.global;if(u){var c=i.unicode;i.lastIndex=0}for(var f=[];;){var d=Xi(i,a);if(null===d)break;if(na(f,d),!u)break;""===jr(d[0])&&(i.lastIndex=Vi(a,fn(i.lastIndex),c))}for(var h,p="",g=0,v=0;v<f.length;v++){for(var y=jr((d=f[v])[0]),m=Zi(ea(un(d.index),a.length),0),b=[],w=1;w<d.length;w++)na(b,void 0===(h=d[w])?h:String(h));var x=d.groups;if(l){var S=ta([y],b,m,a);void 0!==x&&na(S,x);var k=jr(Ii(o,void 0,S))}else k=Ji(y,a,m,b,x,o);m>=g&&(p+=oa(a,g,m)+k,g=m+y.length)}return p+oa(a,g)}]}),!!Ae((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!ia||aa);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var sa=function(e,t){return sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},sa(e,t)};function la(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}sa(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ua=function(){return ua=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ua.apply(this,arguments)};function ca(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function fa(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function da(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var ha=0,pa=function(){this.id=""+ha++},ga=It.set,va=It.getterFor("Array Iterator"),ya=So(Array,"Array",(function(e,t){ga(this,{type:"Array Iterator",target:In(e),index:0,kind:t})}),(function(){var e=va(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");vr.Arguments=vr.Array,Ho("keys"),Ho("values"),Ho("entries");var ma=function(e,t,n){for(var r in t)Vt(e,r,t[r],n);return e},ba=ae.Array,wa=Math.max,xa=function(e,t,n){for(var r=dn(e),o=Vn(t,r),i=Vn(void 0===n?r:n,r),a=ba(wa(i-o,0)),s=0;o<i;o++,s++)wr(a,s,e[o]);return a.length=s,a},Sa=Yn.f,ka="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ea={f:function(e){return ka&&"Window"==Ht(e)?function(e){try{return Sa(e)}catch(e){return xa(ka)}}(e):Sa(In(e))}},Oa=Ae((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Ca=Object.isExtensible,Na=Ae((function(){Ca(1)}))||Oa?function(e){return!!Ke(e)&&((!Oa||"ArrayBuffer"!=Ht(e))&&(!Ca||Ca(e)))}:Ca,Ta=!Ae((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ma=ne((function(e){var t=yt.f,n=!1,r=Oe("meta"),o=0,i=function(e){t(e,r,{value:{objectID:"O"+o++,weakData:{}}})},a=e.exports={enable:function(){a.enable=function(){},n=!0;var e=Yn.f,t=ge([].splice),o={};o[r]=1,e(o).length&&(Yn.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===r){t(o,i,1);break}return o},ur({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Ea.f}))},fastKey:function(e,t){if(!Ke(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!xe(e,r)){if(!Na(e))return"F";if(!t)return"E";i(e)}return e[r].objectID},getWeakData:function(e,t){if(!xe(e,r)){if(!Na(e))return!0;if(!t)return!1;i(e)}return e[r].weakData},onFreeze:function(e){return Ta&&n&&Na(e)&&!xe(e,r)&&i(e),e}};Mt[r]=!0})),La=ae.TypeError,Pa=function(e,t){this.stopped=e,this.result=t},Da=Pa.prototype,Ra=function(e,t,n){var r,o,i,a,s,l,u,c=n&&n.that,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=nn(t,c),g=function(e){return r&&pr(r,"normal",e),new Pa(!0,e)},v=function(e){return f?(Ze(e),h?p(e[0],e[1],g):p(e[0],e[1])):h?p(e,g):p(e)};if(d)r=e;else{if(!(o=Sr(e)))throw La(at(e)+" is not iterable");if(br(o)){for(i=0,a=dn(e);a>i;i++)if((s=v(e[i]))&&nt(Da,s))return s;return new Pa(!1)}r=Er(e,o)}for(l=r.next;!(u=tt(l,r)).done;){try{s=v(u.value)}catch(e){pr(r,"throw",e)}if("object"==typeof s&&s&&nt(Da,s))return s}return new Pa(!1)},ja=ae.TypeError,Aa=function(e,t){if(nt(t,e))return e;throw ja("Incorrect invocation")},Fa=function(e,t,n){var r,o;return go&&Ce(r=t.constructor)&&r!==n&&Ke(o=r.prototype)&&o!==n.prototype&&go(e,o),e},Ia=function(e,t,n){var r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),i=r?"set":"add",a=ae[e],s=a&&a.prototype,l=a,u={},c=function(e){var t=ge(s[e]);Vt(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!Ke(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return o&&!Ke(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!Ke(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(sr(e,!Ce(a)||!(o||s.forEach&&!Ae((function(){(new a).entries().next()})))))l=n.getConstructor(t,e,r,i),Ma.enable();else if(sr(e,!0)){var f=new l,d=f[i](o?{}:-0,1)!=f,h=Ae((function(){f.has(1)})),p=Lr((function(e){new a(e)})),g=!o&&Ae((function(){for(var e=new a,t=5;t--;)e[i](t,t);return!e.has(-0)}));p||((l=t((function(e,t){Aa(e,s);var n=Fa(new a,e,l);return null!=t&&Ra(t,n[i],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=l),(h||g)&&(c("delete"),c("has"),r&&c("get")),(g||d)&&c(i),o&&s.clear&&delete s.clear}return u[e]=l,ur({global:!0,forced:l!=a},u),uo(l,e),o||n.setStrong(l,e,r),l},_a=Ma.getWeakData,Ba=It.set,$a=It.getterFor,Wa=Nn.find,Va=Nn.findIndex,za=ge([].splice),Ua=0,Ha=function(e){return e.frozen||(e.frozen=new Ka)},Ka=function(){this.entries=[]},qa=function(e,t){return Wa(e.entries,(function(e){return e[0]===t}))};Ka.prototype={get:function(e){var t=qa(this,e);if(t)return t[1]},has:function(e){return!!qa(this,e)},set:function(e,t){var n=qa(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=Va(this.entries,(function(t){return t[0]===e}));return~t&&za(this.entries,t,1),!!~t}};var Ga,Ja={getConstructor:function(e,t,n,r){var o=e((function(e,o){Aa(e,i),Ba(e,{type:t,id:Ua++,frozen:void 0}),null!=o&&Ra(o,e[r],{that:e,AS_ENTRIES:n})})),i=o.prototype,a=$a(t),s=function(e,t,n){var r=a(e),o=_a(Ze(t),!0);return!0===o?Ha(r).set(t,n):o[r.id]=n,e};return ma(i,{delete:function(e){var t=a(this);if(!Ke(e))return!1;var n=_a(e);return!0===n?Ha(t).delete(e):n&&xe(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!Ke(e))return!1;var n=_a(e);return!0===n?Ha(t).has(e):n&&xe(n,t.id)}}),ma(i,n?{get:function(e){var t=a(this);if(Ke(e)){var n=_a(e);return!0===n?Ha(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),o}},Ya=It.enforce,Xa=!ae.ActiveXObject&&"ActiveXObject"in ae,Qa=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Za=Ia("WeakMap",Qa,Ja);if(Ct&&Xa){Ga=Ja.getConstructor(Qa,"WeakMap",!0),Ma.enable();var es=Za.prototype,ts=ge(es.delete),ns=ge(es.has),rs=ge(es.get),os=ge(es.set);ma(es,{delete:function(e){if(Ke(e)&&!Na(e)){var t=Ya(this);return t.frozen||(t.frozen=new Ga),ts(this,e)||t.frozen.delete(e)}return ts(this,e)},has:function(e){if(Ke(e)&&!Na(e)){var t=Ya(this);return t.frozen||(t.frozen=new Ga),ns(this,e)||t.frozen.has(e)}return ns(this,e)},get:function(e){if(Ke(e)&&!Na(e)){var t=Ya(this);return t.frozen||(t.frozen=new Ga),ns(this,e)?rs(this,e):t.frozen.get(e)}return rs(this,e)},set:function(e,t){if(Ke(e)&&!Na(e)){var n=Ya(this);n.frozen||(n.frozen=new Ga),ns(this,e)?os(this,e,t):n.frozen.set(e,t)}else os(this,e,t);return this}})}var is=Ve("iterator"),as=Ve("toStringTag"),ss=ya.values,ls=function(e,t){if(e){if(e[is]!==ss)try{bt(e,is,ss)}catch(t){e[is]=ss}if(e[as]||bt(e,as,t),Xt[t])for(var n in ya)if(e[n]!==ya[n])try{bt(e,n,ya[n])}catch(t){e[n]=ya[n]}}};for(var us in Xt)ls(ae[us]&&ae[us].prototype,us);ls(en,"DOMTokenList");var cs=new WeakMap,fs=new WeakMap,ds=new WeakMap,hs=new WeakMap,ps=new WeakMap,gs=new WeakMap,vs=new WeakMap,ys=new WeakMap,ms=new WeakMap,bs=new WeakMap,ws=new WeakMap,xs=new WeakMap,Ss=new WeakMap,ks=new WeakMap,Es=new WeakMap,Os=new WeakMap,Cs=new WeakMap,Ns=new WeakMap,Ts=new WeakMap,Ms=new WeakMap,Ls=new WeakMap,Ps=new WeakMap,Ds=new WeakMap,Rs=new WeakMap,js=new WeakMap,As=Nn.find,Fs=!0;"find"in[]&&Array(1).find((function(){Fs=!1})),ur({target:"Array",proto:!0,forced:Fs},{find:function(e){return As(this,e,arguments.length>1?arguments[1]:void 0)}}),Ho("find"),ur({global:!0},{globalThis:ae});const Is=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"];d&&(f.fn.css=d),h&&(f.fn.append=h),p&&(f.fn.addClass=p),g&&(f.fn.removeClass=g),v&&(f.fn.hasClass=v),y&&(f.fn.on=y),m&&(f.fn.focus=m),b&&(f.fn.attr=b),w&&(f.fn.removeAttr=w),x&&(f.fn.hide=x),S&&(f.fn.show=S),k&&(f.fn.offset=k),E&&(f.fn.width=E),O&&(f.fn.height=O),C&&(f.fn.parent=C),N&&(f.fn.parents=N),T&&(f.fn.is=T),M&&(f.fn.dataset=M),L&&(f.fn.val=L),P&&(f.fn.text=P),D&&(f.fn.html=D),R&&(f.fn.children=R),j&&(f.fn.remove=j),A&&(f.fn.find=A),F&&(f.fn.each=F),I&&(f.fn.empty=I);var _s,Bs=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||null},$s=function(e){return Ws(e)&&1===e.nodeType},Ws=function(e){var t=Bs(e);return!!t&&e instanceof t.Node},Vs=function(e){var t=e&&e.anchorNode&&Bs(e.anchorNode);return!!t&&e instanceof t.Selection},zs=function(e){return Ws(e)&&3===e.nodeType},Us=function(e){var t,n,r;return null!==(t=window.document.getElementById(e))&&void 0!==t?t:(null===(r=null===(n=window.document.activeElement)||void 0===n?void 0:n.shadowRoot)||void 0===r?void 0:r.getElementById(e))||null},Hs=function(e,t,n){for(var r,o=e.childNodes,i=o[t],a=t,s=!1,l=!1;(Ws(r=i)&&8===r.nodeType||$s(i)&&0===i.childNodes.length||$s(i)&&"false"===i.getAttribute("contenteditable"))&&(!s||!l);)a>=o.length?(s=!0,a=t-1,n="backward"):a<0?(l=!0,a=t+1,n="forward"):(i=o[a],t=a,a+="forward"===n?1:-1);return[i,t]},Ks=function(e,t,n){return fa(Hs(e,t,n),1)[0]},qs=function e(t){var n,r,o="";if(zs(t)&&t.nodeValue)return t.nodeValue;if($s(t)){try{for(var i=ca(Array.from(t.childNodes)),a=i.next();!a.done;a=i.next()){o+=e(a.value)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}var s=getComputedStyle(t).getPropertyValue("display");"block"!==s&&"list"!==s&&"table-row"!==s&&"BR"!==t.tagName||(o+="\n")}return o};function Gs(e,t){if(!(e instanceof HTMLElement&&"true"===e.dataset.slateVoid))for(var n=e.childNodes,r=n.length;r--;){var o=n[r],i=o.nodeType;3==i?t(o,e):1!=i&&9!=i&&11!=i||Gs(o,t)}}function Js(e){if(0===e.length)return"";var t=e[0];return t.nodeType!==_s.ELEMENT_NODE?"":t.tagName.toLowerCase()}!function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(_s||(_s={})),void 0!==globalThis.navigator&&void 0!==globalThis.window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&globalThis.window.MSStream;var Ys="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),Xs="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);"undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent);var Qs="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Zs="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),el="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),tl="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent);"undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent);var nl=!el&&!Zs&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,rl={getWindow:function(e){var t=Ls.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey:function(e,t){var n=Ms.get(t);return n||(n=new pa,Ms.set(t,n)),n},setNewKey:function(e){var t=new pa;Ms.set(e,t)},findPath:function(t,n){for(var r=[],o=n;;){var i=Es.get(o);if(null==i){if(e.isEditor(o))return r;break}var a=ks.get(o);if(null==a)break;r.unshift(a),o=i}throw new Error("Unable to find the path for Slate node: "+JSON.stringify(n))},findDocumentOrShadowRoot:function(e){if(e.isDestroyed)return window.document;var t=rl.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&null!=n.getSelection?n:t.ownerDocument},getParentNode:function(e,t){return Es.get(t)||null},getParentsNodes:function(e,t){for(var n=[],r=t;r!==e&&null!=r;){var o=rl.getParentNode(e,r);if(null==o)break;n.push(o),r=o}return n},getTopNode:function(e,t){var n=[rl.findPath(e,t)[0]];return r.get(e,n)},toDOMNode:function(t,n){var r;if(e.isEditor(n))r=Os.get(t);else{var o=rl.findKey(t,n);r=Ns.get(o)}if(!r)throw new Error("Cannot resolve a DOM node from Slate node: "+JSON.stringify(n));return r},hasDOMNode:function(e,t,n){void 0===n&&(n={});var r,o=n.editable,i=void 0!==o&&o,a=rl.toDOMNode(e,e);try{r=$s(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&(r.closest("[data-slate-editor]")===a&&(!i||r.isContentEditable||!!r.getAttribute("data-slate-zero-width")))},toDOMRange:function(e,t){var n=t.anchor,r=t.focus,i=o.isBackward(t),a=rl.toDOMPoint(e,n),s=o.isCollapsed(t)?a:rl.toDOMPoint(e,r),l=rl.getWindow(e).document.createRange(),u=fa(i?s:a,2),c=u[0],f=u[1],d=fa(i?a:s,2),h=d[0],p=d[1],g=!!($s(c)?c:c.parentElement).getAttribute("data-slate-zero-width"),v=!!($s(h)?h:h.parentElement).getAttribute("data-slate-zero-width");return l.setStart(c,g?1:f),l.setEnd(h,v?1:p),l},toDOMPoint:function(t,n){var r,o,i,a=fa(e.node(t,n.path),1)[0],s=rl.toDOMNode(t,a);e.void(t,{at:n})&&(n={path:n.path,offset:0});var l=Array.from(s.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),u=0;try{for(var c=ca(l),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.childNodes[0];if(null!=h&&null!=h.textContent){var p=h.textContent.length,g=d.getAttribute("data-slate-length"),v=u+(null==g?p:parseInt(g,10));if(n.offset<=v){i=[h,Math.min(p,Math.max(0,n.offset-u))];break}u=v}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: "+JSON.stringify(n));return i},toSlateNode:function(e,t){var n=$s(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Cs.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: "+n);return r},findEventRange:function(t,n){"nativeEvent"in n&&(n=n.nativeEvent);var r=n.clientX,o=n.clientY,i=n.target;if(null==r||null==o)throw new Error("Cannot resolve a Slate range from a DOM event: "+n);var a,s=rl.toSlateNode(t,n.target),l=rl.findPath(t,s);if(e.isVoid(t,s)){var u=i.getBoundingClientRect(),c=t.isInline(s)?r-u.left<u.left+u.width-r:o-u.top<u.top+u.height-o,f=e.point(t,l,{edge:c?"start":"end"}),d=c?e.before(t,f):e.after(t,f);if(d)return e.range(t,d)}var h=this.getWindow(t).document;if(h.caretRangeFromPoint)a=h.caretRangeFromPoint(r,o);else{var p=h.caretPositionFromPoint(r,o);p&&((a=h.createRange()).setStart(p.offsetNode,p.offset),a.setEnd(p.offsetNode,p.offset))}if(!a)throw new Error("Cannot resolve a Slate range from a DOM event: "+n);return rl.toSlateRange(t,a,{exactMatch:!1,suppressThrow:!1})},toSlateRange:function(t,n,r){var i,a,s,l,u,c=r.exactMatch,f=r.suppressThrow;if((Vs(n)?n.anchorNode:n.startContainer)&&(Vs(n)?(i=n.anchorNode,a=n.anchorOffset,s=n.focusNode,l=n.focusOffset,u=tl&&window.document.activeElement&&window.document.activeElement.shadowRoot?n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset:n.isCollapsed):(i=n.startContainer,a=n.startOffset,s=n.endContainer,l=n.endOffset,u=n.collapsed)),null==i||null==s||null==a||null==l)throw new Error("Cannot resolve a Slate range from DOM range: "+n);var d=rl.toSlatePoint(t,[i,a],{exactMatch:c,suppressThrow:f});if(!d)return null;var h=u?d:rl.toSlatePoint(t,[s,l],{exactMatch:c,suppressThrow:f});if(!h)return null;var p={anchor:d,focus:h};return o.isExpanded(p)&&o.isForward(p)&&$s(s)&&e.void(t,{at:p.focus,mode:"highest"})&&(p=e.unhangRange(t,p,{voids:!0})),p},toSlatePoint:function(e,t,n){var r,o=n.exactMatch,i=n.suppressThrow,a=fa(o?t:function(e){var t,n=fa(e,2),r=n[0],o=n[1];if($s(r)&&r.childNodes.length){var i=o===r.childNodes.length,a=i?o-1:o;for(r=(t=fa(Hs(r,a,i?"backward":"forward"),2))[0],i=(a=t[1])<o;$s(r)&&r.childNodes.length;){var s=i?r.childNodes.length-1:0;r=Ks(r,s,i?"backward":"forward")}o=i&&null!=r.textContent?r.textContent.length:0}return[r,o]}(t),2),s=a[0],l=a[1],u=s.parentNode,f=null,d=0;if(u){var h=u.closest('[data-slate-void="true"]'),p=u.closest("[data-slate-leaf]"),g=null;if(p){f=p.closest('[data-slate-node="text"]');var v=rl.getWindow(e).document.createRange();v.setStart(f,0),v.setEnd(s,l);var y=v.cloneContents();da(da([],fa(c(y.querySelectorAll("[data-slate-zero-width]")))),fa(c(y.querySelectorAll("[contenteditable=false]")))).forEach((function(e){e.parentNode.removeChild(e)})),d=y.textContent.length,g=f}else h&&((p=h.querySelector("[data-slate-leaf]"))?(f=p.closest('[data-slate-node="text"]'),d=(g=p).textContent.length,g.querySelectorAll("[data-slate-zero-width]").forEach((function(e){d-=e.textContent.length}))):d=1);g&&d===g.textContent.length&&(u.hasAttribute("data-slate-zero-width")||Xs&&(null===(r=g.textContent)||void 0===r?void 0:r.endsWith("\n")))&&d--}if(!f){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: "+t)}var m=rl.toSlateNode(e,f);return{path:rl.findPath(e,m),offset:d}},hasRange:function(t,n){var r=n.anchor,o=n.focus;return e.hasPath(t,r.path)&&e.hasPath(t,o.path)},getNodeType:function(e){return i.isElement(e)?e.type:""},checkNodeType:function(e,t){return this.getNodeType(e)===t},getNodesStr:function(e){return e.map((function(e){return r.string(e)})).join("")},getSelectedElems:function(t){var n,r,o=[],a=e.nodes(t,{universal:!0});try{for(var s=ca(a),l=s.next();!l.done;l=s.next()){var u=fa(l.value,1)[0];i.isElement(u)&&o.push(u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},getSelectedNodeByType:function(t,n){var r=this,o=fa(e.nodes(t,{match:function(e){return r.checkNodeType(e,n)},universal:!0}),1),i=o[0];return null==i?null:i[0]},getSelectedTextNode:function(t){var n=fa(e.nodes(t,{match:function(e){return a.isText(e)},universal:!0}),1),r=n[0];return null==r?null:r[0]},isNodeSelected:function(t,n){var r=fa(e.nodes(t,{match:function(e){return e===n},universal:!0}),1),o=r[0];return null!=o&&fa(o,1)[0]===n},isSelectionAtLineEnd:function(t,n){var r=t.selection;return!!r&&(e.isEnd(t,r.anchor,n)||e.isEnd(t,r.focus,n))},getTextarea:function(e){var t=cs.get(e);if(null==t)throw new Error("Cannot find textarea instance by editor");return t},getToolbar:function(e){return hs.get(e)||null},getHoverbar:function(e){return gs.get(e)||null},normalizeContent:function(e){e.children.forEach((function(t,n){e.normalizeNode([t,[n]])}))},getLeftLengthOfMaxLength:function(e){var t=e.getConfig(),n=t.maxLength,r=t.onMaxLength;if("number"!=typeof n||n<=0)return 1/0;var o=n-e.getText().replace(/\r|\n|(\r\n)/g,"").length;return o<=0&&r&&r(e),o},cleanExposedTexNodeInSelectionBlock:function(t){var n,r,o,a,s=rl.getTextarea(t).$textArea,l=null==s?void 0:s[0].childNodes;if(l)try{for(var u=ca(Array.from(l)),c=u.next();!c.done;c=u.next()){var d=c.value;if(3!==d.nodeType)break;d.remove()}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}var h=e.nodes(t,{match:function(e){return!(!i.isElement(e)||t.isInline(e))},universal:!0});try{for(var p=ca(h),g=p.next();!g.done;g=p.next()){var v=g.value;if(null!=v){var y=v[0];Gs(rl.toDOMNode(t,y),(function(e,t){var n=f(t);n.attr("data-slate-string")||n.attr("data-slate-zero-width")||t.removeChild(e)}))}}}catch(e){o={error:e}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}},ol=1,il={};var al={};function sl(e,t){var n=e.key,r=e.factory,o=e.config,i=ua(ua({},o),t||{});if(null!=al[n])throw new Error("Duplicated key '"+n+"' in menu items");al[n]=r,function(e,t){null!=t&&(il[e]=t)}(n,i)}var ll=Ve("species"),ul=function(e){var t=Te(e),n=yt.f;He&&t&&!t[ll]&&n(t,ll,{configurable:!0,get:function(){return this}})},cl=yt.f,fl=Ma.fastKey,dl=It.set,hl=It.getterFor,pl={getConstructor:function(e,t,n,r){var o=e((function(e,o){Aa(e,i),dl(e,{type:t,index:Xr(null),first:void 0,last:void 0,size:0}),He||(e.size=0),null!=o&&Ra(o,e[r],{that:e,AS_ENTRIES:n})})),i=o.prototype,a=hl(t),s=function(e,t,n){var r,o,i=a(e),s=l(e,t);return s?s.value=n:(i.last=s={index:o=fl(t,!0),key:t,value:n,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=s),r&&(r.next=s),He?i.size++:e.size++,"F"!==o&&(i.index[o]=s)),e},l=function(e,t){var n,r=a(e),o=fl(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return ma(i,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,He?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=l(t,e);if(r){var o=r.next,i=r.previous;delete n.index[r.index],r.removed=!0,i&&(i.next=o),o&&(o.previous=i),n.first==r&&(n.first=o),n.last==r&&(n.last=i),He?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=nn(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!l(this,e)}}),ma(i,n?{get:function(e){var t=l(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),He&&cl(i,"size",{get:function(){return a(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",o=hl(t),i=hl(r);So(e,t,(function(e,t){dl(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ul(t)}};Ia("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),pl);var gl=Nn.filter,vl=fr("filter");ur({target:"Array",proto:!0,forced:!vl},{filter:function(e){return gl(this,e,arguments.length>1?arguments[1]:void 0)}});var yl="\t\n\v\f\r                　\u2028\u2029\ufeff",ml=ge("".replace),bl="["+yl+"]",wl=RegExp("^"+bl+bl+"*"),xl=RegExp(bl+bl+"*$"),Sl=function(e){return function(t){var n=jr(ye(t));return 1&e&&(n=ml(n,wl,"")),2&e&&(n=ml(n,xl,"")),n}},kl={start:Sl(1),end:Sl(2),trim:Sl(3)},El=Wt.PROPER,Ol=kl.trim;ur({target:"String",proto:!0,forced:function(e){return Ae((function(){return!!yl[e]()||"​᠎"!=="​᠎"[e]()||El&&yl[e].name!==e}))}("trim")},{trim:function(){return Ol(this)}});var Cl=ae.TypeError,Nl=Ve("species"),Tl=function(e,t){var n,r=Ze(e).constructor;return void 0===r||null==(n=Ze(r)[Nl])?t:function(e){if(xn(e))return e;throw Cl(at(e)+" is not a constructor")}(n)},Ml=vi.UNSUPPORTED_Y,Ll=Math.min,Pl=[].push,Dl=ge(/./.exec),Rl=ge(Pl),jl=ge("".slice);$i("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=jr(ye(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!Go(e))return tt(t,r,e,o);for(var i,a,s,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,f=new RegExp(e.source,u+"g");(i=tt(Di,f,r))&&!((a=f.lastIndex)>c&&(Rl(l,jl(r,c,i.index)),i.length>1&&i.index<r.length&&Ii(Pl,l,xa(i,1)),s=i[0].length,c=a,l.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return c===r.length?!s&&Dl(f,"")||Rl(l,""):Rl(l,jl(r,c)),l.length>o?xa(l,0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:tt(t,this,e,n)}:t,[function(t,n){var o=ye(this),i=null==t?void 0:ut(t,e);return i?tt(i,t,o,n):tt(r,jr(o),t,n)},function(e,o){var i=Ze(this),a=jr(e),s=n(r,i,a,o,r!==t);if(s.done)return s.value;var l=Tl(i,RegExp),u=i.unicode,c=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Ml?"g":"y"),f=new l(Ml?"^(?:"+i.source+")":i,c),d=void 0===o?4294967295:o>>>0;if(0===d)return[];if(0===a.length)return null===Xi(f,a)?[a]:[];for(var h=0,p=0,g=[];p<a.length;){f.lastIndex=Ml?0:p;var v,y=Xi(f,Ml?jl(a,p):a);if(null===y||(v=Ll(fn(f.lastIndex+(Ml?p:0)),a.length))===h)p=Vi(a,p,u);else{if(Rl(g,jl(a,h,p)),g.length===d)return g;for(var m=1;m<=y.length-1;m++)if(Rl(g,y[m]),g.length===d)return g;p=h=v}}return Rl(g,jl(a,h)),g}]}),!!Ae((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Ml);var Al=[];function Fl(e){Al.push(e)}var Il={};function _l(e){var t=e.type,n=e.elemToHtml;Il[t||""]=n}function Bl(e,t,n){var r=n.isInline(e)?"span":"div";return"<"+r+">"+t+"</"+r+">"}function $l(t,n){var r=t.type,o=void 0===r?"":r,i=t.children,a=void 0===i?[]:i,s=e.isVoid(n,t),l="";s||(l=a.map((function(e){return fc(e,n)})).join(""));var u=function(e){return Il[e]||Bl}(o),c=u(t,l,n);return s||Al.forEach((function(e){return c=e(t,c)})),c}var Wl,Vl,zl,Ul,Hl=ae.Promise,Kl=ge([].slice),ql=/(?:ipad|iphone|ipod).*applewebkit/i.test(Me),Gl="process"==Ht(ae.process),Jl=ae.setImmediate,Yl=ae.clearImmediate,Xl=ae.process,Ql=ae.Dispatch,Zl=ae.Function,eu=ae.MessageChannel,tu=ae.String,nu=0,ru={};try{Wl=ae.location}catch(e){}var ou=function(e){if(xe(ru,e)){var t=ru[e];delete ru[e],t()}},iu=function(e){return function(){ou(e)}},au=function(e){ou(e.data)},su=function(e){ae.postMessage(tu(e),Wl.protocol+"//"+Wl.host)};Jl&&Yl||(Jl=function(e){var t=Kl(arguments,1);return ru[++nu]=function(){Ii(Ce(e)?e:Zl(e),void 0,t)},Vl(nu),nu},Yl=function(e){delete ru[e]},Gl?Vl=function(e){Xl.nextTick(iu(e))}:Ql&&Ql.now?Vl=function(e){Ql.now(iu(e))}:eu&&!ql?(Ul=(zl=new eu).port2,zl.port1.onmessage=au,Vl=nn(Ul.postMessage,Ul)):ae.addEventListener&&Ce(ae.postMessage)&&!ae.importScripts&&Wl&&"file:"!==Wl.protocol&&!Ae(su)?(Vl=su,ae.addEventListener("message",au,!1)):Vl="onreadystatechange"in Je("script")?function(e){Vr.appendChild(Je("script")).onreadystatechange=function(){Vr.removeChild(this),ou(e)}}:function(e){setTimeout(iu(e),0)});var lu,uu,cu,fu,du,hu,pu,gu,vu={set:Jl,clear:Yl},yu=/ipad|iphone|ipod/i.test(Me)&&void 0!==ae.Pebble,mu=/web0s(?!.*chrome)/i.test(Me),bu=Bn.f,wu=vu.set,xu=ae.MutationObserver||ae.WebKitMutationObserver,Su=ae.document,ku=ae.process,Eu=ae.Promise,Ou=bu(ae,"queueMicrotask"),Cu=Ou&&Ou.value;Cu||(lu=function(){var e,t;for(Gl&&(e=ku.domain)&&e.exit();uu;){t=uu.fn,uu=uu.next;try{t()}catch(e){throw uu?fu():cu=void 0,e}}cu=void 0,e&&e.enter()},ql||Gl||mu||!xu||!Su?!yu&&Eu&&Eu.resolve?((pu=Eu.resolve(void 0)).constructor=Eu,gu=nn(pu.then,pu),fu=function(){gu(lu)}):Gl?fu=function(){ku.nextTick(lu)}:(wu=nn(wu,ae),fu=function(){wu(lu)}):(du=!0,hu=Su.createTextNode(""),new xu(lu).observe(hu,{characterData:!0}),fu=function(){hu.data=du=!du}));var Nu,Tu,Mu,Lu,Pu=Cu||function(e){var t={fn:e,next:void 0};cu&&(cu.next=t),uu||(uu=t,fu()),cu=t},Du=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=lt(t),this.reject=lt(n)},Ru={f:function(e){return new Du(e)}},ju=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Au="object"==typeof window,Fu=vu.set,Iu=Ve("species"),_u="Promise",Bu=It.getterFor(_u),$u=It.set,Wu=It.getterFor(_u),Vu=Hl&&Hl.prototype,zu=Hl,Uu=Vu,Hu=ae.TypeError,Ku=ae.document,qu=ae.process,Gu=Ru.f,Ju=Gu,Yu=!!(Ku&&Ku.createEvent&&ae.dispatchEvent),Xu=Ce(ae.PromiseRejectionEvent),Qu=!1,Zu=sr(_u,(function(){var e=Et(zu),t=e!==String(zu);if(!t&&66===je)return!0;if(je>=51&&/native code/.test(e))return!1;var n=new zu((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Iu]=r,!(Qu=n.then((function(){}))instanceof r)||!t&&Au&&!Xu})),ec=Zu||!Lr((function(e){zu.all(e).catch((function(){}))})),tc=function(e){var t;return!(!Ke(e)||!Ce(t=e.then))&&t},nc=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;Pu((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s,l,u=n[i++],c=o?u.ok:u.fail,f=u.resolve,d=u.reject,h=u.domain;try{c?(o||(2===e.rejection&&ac(e),e.rejection=1),!0===c?a=r:(h&&h.enter(),a=c(r),h&&(h.exit(),l=!0)),a===u.promise?d(Hu("Promise-chain cycle")):(s=tc(a))?tt(s,a,f,d):f(a)):d(r)}catch(e){h&&!l&&h.exit(),d(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oc(e)}))}},rc=function(e,t,n){var r,o;Yu?((r=Ku.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),ae.dispatchEvent(r)):r={promise:t,reason:n},!Xu&&(o=ae["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=ae.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},oc=function(e){tt(Fu,ae,(function(){var t,n=e.facade,r=e.value;if(ic(e)&&(t=ju((function(){Gl?qu.emit("unhandledRejection",r,n):rc("unhandledrejection",n,r)})),e.rejection=Gl||ic(e)?2:1,t.error))throw t.value}))},ic=function(e){return 1!==e.rejection&&!e.parent},ac=function(e){tt(Fu,ae,(function(){var t=e.facade;Gl?qu.emit("rejectionHandled",t):rc("rejectionhandled",t,e.value)}))},sc=function(e,t,n){return function(r){e(t,r,n)}},lc=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,nc(e,!0))},uc=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Hu("Promise can't be resolved itself");var r=tc(t);r?Pu((function(){var n={done:!1};try{tt(r,t,sc(uc,n,e),sc(lc,n,e))}catch(t){lc(n,t,e)}})):(e.value=t,e.state=1,nc(e,!1))}catch(t){lc({done:!1},t,e)}}};if(Zu&&(Uu=(zu=function(e){Aa(this,Uu),lt(e),tt(Nu,this);var t=Bu(this);try{e(sc(uc,t),sc(lc,t))}catch(e){lc(t,e)}}).prototype,(Nu=function(e){$u(this,{type:_u,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ma(Uu,{then:function(e,t){var n=Wu(this),r=n.reactions,o=Gu(Tl(this,zu));return o.ok=!Ce(e)||e,o.fail=Ce(t)&&t,o.domain=Gl?qu.domain:void 0,n.parent=!0,r[r.length]=o,0!=n.state&&nc(n,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),Tu=function(){var e=new Nu,t=Bu(e);this.promise=e,this.resolve=sc(uc,t),this.reject=sc(lc,t)},Ru.f=Gu=function(e){return e===zu||e===Mu?new Tu(e):Ju(e)},Ce(Hl)&&Vu!==Object.prototype)){Lu=Vu.then,Qu||(Vt(Vu,"then",(function(e,t){var n=this;return new zu((function(e,t){tt(Lu,n,e,t)})).then(e,t)}),{unsafe:!0}),Vt(Vu,"catch",Uu.catch,{unsafe:!0}));try{delete Vu.constructor}catch(e){}go&&go(Vu,Uu)}function cc(e){Promise.resolve().then(e)}function fc(e,t){return i.isElement(e)?$l(e,t):function(e,t){var n=e.text;if(null==n)throw new Error("Current node is not slate Text "+JSON.stringify(e));var r=n;r=function(e){return e.replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/®/g,"&reg;").replace(/©/g,"&copy;").replace(/™/g,"&trade;")}(r);var o=rl.getParentsNodes(t,e).some((function(e){return"pre"===rl.getNodeType(e)}));if(o||(r=r.replace(/\r\n|\r|\n/g,"<br>")),o&&(r=r.replace(/&nbsp;/g," ")),""===r){var i=rl.getParentNode(null,e);if(!i||0!==i.children.length)return r;r="<br>"}return Al.forEach((function(t){return r=t(e,r)})),r}(e,t)}function dc(e){return"w-e-element-"+e}ur({global:!0,wrap:!0,forced:Zu},{Promise:zu}),uo(zu,_u,!1),ul(_u),Mu=Te(_u),ur({target:_u,stat:!0,forced:Zu},{reject:function(e){var t=Gu(this);return tt(t.reject,void 0,e),t.promise}}),ur({target:_u,stat:!0,forced:Zu},{resolve:function(e){return function(e,t){if(Ze(e),Ke(t)&&t.constructor===e)return t;var n=Ru.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),ur({target:_u,stat:!0,forced:ec},{all:function(e){var t=this,n=Gu(t),r=n.resolve,o=n.reject,i=ju((function(){var n=lt(t.resolve),i=[],a=0,s=1;Ra(e,(function(e){var l=a++,u=!1;s++,tt(n,t,e).then((function(e){u||(u=!0,i[l]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=Gu(t),r=n.reject,o=ju((function(){var o=lt(t.resolve);Ra(e,(function(e){tt(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var hc=function(e,t){var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},pc=function(e,t,n){var r=rl.toDOMRange(e,t).getBoundingClientRect(),o=rl.toDOMRange(e,n).getBoundingClientRect();return hc(r,o)&&hc(o,r)},gc=["span","b","strong","i","em","s","strike","u","font","sub","sup"],vc=[];function yc(e){vc.push(e)}var mc=[];function bc(e){mc.push(e)}var wc={};function xc(e){var t=e.selector,n=e.parseElemHtml;wc[t]=n}var Sc=yt.f,kc=Yn.f,Ec=It.enforce,Oc=Ve("match"),Cc=ae.RegExp,Nc=Cc.prototype,Tc=ae.SyntaxError,Mc=ge(Fo),Lc=ge(Nc.exec),Pc=ge("".charAt),Dc=ge("".replace),Rc=ge("".indexOf),jc=ge("".slice),Ac=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Fc=/a/g,Ic=/a/g,_c=new Cc(Fc)!==Fc,Bc=vi.MISSED_STICKY,$c=vi.UNSUPPORTED_Y,Wc=He&&(!_c||Bc||mi||wi||Ae((function(){return Ic[Oc]=!1,Cc(Fc)!=Fc||Cc(Ic)==Ic||"/a/i"!=Cc(Fc,"i")})));if(sr("RegExp",Wc)){for(var Vc=function(e,t){var n,r,o,i,a,s,l=nt(Nc,this),u=Go(e),c=void 0===t,f=[],d=e;if(!l&&u&&c&&e.constructor===Vc)return e;if((u||nt(Nc,e))&&(e=e.source,c&&(t="flags"in d?d.flags:Mc(d))),e=void 0===e?"":jr(e),t=void 0===t?"":jr(t),d=e,mi&&"dotAll"in Fc&&(r=!!t&&Rc(t,"s")>-1)&&(t=Dc(t,/s/g,"")),n=t,Bc&&"sticky"in Fc&&(o=!!t&&Rc(t,"y")>-1)&&$c&&(t=Dc(t,/y/g,"")),wi&&(i=function(e){for(var t,n=e.length,r=0,o="",i=[],a={},s=!1,l=!1,u=0,c="";r<=n;r++){if("\\"===(t=Pc(e,r)))t+=Pc(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:Lc(Ac,jc(e,r+1))&&(r+=2,l=!0),o+=t,u++;continue;case">"===t&&l:if(""===c||xe(a,c))throw new Tc("Invalid capture group name");a[c]=!0,i[i.length]=[c,u],l=!1,c="";continue}l?c+=t:o+=t}return[o,i]}(e),e=i[0],f=i[1]),a=Fa(Cc(e,t),l?this:Nc,Vc),(r||o||f.length)&&(s=Ec(a),r&&(s.dotAll=!0,s.raw=Vc(function(e){for(var t,n=e.length,r=0,o="",i=!1;r<=n;r++)"\\"!==(t=Pc(e,r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+Pc(e,++r);return o}(e),n)),o&&(s.sticky=!0),f.length&&(s.groups=f)),e!==d)try{bt(a,"source",""===d?"(?:)":d)}catch(e){}return a},zc=function(e){e in Vc||Sc(Vc,e,{configurable:!0,get:function(){return Cc[e]},set:function(t){Cc[e]=t}})},Uc=kc(Cc),Hc=0;Uc.length>Hc;)zc(Uc[Hc++]);Nc.constructor=Vc,Vc.prototype=Nc,Vt(ae,"RegExp",Vc)}ul("RegExp");var Kc=new RegExp(String.fromCharCode(160),"g");function qc(e){return e.replace(Kc," ")}function Gc(e,t){var n=e.length;if(n){var r=e[n-1];if(a.isText(r)){var o=Object.keys(r);if(1===o.length&&"text"===o[0])return r.text=r.text+t,!0}}return!1}function Jc(e,t,n){return{type:"paragraph",children:[{text:f(e).text().replace(/\s+/gm," ")}]}}function Yc(t,n){var r=function(e,t){var n=[];if(null!=e.attr("data-w-e-is-void"))return n;var r=e[0].childNodes;return 1===r.length&&"BR"===r[0].nodeName?(n.push({text:""}),n):(r.forEach((function(e){if(e.nodeType!==_s.ELEMENT_NODE)if(e.nodeType!==_s.TEXT_NODE);else{var r=e.textContent||"";if(""===r.trim()&&r.indexOf("\n")>=0)return;r&&(r=qc(r),Gc(n,r)||n.push({text:r}))}else{if("BR"===e.nodeName)return void(Gc(n,"\n")||n.push({text:"\n"}));var o=f(e);n.push(Qc(o,t))}})),n)}(t,n),o=function(e){for(var t in wc)if(e[0].matches(t))return wc[t];return Jc}(t),i=o(t[0],r,n);return e.isVoid(n,i)||(0===r.length&&(i.children=[{text:t.text().replace(/\s+/gm," ")}]),mc.forEach((function(e){i=e(t[0],i)}))),i}function Xc(e,t){0===e.parents("pre").length&&(e[0].innerHTML=e[0].innerHTML.replace(/\s+/gm," ").replace(/<br>/g,"\n"));var n=e[0].textContent||"";n=function(e){return e.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&reg;/g,"®").replace(/&copy;/g,"©").replace(/&trade;/g,"™")}(n);var r={text:n=qc(n)};return mc.forEach((function(t){r=t(e[0],r)})),r}function Qc(e,t){vc.forEach((function(t){var n=t.selector,r=t.preParseHtml;e[0].matches(n)&&(e=f(r(e[0])))}));var n=Js(e);return"span"===n?e.attr("data-w-e-type")?Yc(e,t):Xc(e):"code"===n?"pre"===Js(e.parent())?Yc(e,t):Xc(e):gc.includes(n)?Xc(e):Yc(e,t)}var Zc=new Set(["doctype","!doctype","meta","script","style","link","frame","iframe","title","svg"]),ef=function(t){var l=t,u=l.onChange;l.insertText;var c=l.apply,d=l.deleteBackward;return l.apply=function(t){var r,o,i,a,s,u,f,d,h=[];if(!l.getConfig().readOnly){switch(t.type){case"insert_text":case"remove_text":case"set_node":try{for(var p=ca(e.levels(l,{at:t.path})),g=p.next();!g.done;g=p.next()){var v=fa(g.value,2),y=v[0],m=v[1],b=rl.findKey(l,y);h.push([m,b])}}catch(e){r={error:e}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":try{for(var w=ca(e.levels(l,{at:n.parent(t.path)})),x=w.next();!x.done;x=w.next()){var S=fa(x.value,2);y=S[0],m=S[1],b=rl.findKey(l,y);h.push([m,b])}}catch(e){i={error:e}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}break;case"move_node":try{for(var k=ca(e.levels(l,{at:n.common(n.parent(t.path),n.parent(t.newPath))})),E=k.next();!E.done;E=k.next()){var O=fa(E.value,2);y=O[0],m=O[1],b=rl.findKey(l,y);h.push([m,b])}}catch(e){s={error:e}}finally{try{E&&!E.done&&(u=k.return)&&u.call(k)}finally{if(s)throw s.error}}}c(t);try{for(var C=ca(h),N=C.next();!N.done;N=C.next()){var T=fa(N.value,2);m=T[0],b=T[1],y=fa(e.node(l,m),1)[0];Ms.set(y,b)}}catch(e){f={error:e}}finally{try{N&&!N.done&&(d=C.return)&&d.call(C)}finally{if(f)throw f.error}}}},l.deleteBackward=function(n){if("line"!==n)return d(n);if(t.selection&&o.isCollapsed(t.selection)){var r=e.above(t,{match:function(n){return e.isBlock(t,n)},at:t.selection});if(r){var i=fa(r,2)[1],a=e.range(t,i,t.selection.anchor),u=function(t,n){var r=e.range(t,o.end(n)),i=Array.from(e.positions(t,{at:n})),a=0,s=i.length,l=Math.floor(s/2);if(pc(t,e.range(t,i[a]),r))return e.range(t,i[a],r);if(i.length<2)return e.range(t,i[i.length-1],r);for(;l!==i.length&&l!==a;)pc(t,e.range(t,i[l]),r)?s=l:a=l,l=Math.floor((a+s)/2);return e.range(t,i[s],r)}(l,a);o.isCollapsed(u)||s.delete(t,{at:u})}}},l.onChange=function(){var e=l.selection;null!=e&&Ds.set(l,e),l.emit("change"),u()},l.handleTab=function(){l.insertText("    ")},l.getHtml=function(){var e=l.children;return(void 0===e?[]:e).map((function(e){return fc(e,l)})).join("")},l.getText=function(){var e=l.children;return(void 0===e?[]:e).map((function(e){return r.string(e)})).join("\n")},l.getSelectionText=function(){var n=l.selection;return null==n?"":e.string(t,n)},l.getElemsByType=function(t,n){var r,o;void 0===n&&(n=!1);var a=[],s=e.nodes(l,{at:[],universal:!0});try{for(var u=ca(s),c=u.next();!c.done;c=u.next()){var f=fa(c.value,1)[0];if(i.isElement(f))if(n?f.type.indexOf(t)>=0:f.type===t){var d=dc(rl.findKey(l,f).id);a.push(ua(ua({},f),{id:d}))}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return a},l.getElemsByTypePrefix=function(e){return l.getElemsByType(e,!0)},l.isEmpty=function(){var e=l.children,t=void 0===e?[]:e;if(t.length>1)return!1;var n=t[0];if(null==n)return!0;if(i.isElement(n)&&"paragraph"===n.type){var r=n.children,o=void 0===r?[]:r;if(o.length>1)return!1;var s=o[0];if(null==s)return!0;if(a.isText(s)&&""===s.text)return!0}return!1},l.clear=function(){s.removeNodes(l,{at:{anchor:e.start(l,[]),focus:e.end(l,[])},mode:"highest"}),0===l.children.length&&s.insertNodes(l,[{type:"paragraph",children:[{text:""}]}])},l.getParentNode=function(e){return rl.getParentNode(l,e)},l.dangerouslyInsertHtml=function(e){if(void 0===e&&(e=""),e){var t=f(e);if(0!==(t=t.filter((function(e){if(e.nodeType!==_s.ELEMENT_NODE)return!1;var t=Js(f(e));return!Zc.has(t)}))).length){var n=f('<div hidden="true"></div>');n.append(t),f("body").append(n);var r=[];if(t.forEach((function(e){var t=!1;if(gc.includes(e.tagName.toLowerCase()))t=!0;else for(var n in wc)if(e.matches(n)){t=!0;break}if(t){var o=f(e);r.push(Qc(o,l))}else{var i=qs(e).trim();if(i)i.split(/\r\n|\r|\n/).forEach((function(e,t){e.trim()&&r.push({type:"paragraph",children:[{text:e}]})}))}})),r.length)try{l.insertFragment(r)}catch(e){l.insertText(qs(n[0]))}n.remove()}}},l},tf=function(e){return null!=e},nf={object:!0,function:!0,undefined:!0},rf=function(e){if(!function(e){return!!tf(e)&&hasOwnProperty.call(nf,typeof e)}(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},of=/^\s*class[\s{/}]/,af=Function.prototype.toString,sf=function(e){return!!function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!rf(e)}(e)&&!of.test(af.call(e))},lf=function(e){return null!=e},uf=Object.keys,cf=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}()?Object.keys:function(e){return uf(lf(e)?Object(e):e)},ff=function(e){if(!lf(e))throw new TypeError("Cannot use null or undefined");return e},df=Math.max,hf=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}()?Object.assign:function(e,t){var n,r,o,i=df(arguments.length,2);for(e=Object(ff(e)),o=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},r=1;r<i;++r)cf(t=arguments[r]).forEach(o);if(void 0!==n)throw n;return e},pf=Array.prototype.forEach,gf=Object.create,vf=function(e,t){var n;for(n in e)t[n]=e[n]},yf=function(e){var t=gf(null);return pf.call(arguments,(function(e){lf(e)&&vf(Object(e),t)})),t},mf="razdwatrzy",bf=String.prototype.indexOf,wf="function"==typeof mf.contains&&!0===mf.contains("dwa")&&!1===mf.contains("foo")?String.prototype.contains:function(e){return bf.call(this,e,arguments[1])>-1},xf=ne((function(e){var t=e.exports=function(e,t){var n,r,o,i,a;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],tf(e)?(n=wf.call(e,"c"),r=wf.call(e,"e"),o=wf.call(e,"w")):(n=o=!0,r=!1),a={value:t,configurable:n,enumerable:r,writable:o},i?hf(yf(i),a):a};t.gs=function(e,t,n){var r,o,i,a;return"string"!=typeof e?(i=n,n=t,t=e,e=null):i=arguments[3],tf(t)?sf(t)?tf(n)?sf(n)||(i=n,n=void 0):n=void 0:(i=t,t=n=void 0):t=void 0,tf(e)?(r=wf.call(e,"c"),o=wf.call(e,"e")):(r=!0,o=!1),a={get:t,set:n,configurable:r,enumerable:o},i?hf(yf(i),a):a}})),Sf=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},kf=ne((function(e,t){var n,r,o,i,a,s,l,u=Function.prototype.apply,c=Function.prototype.call,f=Object.create,d=Object.defineProperty,h=Object.defineProperties,p=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};n=function(e,t){var n;return Sf(t),p.call(this,"__ee__")?n=this.__ee__:(n=g.value=f(null),d(this,"__ee__",g),g.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},r=function(e,t){var r,i;return Sf(t),i=this,n.call(this,e,r=function(){o.call(i,e,r),u.call(t,this,arguments)}),r.__eeOnceListener__=t,this},o=function(e,t){var n,r,o,i;if(Sf(t),!p.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(r=n[e]))for(i=0;o=r[i];++i)o!==t&&o.__eeOnceListener__!==t||(2===r.length?n[e]=r[i?0:1]:r.splice(i,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},i=function(e){var t,n,r,o,i;if(p.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"==typeof o){for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];for(o=o.slice(),t=0;r=o[t];++t)u.call(r,this,i)}else switch(arguments.length){case 1:c.call(o,this);break;case 2:c.call(o,this,arguments[1]);break;case 3:c.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),t=1;t<n;++t)i[t-1]=arguments[t];u.call(o,this,i)}},a={on:n,once:r,off:o,emit:i},s={on:xf(n),once:xf(r),off:xf(o),emit:xf(i)},l=h({},s),e.exports=t=function(e){return null==e?f(l):h(Object(e),s)},t.methods=a}));function Ef(e){var t=Rs.get(e);return null==t&&(t=kf(),Rs.set(e,t)),t}var Of=new WeakMap;function Cf(e,t){var n=Of.get(e);null==n&&(n=new Set,Of.set(e,n)),n.add(t)}function Nf(e){return Of.get(e)||new Set}function Tf(e){Of.set(e,new Set)}function Mf(e){var t=rl.getTextarea(e).$textAreaContainer,n=t.width(),r=t.height(),o=t.offset();return{top:o.top,left:o.left,width:n,height:r}}function Lf(e){var t={top:"0",left:"0"},n=e.selection;if(null==n)return t;var r=Mf(e);if(null==r)return t;var o=r.top,i=r.left,a=r.width,s=r.height,l=rl.toDOMRange(e,n).getClientRects()[0];if(null==l)return t;l.width;var u=l.height,c={},f=l.top-o,d=l.left-i;if(d>a/2){var h=a-d;c.right=h+5+"px"}else c.left=d+5+"px";if(f>s/2){var p=s-f;c.bottom=p+5+"px"}else{var g=f+u;g<0&&(g=0),c.top=g+5+"px"}return c}function Pf(e,t,n){void 0===n&&(n="modal");var r={top:"0",left:"0"};if(null==e.selection)return r;var o=i.isElement(t)&&e.isVoid(t),a=Ts.get(t);if(null==a)return r;var s=a.getBoundingClientRect(),l=s.top,u=s.left,c=s.height,f=s.width;if(o){var d=function(e){var t=[];t.push(e);for(var n=0;t.length>0;){var r=t.pop();if(null==r)break;if(++n>1e4)break;var o=r.nodeName;if(1===r.nodeType){var i=o.toLowerCase();if(Is.includes(i)||"iframe"===i||"video"===i)return r;var a=r.children||[],s=a.length;if(s)for(var l=s-1;l>=0;l--)t.push(a[l])}}return null}(a);if(null!=d){var h=d.getBoundingClientRect();l=h.top,c=h.height}}var p=Mf(e);if(null==p)return r;var g=p.top,v=p.left,y=p.width,m=p.height,b={},w=l-g,x=u-v;if("bar"===n)return b.left=x+"px",w>40?b.bottom=m-w+5+"px":b.top=w+c+5+"px",b;if("modal"===n){var S;if(o?x>(y-f)/2?b.right=y-x+5+"px":b.left=x+f+5+"px":b.left=x+"px",o)(S=w)<0&&(S=0),b.top=S+"px";else if(w>(m-c)/2)b.bottom=m-w+5+"px";else(S=w+c)<0&&(S=0),b.top=S+5+"px";return b}throw new Error("type '"+n+"' is invalid")}function Df(e,t){cc((function(){var n=Mf(e);if(null!=n){var r,o=n.top,i=n.left,a=n.width,s=n.height,l=t.offset(),u=l.top,c=l.left,f=t.width(),d=t.height(),h=u-o,p=c-i,g=t.attr("style");if(g.indexOf("top")>=0)if((r=h+d-s)>0){var v=t.css("top"),y=parseInt(v.toString())-r;y<0&&(y=0),t.css("top",y+"px")}if(g.indexOf("bottom")>=0&&u<0){var m=t.css("bottom"),b=parseInt(m.toString())-Math.abs(u);t.css("bottom",b+"px")}if(g.indexOf("left")>=0)if((r=p+f-a)>0){var w=t.css("left"),x=parseInt(w.toString())-r;x<0&&(x=0),t.css("left",x+"px")}if(g.indexOf("right")>=0&&c<0){var S=t.css("right"),k=parseInt(S.toString())-Math.abs(c);t.css("right",k+"px")}}}))}var Rf=fr("slice"),jf=Ve("species"),Af=ae.Array,Ff=Math.max;ur({target:"Array",proto:!0,forced:!Rf},{slice:function(e,t){var n,r,o,i=In(this),a=dn(i),s=Vn(e,a),l=Vn(void 0===t?a:t,a);if(hn(i)&&(n=i.constructor,(xn(n)&&(n===Af||hn(n.prototype))||Ke(n)&&null===(n=n[jf]))&&(n=void 0),n===Af||void 0===n))return Kl(i,s,l);for(r=new(void 0===n?Af:n)(Ff(l-s,0)),o=0;s<l;s++,o++)s in i&&wr(r,o,i[s]);return r.length=o,r}});var If=Bn.f,_f=ge("".startsWith),Bf=ge("".slice),$f=Math.min,Wf=Qo("startsWith"),Vf=!Wf&&!!function(){var e=If(String.prototype,"startsWith");return e&&!e.writable}();ur({target:"String",proto:!0,forced:!Vf&&!Wf},{startsWith:function(e){var t=jr(ye(this));Yo(e);var n=fn($f(arguments.length>1?arguments[1]:void 0,t.length)),r=jr(e);return _f?_f(t,r,n):Bf(t,n,n+r.length)===r}});var zf=Object.assign,Uf=Object.defineProperty,Hf=ge([].concat),Kf=!zf||Ae((function(){if(He&&1!==zf({b:1},zf(Uf({},"a",{enumerable:!0,get:function(){Uf(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=zf({},e)[n]||$r(zf({},t)).join("")!=r}))?function(e,t){for(var n=be(e),r=arguments.length,o=1,i=Xn.f,a=Fn.f;r>o;)for(var s,l=an(arguments[o++]),u=i?Hf($r(l),i(l)):$r(l),c=u.length,f=0;c>f;)s=u[f++],He&&!tt(a,l,s)||(n[s]=l[s]);return n}:zf;ur({target:"Object",stat:!0,forced:Object.assign!==Kf},{assign:Kf});var qf=["props","attrs","style","dataset","on","hook"];function Gf(e){var t=e.data,n=void 0===t?{}:t,r=e.children,o=void 0===r?[]:r;Object.keys(n).forEach((function(t){var r,o,i=n[t];if("key"!==t){if(!qf.includes(t)){if(t.startsWith("data-")){var a=t.slice(5);return a=G(a),function(e,t){null==e.data&&(e.data={});var n=e.data;null==n.dataset&&(n.dataset={});Object.assign(n.dataset,t)}(e,((r={})[a]=i,r)),void delete n[t]}!function(e,t){null==e.data&&(e.data={});var n=e.data;null==n.props&&(n.props={});Object.assign(n.props,t)}(e,(o={},o[t]=i,o)),delete n[t]}}else e.key=i})),o.length>0&&o.forEach((function(e){"string"!=typeof e&&Gf(e)}))}var Jf=[];function Yf(e){Jf.push(e)}var Xf={};function Qf(e){var t=e.type,n=e.renderElem;Xf[t||""]=n}function Zf(e,t,n){var r=n.isInline(e)?"span":"div";return K(r,null,t)}function ed(t,n){var o,i=rl.findKey(n,t),a=n.isInline(t),s=e.isVoid(n,t),l=dc(i.id),u={id:l,key:i.id,"data-slate-node":"element","data-slate-inline":a},c=t.type,f=t.children,d=void 0===f?[]:f,h=function(e){return Xf[e]||Zf}(c);o=s?null:d.map((function(e,r){return od(e,r,t,n)}));var p=h(t,o,n);if(s){u["data-slate-void"]=!0;var g=a?"span":"div",v=fa(r.texts(t),1),y=fa(v[0],1)[0],m=od(y,0,t,n),b=K(g,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},m);p=K(g,{style:{position:"relative"}},p,b),ks.set(y,0),Es.set(y,t)}return null==p.data&&(p.data={}),Object.assign(p.data,u),s||a||(p=function(e,t){var n=t;return Jf.forEach((function(r){n=r(e,t)})),n}(t,p)),cc((function(){var e=Us(l);null!=e&&(Ns.set(i,e),Ts.set(t,e),Cs.set(e,t))})),p}function td(e,t){return void 0===t&&(t=!1),K("span",{"data-slate-string":!0},t?e+"\n":e)}function nd(e,t){return void 0===e&&(e=0),void 0===t&&(t=!1),K("span",{"data-slate-zero-width":t?"n":"z","data-slate-length":e},"\ufeff",t?K("br",null):null)}function rd(t,o,i){if(null==t.text)throw new Error("Current node is not slate Text "+JSON.stringify(t));var s=rl.findKey(i,t),l=i.getConfig().decorate;if(null==l)throw new Error("Can not get config.decorate");var u=rl.findPath(i,t),c=l([t,u]),f=a.decorations(t,c),d=f.map((function(a,s){var l=function(t,o,i,a,s){void 0===o&&(o=!1);var l=t.text,u=rl.findPath(s,i),c=n.parent(u);if(e.isEditor(a))throw new Error("Text node "+JSON.stringify(i)+" parent is Editor");return s.isVoid(a)?nd(r.string(a).length):""!==l||a.children[a.children.length-1]!==i||s.isInline(a)||""!==e.string(s,c)?""===l?nd():o&&"\n"===l.slice(-1)?td(l,!0):td(l):nd(0,!0)}(a,s===f.length-1,t,o,i);return l=function(e,t){var n=t;return Jf.forEach((function(t){n=t(e,n)})),n}(a,l),K("span",{"data-slate-leaf":!0},l)})),h=function(e){return"w-e-text-"+e}(s.id),p=K("span",{"data-slate-node":"text",id:h,key:s.id},d);return cc((function(){var e=Us(h);null!=e&&(Ns.set(s,e),Ts.set(t,e),Cs.set(e,t))})),p}function od(e,t,n,r){return ks.set(e,t),Es.set(e,n),i.isElement(e)?ed(e,r):rd(e,n,r)}function id(e,t){var n,r=e.$scroll,o=function(e){return"w-e-textarea-"+e}(e.id),i=t.getConfig(),a=i.readOnly,s=i.autoFocus,l=function(e,t){return void 0===t&&(t=!1),q("div#"+e,{props:{contentEditable:!t}})}(o,a),u=t.children||[];l.children=u.map((function(e,n){var r=od(e,n,t,t);return Gf(r),r}));var c=ws.get(e);if(null==c&&(c=!0),c){var d=function(e,t){return f('<div\n        id="'+e+'"\n        data-slate-editor\n        data-slate-node="value"\n        suppressContentEditableWarning\n        role="textarea"\n        spellCheck="true"\n        autoCorrect="true"\n        autoCapitalize="true"\n    ></div>')}(o);r.append(d),e.$textArea=d,n=d[0],(p=$([W,V,z,U,H]))(n,l),ws.set(e,!1),xs.set(e,p)}else{var h=Ss.get(e),p=xs.get(e);if(null==h||null==p)return;n=h.elm,p(h,l)}if(null!=n||null!=(n=Us(o))){if((c?s:t.isFocused())&&n.focus({preventScroll:!0}),c){var g=Bs(n);g&&Ls.set(t,g)}Os.set(t,n),Ts.set(t,n),Cs.set(n,t),Ss.set(e,l)}}function ad(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function sd(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function ld(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return sd(n.overflowY,t)||sd(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function ud(e,t,n,r,o,i,a,s){return i<e&&a>t||i>e&&a<t?0:i<=e&&s<=n||a>=t&&s>=n?i-e-r:a>t&&s<n||i<e&&s>n?a-t+o:0}function cd(e,t){var n=window,r=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,s=t.skipOverflowHiddenElements,l="function"==typeof a?a:function(e){return e!==a};if(!ad(e))throw new TypeError("Invalid target");for(var u=document.scrollingElement||document.documentElement,c=[],f=e;ad(f)&&l(f);){if((f=f.parentElement)===u){c.push(f);break}null!=f&&f===document.body&&ld(f)&&!ld(document.documentElement)||null!=f&&ld(f,s)&&c.push(f)}for(var d=n.visualViewport?n.visualViewport.width:innerWidth,h=n.visualViewport?n.visualViewport.height:innerHeight,p=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,v=e.getBoundingClientRect(),y=v.height,m=v.width,b=v.top,w=v.right,x=v.bottom,S=v.left,k="start"===o||"nearest"===o?b:"end"===o?x:b+y/2,E="center"===i?S+m/2:"end"===i?w:S,O=[],C=0;C<c.length;C++){var N=c[C],T=N.getBoundingClientRect(),M=T.height,L=T.width,P=T.top,D=T.right,R=T.bottom,j=T.left;if("if-needed"===r&&b>=0&&S>=0&&x<=h&&w<=d&&b>=P&&x<=R&&S>=j&&w<=D)return O;var A=getComputedStyle(N),F=parseInt(A.borderLeftWidth,10),I=parseInt(A.borderTopWidth,10),_=parseInt(A.borderRightWidth,10),B=parseInt(A.borderBottomWidth,10),$=0,W=0,V="offsetWidth"in N?N.offsetWidth-N.clientWidth-F-_:0,z="offsetHeight"in N?N.offsetHeight-N.clientHeight-I-B:0;if(u===N)$="start"===o?k:"end"===o?k-h:"nearest"===o?ud(g,g+h,h,I,B,g+k,g+k+y,y):k-h/2,W="start"===i?E:"center"===i?E-d/2:"end"===i?E-d:ud(p,p+d,d,F,_,p+E,p+E+m,m),$=Math.max(0,$+g),W=Math.max(0,W+p);else{$="start"===o?k-P-I:"end"===o?k-R+B+z:"nearest"===o?ud(P,R,M,I,B+z,k,k+y,y):k-(P+M/2)+z/2,W="start"===i?E-j-F:"center"===i?E-(j+L/2)+V/2:"end"===i?E-D+_+V:ud(j,D,L,F,_+V,E,E+m,m);var U=N.scrollLeft,H=N.scrollTop;k+=H-($=Math.max(0,Math.min(H+$,N.scrollHeight-M+z))),E+=U-(W=Math.max(0,Math.min(U+W,N.scrollWidth-L+V)))}O.push({el:N,top:$,left:W})}return O}function fd(e){return e===Object(e)&&0!==Object.keys(e).length}function dd(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(fd(t)&&"function"==typeof t.behavior)return t.behavior(n?[]:cd(e,t));if(!n){var r=function(e){return!1===e?{block:"end",inline:"nearest"}:fd(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var n="scrollBehavior"in document.body.style;e.forEach((function(e){var r=e.el,o=e.top,i=e.left;r.scroll&&n?r.scroll({top:o,left:i,behavior:t}):(r.scrollTop=o,r.scrollLeft=i)}))}(cd(e,r),r.behavior)}}function hd(e,t){return Ws(t)&&rl.hasDOMNode(e,t,{editable:!0})}function pd(t,n){if(t.getConfig().readOnly)return!1;var r=gd(t,n)&&rl.toSlateNode(t,n);return e.isVoid(t,r)}function gd(e,t){return Ws(t)&&rl.hasDOMNode(e,t)}var vd=new WeakMap,yd=new WeakMap;var md={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",tab:"tab",selectAll:"mod+a"},bd={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},wd={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},xd=function(e){var t=md[e],n=bd[e],r=wd[e],o=t&&J(t),i=n&&J(n),a=r&&J(r);return function(e){return!(!o||!o(e))||(!!(Ys&&i&&i(e))||!(Ys||!a||!a(e)))}},Sd={isBold:xd("bold"),isCompose:xd("compose"),isMoveBackward:xd("moveBackward"),isMoveForward:xd("moveForward"),isDeleteBackward:xd("deleteBackward"),isDeleteForward:xd("deleteForward"),isDeleteLineBackward:xd("deleteLineBackward"),isDeleteLineForward:xd("deleteLineForward"),isDeleteWordBackward:xd("deleteWordBackward"),isDeleteWordForward:xd("deleteWordForward"),isExtendBackward:xd("extendBackward"),isExtendForward:xd("extendForward"),isExtendLineBackward:xd("extendLineBackward"),isExtendLineForward:xd("extendLineForward"),isItalic:xd("italic"),isMoveLineBackward:xd("moveLineBackward"),isMoveLineForward:xd("moveLineForward"),isMoveWordBackward:xd("moveWordBackward"),isMoveWordForward:xd("moveWordForward"),isRedo:xd("redo"),isSplitBlock:xd("splitBlock"),isTransposeCharacter:xd("transposeCharacter"),isUndo:xd("undo"),isTab:xd("tab"),isSelectAll:xd("selectAll")};function kd(e){e.preventDefault()}var Ed={beforeinput:function(t,n,r){var i=t,a=r.getConfig().readOnly;if(nl&&!a&&hd(r,i.target)){var l=r.selection,u=i.inputType,c=i.dataTransfer||i.data||void 0;if("insertCompositionText"!==u&&"deleteCompositionText"!==u){if(i.preventDefault(),!u.startsWith("delete")||u.startsWith("deleteBy")){var f=fa(i.getTargetRanges(),1)[0];if(f){var d=rl.toSlateRange(r,f,{exactMatch:!1,suppressThrow:!1});l&&o.equals(l,d)||s.select(r,d)}}if(l&&o.isExpanded(l)&&u.startsWith("delete")){var h=u.endsWith("Backward")?"backward":"forward";e.deleteFragment(r,{direction:h})}else switch(u){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":e.deleteFragment(r);break;case"deleteContent":case"deleteContentForward":e.deleteForward(r);break;case"deleteContentBackward":e.deleteBackward(r);break;case"deleteEntireSoftLine":e.deleteBackward(r,{unit:"line"}),e.deleteForward(r,{unit:"line"});break;case"deleteHardLineBackward":e.deleteBackward(r,{unit:"block"});break;case"deleteSoftLineBackward":e.deleteBackward(r,{unit:"line"});break;case"deleteHardLineForward":e.deleteForward(r,{unit:"block"});break;case"deleteSoftLineForward":e.deleteForward(r,{unit:"line"});break;case"deleteWordBackward":e.deleteBackward(r,{unit:"word"});break;case"deleteWordForward":e.deleteForward(r,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":e.insertBreak(r);break;case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("insertFromPaste"===u&&!js.get(r))break;c instanceof DataTransfer?r.insertData(c):"string"==typeof c&&e.insertText(r,c)}}}},blur:function(e,t,n){var r=e,o=t.isUpdatingSelection,a=t.latestElement;if(!n.getConfig().readOnly&&!o&&hd(n,r.target)){var s=rl.findDocumentOrShadowRoot(n);if(a!==s.activeElement){var l=r.relatedTarget;if(!(l===rl.toDOMNode(n,n)||$s(l)&&l.hasAttribute("data-slate-spacer"))){if(null!=l&&Ws(l)&&rl.hasDOMNode(n,l)){var u=rl.toSlateNode(n,l);if(i.isElement(u)&&!n.isVoid(u))return}if(Qs){var c=s.getSelection();null==c||c.removeAllRanges()}Ps.delete(n)}}}},focus:function(e,t,n){var r=rl.toDOMNode(n,n),o=rl.findDocumentOrShadowRoot(n);t.latestElement=o.activeElement,Xs&&e.target!==r?r.focus():Ps.set(n,!0)},click:function(t,o,i){if(!i.getConfig().readOnly&&gd(i,t.target)&&Ws(t.target)){var a=rl.toSlateNode(i,t.target),l=rl.findPath(i,a);if(e.hasPath(i,l))if(r.get(i,l)===a){var u=e.start(i,l),c=e.end(i,l),f=e.void(i,{at:u}),d=e.void(i,{at:c});if(f&&d&&n.equals(f[1],d[1])){var h=e.range(i,u);s.select(i,h)}}}},compositionstart:function(t,n,r){if(hd(r,t.target)){var i=r.selection;if(i&&o.isExpanded(i)&&e.deleteFragment(r),i&&o.isCollapsed(i)){var a=rl.toDOMRange(r,i).startContainer,s=a.textContent||"";vd.set(r,s),yd.set(r,a)}n.isComposing=!0,function(e,t){var n;t.getConfig().placeholder&&t.isEmpty()&&e.showPlaceholder&&(null===(n=e.$placeholder)||void 0===n||n.hide(),e.showPlaceholder=!1)}(n,r)}},compositionend:function(t,n,r){var a=t;if(hd(r,a.target)){n.isComposing=!1;var s=r.selection;if(null!=s){(tl||Xs)&&rl.cleanExposedTexNodeInSelectionBlock(r);for(var l=o.isBackward(s)?s.focus:s.anchor,u=fa(e.node(r,[l.path[0]]),1)[0],c=0;c<l.path.length;c++){var f=fa(e.node(r,l.path.slice(0,c+1)),1)[0];if(i.isElement(f)&&((Qs||Xs)&&"link"===f.type||"code"===f.type)){rl.setNewKey(u);break}}var d=a.data;if(d){if(r.getConfig().maxLength){var h=rl.getLeftLengthOfMaxLength(r);if(h<d.length)rl.toDOMRange(r,s).startContainer.textContent=vd.get(r)||"",h>0&&e.insertText(r,d.slice(0,h)),n.changeViewState();else e.insertText(r,d)}else e.insertText(r,d);Qs||setTimeout((function(){var e=r.selection;if(null!=e){var t=yd.get(r);if(null!=t)rl.toDOMRange(r,e).startContainer!==t&&(t.textContent=vd.get(r)||"")}}))}}}},compositionupdate:function(e,t,n){hd(n,e.target)&&(t.isComposing=!0)},keydown:function(t,n,a){var l=t,u=a.selection;if(!a.getConfig().readOnly&&!n.isComposing&&hd(a,l.target)){if(function(e,t){var n=hs.get(e),r=n&&n.getMenus(),o=gs.get(e),i=o&&o.getMenus(),a=ua(ua({},r),i);for(var s in a){var l=a[s],u=l.hotkey;if(u&&Y(u,t)&&!l.isDisabled(e)){var c=l.getValue(e);l.exec(e,c)}}}(a,l),Sd.isTab(l))return kd(l),void a.handleTab();if(Sd.isRedo(l))return kd(l),void("function"==typeof a.redo&&a.redo());if(Sd.isUndo(l))return kd(l),void("function"==typeof a.undo&&a.undo());if(Sd.isMoveLineBackward(l))return kd(l),void s.move(a,{unit:"line",reverse:!0});if(Sd.isMoveLineForward(l))return kd(l),void s.move(a,{unit:"line"});if(Sd.isExtendLineBackward(l))return kd(l),void s.move(a,{unit:"line",edge:"focus",reverse:!0});if(Sd.isExtendLineForward(l))return kd(l),void s.move(a,{unit:"line",edge:"focus"});if(Sd.isMoveBackward(l))return kd(l),void(u&&o.isCollapsed(u)?s.move(a,{reverse:!0}):s.collapse(a,{edge:"start"}));if(Sd.isMoveForward(l))return kd(l),void(u&&o.isCollapsed(u)?s.move(a):s.collapse(a,{edge:"end"}));if(Sd.isMoveWordBackward(l))return kd(l),u&&o.isExpanded(u)&&s.collapse(a,{edge:"focus"}),void s.move(a,{unit:"word",reverse:!0});if(Sd.isMoveWordForward(l))return kd(l),u&&o.isExpanded(u)&&s.collapse(a,{edge:"focus"}),void s.move(a,{unit:"word"});if(Sd.isSelectAll(l))return kd(l),void a.selectAll();if(nl){if((tl||Qs)&&u&&(Sd.isDeleteBackward(l)||Sd.isDeleteForward(l))&&o.isCollapsed(u)){var c=r.parent(a,u.anchor.path);if(i.isElement(c)&&e.isVoid(a,c)&&e.isInline(a,c))return l.preventDefault(),void s.delete(a,{unit:"block"})}}else{if(Sd.isBold(l)||Sd.isItalic(l)||Sd.isTransposeCharacter(l))return void kd(l);if(Sd.isSplitBlock(l))return kd(l),void e.insertBreak(a);if(Sd.isDeleteBackward(l))return kd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"backward"}):e.deleteBackward(a));if(Sd.isDeleteForward(l))return kd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"forward"}):e.deleteForward(a));if(Sd.isDeleteLineBackward(l))return kd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"backward"}):e.deleteBackward(a,{unit:"line"}));if(Sd.isDeleteLineForward(l))return kd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"forward"}):e.deleteForward(a,{unit:"line"}));if(Sd.isDeleteWordBackward(l))return kd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"backward"}):e.deleteBackward(a,{unit:"word"}));if(Sd.isDeleteWordForward(l))return kd(l),void(u&&o.isExpanded(u)?e.deleteFragment(a,{direction:"forward"}):e.deleteForward(a,{unit:"word"}))}}},keypress:function(t,n,r){if(!nl&&!r.getConfig().readOnly&&hd(r,t.target)){t.preventDefault();var o=t.key;e.insertText(r,o)}},copy:function(e,t,n){var r=e;if(hd(n,r.target)){r.preventDefault();var o=r.clipboardData;null!=o&&n.setFragmentData(o)}},cut:function(t,n,i){var a=t,l=i.selection;if(!i.getConfig().readOnly&&hd(i,a.target)){a.preventDefault();var u=a.clipboardData;if(null!=u&&(i.setFragmentData(u),l))if(o.isExpanded(l))e.deleteFragment(i);else{var c=r.parent(i,l.anchor.path);e.isVoid(i,c)&&s.delete(i)}}},paste:function(e,t,n){js.set(n,!0);var r=e;if(!n.getConfig().readOnly&&hd(n,r.target)){var o=n.getConfig().customPaste;if(o)if(!1===o(n,r))return void js.set(n,!1);if(!nl||function(e){return e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length}(r)){r.preventDefault();var i=r.clipboardData;null!=i&&n.insertData(i)}}},dragover:function(t,n,r){if(gd(r,t.target)){var o=rl.toSlateNode(r,t.target);e.isVoid(r,o)&&t.preventDefault()}},dragstart:function(t,n,r){var o=t;if(gd(r,o.target)&&!r.getConfig().readOnly){var i=rl.toSlateNode(r,o.target),a=rl.findPath(r,i);if(e.isVoid(r,i)||e.void(r,{at:a,voids:!0})){var l=e.range(r,a);s.select(r,l)}var u=o.dataTransfer;null!=u&&(n.isDraggingInternally=!0,r.setFragmentData(u))}},dragend:function(e,t,n){var r=e;n.getConfig().readOnly||t.isDraggingInternally&&gd(n,r.target)&&(t.isDraggingInternally=!1)},drop:function(e,t,n){var r=e,o=r.dataTransfer;if(!n.getConfig().readOnly&&gd(n,r.target)&&null!=o&&!(nl&&Qs&&o.files.length>0)){r.preventDefault();var i=n.selection,a=rl.findEventRange(n,r);s.select(n,a),t.isDraggingInternally&&(i&&s.delete(n,{at:i}),t.isDraggingInternally=!1),n.insertData(o),n.isFocused()||n.focus()}}},Od=1,Cd=function(){function e(e){var t=this;this.id=Od++,this.$textArea=null,this.$progressBar=f('<div class="w-e-progress-bar"></div>'),this.$maxLengthInfo=f('<div class="w-e-max-length-info"></div>'),this.isComposing=!1,this.isUpdatingSelection=!1,this.isDraggingInternally=!1,this.latestElement=null,this.showPlaceholder=!1,this.$placeholder=null,this.latestEditorSelection=null,this.onDOMSelectionChange=B((function(){var e=t.editorInstance;!function(e,t){var n=e.isComposing,r=e.isUpdatingSelection,o=e.isDraggingInternally;if(!(t.getConfig().readOnly||n||r||o)){var i=rl.findDocumentOrShadowRoot(t),a=i.activeElement,l=rl.toDOMNode(t,t),u=i.getSelection();if(a===l?(e.latestElement=a,Ps.set(t,!0)):Ps.delete(t),!u)return s.deselect(t);var c=u.anchorNode,f=u.focusNode,d=hd(t,c)||pd(t,c),h=hd(t,f)||pd(t,f);if(d&&h){var p=rl.toSlateRange(t,u,{exactMatch:!1,suppressThrow:!1});s.select(t,p)}else s.deselect(t)}}(t,e)}),100);var n=f(e);if(0===n.length)throw new Error("Cannot find textarea DOM by selector '"+e+"'");this.$box=n;var r=f('<div class="w-e-text-container"></div>');r.append(this.$progressBar),r.append(this.$maxLengthInfo),n.append(r);var o=f('<div class="w-e-scroll"></div>');r.append(o),this.$scroll=o,this.$textAreaContainer=r,cc((function(){var e=t.editorInstance,n=rl.getWindow(e);n.document.addEventListener("selectionchange",t.onDOMSelectionChange),e.on("destroyed",(function(){n.document.removeEventListener("selectionchange",t.onDOMSelectionChange)})),r.on("click",(function(){return e.hidePanelOrModal()})),e.on("change",t.changeViewState.bind(t));var o=e.getConfig().onChange;o&&e.on("change",(function(){return o(e)})),t.onFocusAndOnBlur(),e.on("change",t.changeMaxLengthInfo.bind(t)),t.bindEvent()}))}return Object.defineProperty(e.prototype,"editorInstance",{get:function(){var e=fs.get(this);if(null==e)throw new Error("Can not get editor instance");return e},enumerable:!1,configurable:!0}),e.prototype.bindEvent=function(){var e=this,t=this.$textArea,n=this.$scroll,r=this.editorInstance;null!=t&&(_(Ed,(function(n,o){t.on(o,(function(t){n(t,e,r)}))})),r.getConfig().scroll&&(n.css("overflow-y","auto"),n.on("scroll",B((function(){r.emit("scroll")}),100))))},e.prototype.onFocusAndOnBlur=function(){var e=this,t=this.editorInstance,n=t.getConfig(),r=n.onBlur,o=n.onFocus;this.latestEditorSelection=t.selection,t.on("change",(function(){null==e.latestEditorSelection&&null!=t.selection?o&&o(t):null!=e.latestEditorSelection&&null==t.selection&&r&&r(t),e.latestEditorSelection=t.selection}))},e.prototype.changeMaxLengthInfo=function(){var e=this.editorInstance,t=e.getConfig().maxLength;if(t){var n=t-rl.getLeftLengthOfMaxLength(e);this.$maxLengthInfo[0].innerHTML=n+"/"+t}},e.prototype.changeProgress=function(e){var t=this.$progressBar;t.css("width",e+"%"),e>=100&&setTimeout((function(){t.hide(),t.css("width","0"),t.show()}),1e3)},e.prototype.changeViewState=function(){var e=this,t=this.editorInstance;id(this,t),function(e,t){var n,r=t.getConfig().placeholder;if(r){var o=t.isEmpty();if(o&&!e.showPlaceholder&&!e.isComposing){if(null==e.$placeholder){var i=f('<div class="w-e-text-placeholder">'+r+"</div>");e.$textAreaContainer.append(i),e.$placeholder=i}return e.$placeholder.show(),void(e.showPlaceholder=!0)}!o&&e.showPlaceholder&&(null===(n=e.$placeholder)||void 0===n||n.hide(),e.showPlaceholder=!1)}}(this,t),cc((function(){!function(e,t){var n=t.selection,r=rl.findDocumentOrShadowRoot(t).getSelection();if(r&&!e.isComposing&&t.isFocused()){var i="None"!==r.type;if(n||i){var a=Os.get(t),s=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(s=!0),i&&s&&n){var l=rl.toSlateRange(t,r,{exactMatch:!0,suppressThrow:!0});if(l&&o.equals(l,n)){var u=!0;if(o.isCollapsed(n)){var c=r.anchorNode,f=r.anchorOffset;if(c===a){var d=a.childNodes,h=void 0;(h=d[f])&&h.matches("table")&&(u=!1),(h=d[f-1])&&h.matches("table")&&(u=!1)}}if(u)return}}if(!n||rl.hasRange(t,n)){e.isUpdatingSelection=!0;var p=n&&rl.toDOMRange(t,n);if(p){o.isBackward(n)?r.setBaseAndExtent(p.endContainer,p.endOffset,p.startContainer,p.startOffset):r.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset);var g=p.startContainer.parentElement;g.closest("[data-slate-spacer]")||(g.getBoundingClientRect=p.getBoundingClientRect.bind(p),dd(g,{scrollMode:"if-needed",boundary:a.parentElement,block:"end",behavior:"smooth"}),delete g.getBoundingClientRect)}else r.removeAllRanges();setTimeout((function(){p&&Xs&&a.focus(),e.isUpdatingSelection=!1}))}else t.selection=rl.toSlateRange(t,r,{exactMatch:!1,suppressThrow:!1})}}}(e,t)}))},e.prototype.destroy=function(){this.$textAreaContainer.remove()},e}();$i("match",(function(e,t,n){return[function(t){var n=ye(this),r=null==t?void 0:ut(t,e);return r?tt(r,t,n):new RegExp(t)[e](jr(n))},function(e){var r=Ze(this),o=jr(e),i=n(t,r,o);if(i.done)return i.value;if(!r.global)return Xi(r,o);var a=r.unicode;r.lastIndex=0;for(var s,l=[],u=0;null!==(s=Xi(r,o));){var c=jr(s[0]);l[u]=c,""===c&&(r.lastIndex=Vi(o,fn(r.lastIndex),a)),u++}return 0===u?null:l}]}));function Nd(e){e.removeAttr("width"),e.removeAttr("height"),e.removeAttr("fill"),e.removeAttr("class"),e.removeAttr("t"),e.removeAttr("p-id");var t=e.children();t.length&&Nd(t)}function Td(){return f('<svg viewBox="0 0 1024 1024"><path d="M498.7 655.8l-197.6-268c-8.1-10.9-0.3-26.4 13.3-26.4h395.2c13.6 0 21.4 15.4 13.3 26.4l-197.6 268c-6.6 9-20 9-26.6 0z"></path></svg>')}function Md(){return f('<div class="w-e-bar-divider"></div>')}function Ld(e,t,n,r,o){if(void 0===o&&(o=!1),t){if(r){var i=Ys?"cmd":"ctrl";r=r.replace("mod",i)}if(o)r&&(e.attr("data-tooltip",r),e.addClass("w-e-menu-tooltip-v5"),e.addClass("tooltip-right"));else{var a=r?n+"\n"+r:n;e.attr("data-tooltip",a),e.addClass("w-e-menu-tooltip-v5")}}}var Pd=function(){function e(e,t){var n=this;void 0===t&&(t=!1),this.$elem=f('<div class="w-e-bar-item"></div>'),this.$button=f('<button type="button"></button>'),this.disabled=!1,this.menu=e;var r=e.tag,o=e.width;if("button"!==r)throw new Error("Invalid tag '"+r+"', expected 'button'");var i=e.title,a=e.hotkey,s=void 0===a?"":a,l=e.iconSvg,u=void 0===l?"":l,c=this.$button;if(u){var d=f(u);Nd(d),c.append(d)}else c.text(i);Ld(c,u,i,s,t),t&&u&&c.append(f('<span class="title">'+i+"</span>")),o&&c.css("width",o+"px"),this.$elem.append(c),cc((function(){return n.init()}))}return e.prototype.init=function(){var e=this;this.setActive(),this.setDisabled(),this.$button.on("click",(function(t){t.preventDefault(),Hd(e).hidePanelOrModal(),e.disabled||(e.exec(),e.onButtonClick())}))},e.prototype.exec=function(){var e=Hd(this),t=this.menu,n=t.getValue(e);t.exec(e,n)},e.prototype.setActive=function(){var e=Hd(this),t=this.$button,n="active";this.menu.isActive(e)?t.addClass(n):t.removeClass(n)},e.prototype.setDisabled=function(){var e=Hd(this),t=this.$button,n=this.menu.isDisabled(e);(null==e.selection||e.isDisabled())&&(n=!0),this.menu.alwaysEnable&&(n=!1);var r="disabled";n?t.addClass(r):t.removeClass(r),this.disabled=n},e.prototype.changeMenuState=function(){this.setActive(),this.setDisabled()},e}(),Dd=function(e){function t(t,n){return void 0===n&&(n=!1),e.call(this,t,n)||this}return la(t,e),t.prototype.onButtonClick=function(){},t}(Pd),Rd=function(){function e(e){this.isShow=!1,this.showTime=0,this.record(e)}return e.prototype.record=function(e){var t=ys.get(e);null==t&&(t=new Set,ys.set(e,t)),t.add(this),ms.set(this,e)},e.prototype.renderContent=function(e){var t=this.$elem;t.empty(),t.append(e);var n=this.genSelfElem();n&&t.append(n)},e.prototype.appendTo=function(e){var t=this.$elem;e.append(t)},e.prototype.show=function(){if(!this.isShow){this.showTime=Date.now(),this.$elem.show(),this.isShow=!0;var e=ms.get(this);e&&e.emit("modalOrPanelShow",this)}},e.prototype.hide=function(){if(this.isShow&&!(Date.now()-this.showTime<200)){this.$elem.hide(),this.isShow=!1;var e=ms.get(this);e&&e.emit("modalOrPanelHide")}},e}(),jd=function(e){function t(t){var n=e.call(this,t)||this;return n.type="dropPanel",n.$elem=f('<div class="w-e-drop-panel"></div>'),n}return la(t,e),t.prototype.genSelfElem=function(){return null},t}(Rd),Ad=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t,n)||this;if(r.dropPanel=null,r.menu=t,t.showDropPanel){var o=Td();r.$button.append(o)}return r}return la(t,e),t.prototype.onButtonClick=function(){this.menu.showDropPanel&&this.handleDropPanel()},t.prototype.handleDropPanel=function(){var e=this.menu;if(null!=e.getPanelContentElem){var t=Hd(this);if(null==this.dropPanel){var n=new jd(t),r=e.getPanelContentElem(t);n.renderContent(r),n.appendTo(this.$elem),n.show(),this.dropPanel=n}else{var o=this.dropPanel;if(o.isShow)o.hide();else{r=e.getPanelContentElem(t);o.renderContent(r),o.show()}}var i=this.dropPanel;if(i.isShow){var a=this.$elem,s=a.offset().left,l=a.parents(".w-e-bar");s-l.offset().left>=l.width()/2?i.$elem.css({left:"none",right:"0"}):i.$elem.css({left:"0",right:"none"})}}},t}(Pd),Fd=function(e){function t(t,n){void 0===n&&(n=0);var r=e.call(this,t)||this;r.type="modal",r.$elem=f('<div class="w-e-modal"></div>'),r.width=0,n&&(r.width=n);var o=r.$elem;return o.on("click",(function(e){return e.stopPropagation()})),o.on("keyup",(function(e){"Escape"===e.code&&(r.hide(),t.restoreSelection())})),r}return la(t,e),t.prototype.genSelfElem=function(){var e=this,t=f('<span class="btn-close"><svg viewBox="0 0 1024 1024"><path d="M1024 896.1024l-128 128L512 640 128 1024 0 896 384 512 0 128 128 0 512 384 896.1024 0l128 128L640 512z"></path></svg></span>'),n=ms.get(this);return t.on("click",(function(){e.hide(),null==n||n.restoreSelection()})),t},t.prototype.setStyle=function(e){var t=this.width,n=this.$elem;n.attr("style",""),t&&n.css("width",t+"px"),n.css(e)},t}(Rd);function Id(e,t,n){var r=f('<label class="babel-container"></label>');r.append("<span>"+e+"</span>");var o=f('<input type="text" id="'+t+'" placeholder="'+(n||"")+'">');return r.append(o),[r[0],o[0]]}function _d(e,t,n){var r=f('<label class="babel-container"></label>');r.append("<span>"+e+"</span>");var o=f('<textarea type="text" id="'+t+'" placeholder="'+(n||"")+'"></textarea>');return r.append(o),[r[0],o[0]]}function Bd(e,t){var n=f('<div class="button-container"></div>'),r=f('<button type="button" id="'+e+'">'+t+"</button>");return n.append(r),[n[0],r[0]]}var $d=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t,n)||this;return r.$body=f("body"),r.modal=null,r.menu=t,r}return la(t,e),t.prototype.onButtonClick=function(){this.menu.showModal&&this.handleModal()},t.prototype.getPosition=function(){var e=Hd(this),t=this.menu.getModalPositionNode(e);return i.isElement(t)?Pf(e,t,"modal"):Lf(e)},t.prototype.handleModal=function(){var e=Hd(this),t=this.menu;if(null==this.modal){var n=new Fd(e,t.modalWidth);this.renderAndShowModal(n,!0),this.modal=n}else{(n=this.modal).isShow?n.hide():this.renderAndShowModal(n,!1)}},t.prototype.renderAndShowModal=function(e,t){void 0===t&&(t=!1);var n=Hd(this),r=this.menu;if(null!=r.getModalContentElem){var o=rl.getTextarea(n),i=rl.getToolbar(n),a=((null==i?void 0:i.getConfig())||{}).modalAppendToBody,s=r.getModalContentElem(n);if(e.renderContent(s),a)e.setStyle({left:"0",right:"0"});else{var l=this.getPosition();e.setStyle(l)}t&&(a?e.appendTo(this.$body):e.appendTo(o.$textAreaContainer)),e.show(),a||Df(n,e.$elem),setTimeout((function(){n.blur()}))}},t}(Pd);var Wd=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="selectList",r.$elem=f('<div class="w-e-select-list"></div>'),n&&r.$elem.css("width",n+"px"),r.$elem.on("click",(function(e){e.stopPropagation()})),r}return la(t,e),t.prototype.renderList=function(e){var t=this.$elem;t.empty();var n=f("<ul></ul>");e.forEach((function(e){var t=e.value,r=e.text,o=e.selected,i=e.styleForRenderMenuList,a=f('<li data-value="'+t+'"></li>');if(i&&a.css(i),o){var s=f('<svg viewBox="0 0 1446 1024"><path d="M574.116299 786.736392 1238.811249 48.517862C1272.390222 11.224635 1329.414799 7.827718 1366.75664 41.450462 1403.840015 74.840484 1406.731043 132.084741 1373.10189 169.433699L655.118888 966.834607C653.072421 969.716875 650.835807 972.514337 648.407938 975.210759 615.017957 1012.29409 558.292155 1015.652019 521.195664 982.250188L72.778218 578.493306C35.910826 545.297758 32.859041 488.584019 66.481825 451.242134 99.871807 414.158803 156.597563 410.800834 193.694055 444.202665L574.116299 786.736392Z"></path></svg>');a.append(s),a.addClass("selected")}a.append(f('<span data-value="'+t+'">'+r+"</span>")),a.attr("title",r),n.append(a)})),t.append(n)},t.prototype.genSelfElem=function(){return null},t}(Rd);var Vd=function(){function e(e,t){var n=this;void 0===t&&(t=!1),this.$elem=f('<div class="w-e-bar-item"></div>'),this.$button=f('<button type="button" class="select-button"></button>'),this.disabled=!1,this.selectList=null;var r=e.tag,o=e.title,i=e.width,a=e.iconSvg,s=void 0===a?"":a,l=e.hotkey,u=void 0===l?"":l;if("select"!==r)throw new Error("Invalid tag '"+r+"', expected 'select'");var c=this.$button;i&&c.css("width",i+"px"),Ld(c,s,o,u,t),this.$elem.append(c),this.menu=e,cc((function(){return n.init()}))}return e.prototype.init=function(){var e=this;this.setSelectedValue(),this.$button.on("click",(function(t){t.preventDefault(),Hd(e).hidePanelOrModal(),e.trigger()}))},e.prototype.trigger=function(){var e=this,t=Hd(this);if(!t.isDisabled()&&!this.disabled){var n=this.menu;if(null==this.selectList){this.selectList=new Wd(t,n.selectPanelWidth);var r=this.selectList,o=n.getOptions(t);r.renderList(o),r.appendTo(this.$elem),r.show(),r.$elem.on("click","li",(function(t){var n=t.target;if(null!=n){t.preventDefault();var r=f(n).attr("data-value");e.onChange(r)}}))}else{if((r=this.selectList).isShow)r.hide();else{o=n.getOptions(t);r.renderList(o),r.show()}}}},e.prototype.onChange=function(e){var t=Hd(this),n=this.menu;n.exec&&n.exec(t,e)},e.prototype.setSelectedValue=function(){var e=Hd(this),t=this.menu,n=t.getValue(e),r=function(e,t){for(var n=e.length,r="",o=0;o<n;o++){var i=e[o];if(i.value===t){r=i.text;break}}return r}(t.getOptions(e),n.toString()),o=this.$button,i=Td();o.empty(),o.text(r),o.append(i)},e.prototype.setDisabled=function(){var e=Hd(this),t=this.menu.isDisabled(e),n=this.$button;(null==e.selection||e.isDisabled())&&(t=!0);var r="disabled";t?n.addClass(r):n.removeClass(r),this.disabled=t},e.prototype.changeMenuState=function(){this.setSelectedValue(),this.setDisabled()},e}(),zd=function(){function e(e){this.$elem=f('<div class="w-e-bar-item w-e-bar-item-group"></div>'),this.$container=f('<div class="w-e-bar-item-menus-container"></div>'),this.$button=f('<button type="button"></button>');var t=e.iconSvg,n=e.title,r=this.$elem,o=this.$button;if(t){var i=f(t);Nd(i),o.append(i)}else o.text(n);var a=Td();o.append(a),r.append(o);var s=this.$container;r.append(s);var l=this.createObserver();this.observe(l)}return e.prototype.appendBarItem=function(e){var t=e.$elem;this.$container.append(t)},e.prototype.observe=function(e){var t=this.$container;e.observe(t[0],{childList:!0,subtree:!0,attributes:!0})},e.prototype.createObserver=function(){var e=this,t=this.$container,n=this.$button,r=new MutationObserver((function(){var o=t.find("button"),i=o.length;if(0!==i){var a=0;o.each((function(e){f(e).hasClass("disabled")&&a++})),r.disconnect(),a===i?n.addClass("disabled"):n.removeClass("disabled"),e.observe(r)}}));return r},e}(),Ud=new WeakMap;function Hd(e){var t=vs.get(e);if(null==t)throw new Error("Can not get editor instance");return t}function Kd(e,t){void 0===t&&(t=!1);var n=Ud.get(e);if(n)return n;var r=e.tag;if("button"===r){var o=e.showDropPanel,i=e.showModal;n=o?new Ad(e,t):i?new $d(e,t):new Dd(e,t)}if("select"===r&&(n=new Vd(e,t)),null==n)throw new Error("Invalid tag in menu "+JSON.stringify(e));return Ud.set(e,n),n}function qd(e,t){var n=e.selection;return null!=n&&(!o.isCollapsed(n)&&(!rl.getSelectedElems(e).some((function(t){if(e.isVoid(t))return!0;var n=t.type;return!!["pre","code","table"].includes(n)||void 0}))&&!!a.isText(t)))}var Gd=function(){function t(){var e=this;this.$elem=f('<div class="w-e-bar w-e-bar-hidden w-e-hover-bar"></div>'),this.menus={},this.hoverbarItems=[],this.prevSelectedNode=null,this.isShow=!1,this.changeHoverbarState=X((function(){var t=e.isShow,n=e.getSelectedNodeAndMenuKeys()||{},r=n.node,o=void 0===r?null:r,a=n.menuKeys,s=void 0===a?[]:a;if((null!=o&&e.changeItemsState(),o&&i.isElement(o))&&(t&&e.isSamePath(o,e.prevSelectedNode)))return;e.hideAndClean(),null!=o&&(e.registerItems(s),e.setPosition(o),e.show()),e.prevSelectedNode=o}),200),cc((function(){var t=e.getEditorInstance(),n=e.$elem;n.on("mousedown",(function(e){return e.preventDefault()})),rl.getTextarea(t).$textAreaContainer.append(n),t.on("change",e.changeHoverbarState);var r=e.hideAndClean.bind(e);t.on("scroll",r),t.on("fullScreen",r),t.on("unFullScreen",r)}))}return t.prototype.getMenus=function(){return this.menus},t.prototype.hideAndClean=function(){var e=this.$elem;e.removeClass("w-e-bar-show").addClass("w-e-bar-hidden"),this.hoverbarItems=[],e.empty(),this.isShow=!1},t.prototype.checkPositionBottom=function(){var e=this.$elem,t=!1,n=window.innerHeight;n&&n>=360&&(n-e[0].getBoundingClientRect().bottom<360&&(t=!0));t?e.addClass("w-e-bar-bottom"):e.removeClass("w-e-bar-bottom")},t.prototype.show=function(){this.$elem.removeClass("w-e-bar-hidden").addClass("w-e-bar-show"),this.isShow=!0,this.checkPositionBottom()},t.prototype.changeItemsState=function(){var e=this;cc((function(){e.hoverbarItems.forEach((function(e){e.changeMenuState()}))}))},t.prototype.registerItems=function(e){var t=this,n=this.$elem;e.forEach((function(e){if("|"!==e)t.registerSingleItem(e);else{var r=Md();n.append(r)}}))},t.prototype.registerSingleItem=function(e){var t=this.getEditorInstance(),n=this.menus,r=n[e];if(null==r){var o=al[e];if(null==o)throw new Error("Not found menu item factory by key '"+e+"'");if("function"!=typeof o)throw new Error("Menu item factory (key='"+e+"') is not a function");r=o(),n[e]=r}var i=Kd(r);this.hoverbarItems.push(i),vs.set(i,t),this.$elem.append(i.$elem)},t.prototype.setPosition=function(e){var t=this.getEditorInstance(),n=this.$elem;if(n.attr("style",""),i.isElement(e)){var r=Pf(t,e,"bar");return n.css(r),void Df(t,n)}if(a.isText(e)){r=Lf(t);return n.css(r),void Df(t,n)}throw new Error("hoverbar.setPosition error, current selected node is not elem nor text")},t.prototype.getSelectedNodeAndMenuKeys=function(){var t=this.getEditorInstance();if(null==t.selection)return null;var n=this.getHoverbarKeysConf(),r=null,o=[],i=function(i){var a=n[i],s=a.match,l=a.menuKeys,u=void 0===l?[]:l,c=s||function(e,t){return rl.checkNodeType(t,i)},f=fa(e.nodes(t,{match:function(e){return c(t,e)},universal:!0}),1),d=f[0];if(null!=d)return r=d[0],o=u,"break"};for(var a in n){if("break"===i(a))break}return null==r||0===o.length?null:{node:r,menuKeys:o}},t.prototype.getEditorInstance=function(){var e=ps.get(this);if(null==e)throw new Error("Can not get editor instance");return e},t.prototype.getHoverbarKeysConf=function(){var e=this.getEditorInstance().getConfig().hoverbarKeys,t=void 0===e?{}:e,n=t.text;return n&&null==n.match&&(n.match=qd),t},t.prototype.isSamePath=function(e,t){if(null==e||null==t)return!1;var r=rl.findPath(null,e),o=rl.findPath(null,t);return n.equals(r,o)},t.prototype.destroy=function(){this.changeHoverbarState.cancel(),this.$elem.remove(),this.menus={},this.hoverbarItems=[],this.prevSelectedNode=null},t}();function Jd(e,t,n){var r=f(n);return!!r.attr(t)||(r.attr(t,"true"),e.on("destroyed",(function(){r.removeAttr(t)})),!1)}function Yd(t,n,o,a){if(ks.set(t,n),Es.set(t,o),i.isElement(t)){var s=t.children;if((void 0===s?[]:s).forEach((function(e,n){return Yd(e,n,t,a)})),e.isVoid(a,t)){var l=fa(r.texts(t),1),u=fa(l[0],1)[0];ks.set(u,0),Es.set(u,t)}}}function Xd(n){var i=n.selector,a=void 0===i?"":i,c=n.config,d=void 0===c?{}:c,h=n.content,p=n.html,g=n.plugins,v=void 0===g?[]:g,y=(n=>{var r=n,{apply:o}=r;return r.history={undos:[],redos:[]},r.redo=()=>{var{history:t}=r,{redos:n}=t;if(n.length>0){var o=n[n.length-1];Po.withoutSaving(r,(()=>{e.withoutNormalizing(r,(()=>{for(var e of o)r.apply(e)}))})),t.redos.pop(),t.undos.push(o)}},r.undo=()=>{var{history:n}=r,{undos:o}=n;if(o.length>0){var i=o[o.length-1];Po.withoutSaving(r,(()=>{e.withoutNormalizing(r,(()=>{var e=i.map(t.inverse).reverse();for(var n of e)r.apply(n)}))})),n.redos.push(i),n.undos.pop()}},r.apply=e=>{var{operations:t,history:n}=r,{undos:i}=n,a=i[i.length-1],s=a&&a[a.length-1],l=jo(e,s),u=Po.isSaving(r),c=Po.isMerging(r);if(null==u&&(u=Ro(e)),u){if(null==c&&(c=null!=a&&(0!==t.length||Do(e,s)||l)),a&&c)l&&a.pop(),a.push(e);else{var f=[e];i.push(f)}for(;i.length>100;)i.shift();Ao(e)&&(n.redos=[])}o(e)},r})(function(e){var t=e,n=t.insertText,o=t.insertNode,i=t.insertFragment;return t.insertText=function(e){if(t.getConfig().maxLength){var r=rl.getLeftLengthOfMaxLength(t);r<=0||(r<e.length?n(e.slice(0,r)):n(e))}else n(e)},t.insertNode=function(e){if(t.getConfig().maxLength){var n=rl.getLeftLengthOfMaxLength(t);n<=0||n<r.string(e).length||o(e)}else o(e)},t.insertFragment=function(e){t.getConfig().maxLength?e.forEach((function(e){t.insertNode(e)})):i(e)},t}(function(e){var t=e;return t.on=function(e,n){var r=Ef(t);if(r.on(e,n),"destroyed"===e&&Cf(t,n),"destroyed"!==e){var o=function(){return r.off(e,n)};r.on("destroyed",o),Cf(t,o)}},t.once=function(e,n){Ef(t).once(e,n)},t.off=function(e,n){Ef(t).off(e,n)},t.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=Ef(t);(o.emit.apply(o,da([e],fa(n))),"destroyed"===e)&&(Nf(t).forEach((function(e){return o.off("destroyed",e)})),Tf(t))},t}(function(t){var n=t;return n.select=function(e){s.select(n,e)},n.deselect=function(){var e=n.selection,r=rl.findDocumentOrShadowRoot(n).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),e&&s.deselect(t)},n.move=function(e,n){void 0===n&&(n=!1),e&&(e<0||s.move(t,{distance:e,unit:"character",reverse:n}))},n.moveReverse=function(e){n.move(e,!0)},n.restoreSelection=function(){var e=Ds.get(n);null!=e&&(n.focus(),s.select(n,e))},n.getSelectionPosition=function(){return Lf(n)},n.getNodePosition=function(e){return Pf(n,e)},n.isSelectedAll=function(){var t=n.selection;if(null==t)return!1;var r=fa(o.edges(t),2),i=r[0],a=r[1],s=fa(e.edges(n,[]),2),u=s[0],c=s[1];return!(!l.equals(i,u)||!l.equals(a,c))},n.selectAll=function(){var t=e.start(n,[]),r=e.end(n,[]);s.select(n,{anchor:t,focus:r})},n}(ef(function(e){var t=e;return t.getAllMenuKeys=function(){var e=[];for(var t in al)e.push(t);return e},t.getConfig=function(){var e=bs.get(t);if(null==e)throw new Error("Can not get editor config");return e},t.getMenuConfig=function(e){var n=t.getConfig().MENU_CONF;return(void 0===n?{}:n)[e]||{}},t.alert=function(e,n){void 0===n&&(n="info");var r=t.getConfig().customAlert;r&&r(e,n)},t}(function(t){var n=t;return n.id="wangEditor-"+ol++,n.isDestroyed=!1,n.isFullScreen=!1,n.focus=function(t){var r=rl.toDOMNode(n,n),o=rl.findDocumentOrShadowRoot(n);if(Ps.set(n,!0),t){var i=e.end(n,[]);s.select(n,i)}o.activeElement!==r&&r.focus({preventScroll:!0})},n.isFocused=function(){return!!Ps.get(n)},n.blur=function(){var e=rl.toDOMNode(n,n),t=rl.findDocumentOrShadowRoot(n);Ps.set(n,!1),t.activeElement===e&&(e.blur(),s.deselect(n))},n.updateView=function(){rl.getTextarea(n).changeViewState();var e=rl.getToolbar(n);e&&e.changeToolbarState();var t=rl.getHoverbar(n);t&&t.changeHoverbarState()},n.destroy=function(){if(!n.isDestroyed){var e=rl.getTextarea(n);e.destroy(),cs.delete(n),fs.delete(e);var t=rl.getToolbar(n);t&&(t.destroy(),hs.delete(n),ds.delete(t));var r=rl.getHoverbar(n);r&&(r.destroy(),gs.delete(n),ps.delete(r)),n.isDestroyed=!0,n.emit("destroyed")}},n.scrollToElem=function(e){if(!n.getConfig().scroll){var t="编辑器禁用了 scroll ，编辑器内容无法滚动，请自行实现该功能";return t+="\nYou has disabled editor scroll, please do this yourself",void console.warn(t)}var r=f("#"+e);if(0!==r.length){var o=r[0];if(!rl.hasDOMNode(n,o))return t="Element (found by id is '"+e+"') is not in editor DOM",t+="\n 通过 id '"+e+"' 找到的 element 不在 editor DOM 之内",void console.error(t,o);var i=rl.getTextarea(n),a=i.$textAreaContainer,s=i.$scroll,l=r.offset().top,u=a.offset().top;s[0].scrollBy({top:l-u,behavior:"smooth"})}},n.showProgressBar=function(e){e<1||rl.getTextarea(n).changeProgress(e)},n.hidePanelOrModal=function(){var e=ys.get(n);null!=e&&e.forEach((function(e){return e.hide()}))},n.enable=function(){n.getConfig().readOnly=!1,n.updateView()},n.disable=function(){n.getConfig().readOnly=!0,n.updateView()},n.isDisabled=function(){return n.getConfig().readOnly},n.toDOMNode=function(e){return rl.toDOMNode(n,e)},n.fullScreen=function(){if(!n.isFullScreen){var e=null,t=rl.getToolbar(n);t&&(e=t.$box);var r=rl.getTextarea(n).$box.parent();if(e&&e.parent()[0]!==r[0])throw new Error("Can not set full screen, cause toolbar DOM parent is not equal to textarea DOM parent\n不能设置全屏，因为 toolbar DOM 父节点和 textarea DOM 父节点不一致");r.addClass("w-e-full-screen-container");var o=r.css("z-index");r.attr("data-z-index",o.toString()),n.isFullScreen=!0,n.emit("fullScreen")}},n.unFullScreen=function(){if(n.isFullScreen){var e=rl.getTextarea(n).$box.parent();setTimeout((function(){e.removeClass("w-e-full-screen-container"),n.isFullScreen=!1,n.emit("unFullScreen")}),200)}},n.getEditableContainer=function(){return rl.getTextarea(n).$textAreaContainer[0]},n}(function(t){var n=t,r=n.insertText;return n.insertFragment,n.setFragmentData=function(t){var r=n.selection;if(r){var i=fa(o.edges(r),2),a=i[0],s=i[1],l=e.void(n,{at:a.path}),u=e.void(n,{at:s.path});if(!o.isCollapsed(r)||l){var c=rl.toDOMRange(n,r),f=c.cloneContents(),d=f.childNodes[0];if(f.childNodes.forEach((function(e){e.textContent&&""!==e.textContent.trim()&&(d=e)})),u){var h=fa(u,1)[0],p=c.cloneRange(),g=rl.toDOMNode(n,h);p.setEndAfter(g),f=p.cloneContents()}if(l&&(d=f.querySelector("[data-slate-spacer]")),Array.from(f.querySelectorAll("[data-slate-zero-width]")).forEach((function(e){var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),zs(d)){var v=d.ownerDocument.createElement("span");v.style.whiteSpace="pre",v.appendChild(d),f.appendChild(v),d=v}var y=n.getFragment(),m=JSON.stringify(y),b=window.btoa(encodeURIComponent(m));d.setAttribute("data-slate-fragment",b),t.setData("application/x-slate-fragment",b);var w=f.ownerDocument.createElement("div");return w.appendChild(f),w.setAttribute("hidden","true"),f.ownerDocument.body.appendChild(w),t.setData("text/html",w.innerHTML),t.setData("text/plain",qs(w)),f.ownerDocument.body.removeChild(w),t}}},n.insertData=function(e){var t,o,i=e.getData("application/x-slate-fragment");if(i){var a=decodeURIComponent(window.atob(i)),l=JSON.parse(a);n.insertFragment(l)}else{var u=e.getData("text/plain"),c=e.getData("text/html");if(c)n.dangerouslyInsertHtml(c);else if(u){var f=u.split(/\r\n|\r|\n/),d=!1;try{for(var h=ca(f),p=h.next();!p.done;p=h.next()){var g=p.value;d&&s.splitNodes(n,{always:!0}),r(g),d=!0}}catch(e){t={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(t)throw t.error}}}}},n}(u()))))))));if(a&&function(e,t){return Jd(e,"data-w-e-textarea",t)}(y,a))throw new Error("Repeated create editor by selector '"+a+"'");var m=function(e){void 0===e&&(e={});var t=Q(il),n={},r=e.MENU_CONF,o=void 0===r?{}:r;return _(t,(function(e,t){n[t]=ua(ua({},e),o[t]||{})})),delete e.MENU_CONF,ua({scroll:!0,readOnly:!1,autoFocus:!0,decorate:function(){return[]},maxLength:0,MENU_CONF:n,hoverbarKeys:{},customAlert:function(e,t){window.alert(t+":\n"+e)}},e)}(d);bs.set(y,m);var b=m.hoverbarKeys,w=void 0===b?{}:b;if(v.forEach((function(e){y=e(y)})),p){var x=f("<div>"+p+"</div>");y.children=Array.from(x.children()).map((function(e){return Qc(f(e),y)}))}if(h&&h.length&&(y.children=h),0===y.children.length&&(y.children=[{type:"paragraph",children:[{text:""}]}]),rl.normalizeContent(y),a){var S=new Cd(a);cs.set(y,S),fs.set(S,y),S.changeViewState(),cc((function(){var e=S.$scroll;if(null!=e&&e.height()<300){"\nTextarea height < 300px . This may be cause modal and hoverbar position error",console.warn("编辑区域高度 < 300px 这可能会导致 modal hoverbar 定位异常\nTextarea height < 300px . This may be cause modal and hoverbar position error",e)}}));var k=void 0;Object.keys(w).length>0&&(k=new Gd,ps.set(k,y),gs.set(y,k)),y.on("change",(function(){y.hidePanelOrModal()})),y.on("scroll",(function(){y.hidePanelOrModal()}))}else y.children.forEach((function(e,t){return Yd(e,t,y,y)}));var E=m.onCreated,O=m.onDestroyed;return E&&y.on("created",(function(){return E(y)})),O&&y.on("destroyed",(function(){return O(y)})),cc((function(){return y.emit("created")})),y}var Qd=fr("splice"),Zd=ae.TypeError,eh=Math.max,th=Math.min;ur({target:"Array",proto:!0,forced:!Qd},{splice:function(e,t){var n,r,o,i,a,s,l=be(this),u=dn(l),c=Vn(e,u),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=u-c):(n=f-2,r=th(eh(un(t),0),u-c)),u+n-r>9007199254740991)throw Zd("Maximum allowed length exceeded");for(o=En(l,r),i=0;i<r;i++)(a=c+i)in l&&wr(o,i,l[a]);if(o.length=r,n<r){for(i=c;i<u-r;i++)s=i+n,(a=i+r)in l?l[s]=l[a]:delete l[s];for(i=u;i>u-r+n;i--)delete l[i-1]}else if(n>r)for(i=u-r;i>c;i--)s=i+n-1,(a=i+r-1)in l?l[s]=l[a]:delete l[s];for(i=0;i<n;i++)l[i+c]=arguments[i+2];return l.length=u-r+n,o}});var nh=function(){function e(e,t){var n=this;this.$toolbar=f('<div class="w-e-bar w-e-bar-show w-e-toolbar"></div>'),this.menus={},this.toolbarItems=[],this.config={},this.changeToolbarState=X((function(){n.toolbarItems.forEach((function(e){e.changeMenuState()}))}),200),this.config=t;var r=f(e);if(0===r.length)throw new Error("Cannot find toolbar DOM by selector '"+e+"'");this.$box=r;var o=this.$toolbar;o.on("mousedown",(function(e){return e.preventDefault()})),r.append(o),cc((function(){n.registerItems(),n.changeToolbarState(),n.getEditorInstance().on("change",n.changeToolbarState)}))}return e.prototype.getMenus=function(){return this.menus},e.prototype.getConfig=function(){return this.config},e.prototype.registerItems=function(){var e=this,t="",n=this.$toolbar,r=this.config,o=r.toolbarKeys,i=void 0===o?[]:o,a=r.insertKeys,s=void 0===a?{index:0,keys:[]}:a,l=r.excludeKeys,u=void 0===l?[]:l,c=Q(i);s.keys.length>0&&("string"==typeof s.keys&&(s.keys=[s.keys]),s.keys.forEach((function(e,t){c.splice(s.index+t,0,e)})));var f=c.filter((function(e){if("string"==typeof e){if(u.includes(e))return!1}else if(u.includes(e.key))return!1;return!0})),d=f.length;f.forEach((function(r,o){if("|"===r){if(0===o)return;if(o+1===d)return;if("|"===t)return;var i=Md();return n.append(i),void(t=r)}if("string"==typeof r)return e.registerSingleItem(r,e),void(t=r);e.registerGroup(r),t="group"}))},e.prototype.registerGroup=function(e){var t=this,n=this.$toolbar,r=function(e){return new zd(e)}(e),o=e.menuKeys,i=void 0===o?[]:o,a=this.config.excludeKeys,s=void 0===a?[]:a;i.forEach((function(e){s.includes(e)||t.registerSingleItem(e,r)})),n.append(r.$elem)},e.prototype.registerSingleItem=function(e,t){var n=this.getEditorInstance(),r=t instanceof zd,o=this.menus,i=o[e];if(null==i){var a=al[e];if(null==a)throw new Error("Not found menu item factory by key '"+e+"'");if("function"!=typeof a)throw new Error("Menu item factory (key='"+e+"') is not a function");i=a(),o[e]=i}else console.warn("Duplicated toolbar menu key '"+e+"'\n重复注册了菜单栏 menu '"+e+"'");var s=Kd(i,r);(this.toolbarItems.push(s),vs.set(s,n),r)?t.appendBarItem(s):t.$toolbar.append(s.$elem)},e.prototype.getEditorInstance=function(){var e=ds.get(this);if(null==e)throw new Error("Can not get editor instance");return e},e.prototype.destroy=function(){this.$toolbar.remove(),this.menus={},this.toolbarItems=[]},e}();function rh(e,t){if(null==e)throw new Error("Cannot create toolbar, because editor is null");var n=t.selector,r=t.config,o=void 0===r?{}:r;if(function(e,t){return Jd(e,"data-w-e-toolbar",t)}(e,n))throw new Error("Repeated create toolbar by selector '"+n+"'");var i=ua({toolbarKeys:[],excludeKeys:[],insertKeys:{index:0,keys:[]},modalAppendToBody:!1},o||{}),a=new nh(n,i);return ds.set(a,e),hs.set(e,a),a}var oh=Wt.EXISTS,ih=yt.f,ah=Function.prototype,sh=ge(ah.toString),lh=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,uh=ge(lh.exec);function ch(e){var t=e.server,n=void 0===t?"":t,r=e.fieldName,o=void 0===r?"":r,i=e.maxFileSize,a=void 0===i?10485760:i,s=e.maxNumberOfFiles,l=void 0===s?100:s,u=e.meta,c=void 0===u?{}:u,f=e.metaWithUrl,d=void 0!==f&&f,h=e.headers,p=void 0===h?{}:h,g=e.withCredentials,v=void 0!==g&&g,y=e.timeout,m=void 0===y?1e4:y,b=e.onBeforeUpload,w=void 0===b?function(e){return e}:b,x=e.onSuccess,S=void 0===x?function(e,t){}:x,k=e.onError,E=void 0===k?function(e,t,n){console.error(e.name+" upload error",t,n)}:k,O=e.onProgress,C=void 0===O?function(e){}:O;if(!n)throw new Error("Cannot get upload server address\n没有配置上传地址");if(!o)throw new Error("Cannot get fieldName\n没有配置 fieldName");var N=n;d&&(N=function(e,t){var n=fa(e.split("#"),2),r=n[0],o=n[1],i=[];_(t,(function(e,t){i.push(t+"="+e)}));var a=i.join("&");return r=r.indexOf("?")>0?r+"&"+a:r+"?"+a,o?r+"#"+o:r}(N,c));var T=new Z({onBeforeUpload:w,restrictions:{maxFileSize:a,maxNumberOfFiles:l},meta:c}).use(ee,{endpoint:N,headers:p,formData:!0,fieldName:o,bundle:!0,withCredentials:v,timeout:m});return T.on("upload-success",(function(e,t){var n=t.body;S(e,void 0===n?{}:n),T.removeFile(e.id)})),T.on("progress",(function(e){e<1||C(e)})),T.on("error",(function(e){console.error("wangEditor file upload error",e.stack)})),T.on("upload-error",(function(e,t,n){E(e,t,n),T.removeFile(e.id)})),T.on("restriction-failed",(function(e,t){E(e,t),T.removeFile(e.id)})),T}function fh(e){return fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(e)}function dh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach((function(t){dh(e,t,n[t])}))}return e}function ph(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vh(e,t,n){return t&&gh(e.prototype,t),n&&gh(e,n),e}function yh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mh(e,t){if(t&&("object"===fh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yh(e)}function bh(e){return bh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bh(e)}function wh(e,t){return wh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},wh(e,t)}function xh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wh(e,t)}He&&!oh&&ih(ah,"name",{configurable:!0,get:function(){try{return uh(lh,sh(this))[1]}catch(e){return""}}});var Sh={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},kh=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ph(this,e),this.init(t,n)}return vh(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Sh,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,hh({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),Eh=function(){function e(){ph(this,e),this.observers={}}return vh(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var o=[].concat(this.observers[e]);o.forEach((function(e){e.apply(void 0,n)}))}if(this.observers["*"]){var i=[].concat(this.observers["*"]);i.forEach((function(t){t.apply(t,[e].concat(n))}))}}}]),e}();function Oh(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function Ch(e){return null==e?"":""+e}function Nh(e,t,n){e.forEach((function(e){t[e]&&(n[e]=t[e])}))}function Th(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(o())return{};var a=r(i.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return o()?{}:{obj:e,k:r(i.shift())}}function Mh(e,t,n){var r=Th(e,t,Object);r.obj[r.k]=n}function Lh(e,t){var n=Th(e,t),r=n.obj,o=n.k;if(r)return r[o]}function Ph(e,t,n){var r=Lh(e,n);return void 0!==r?r:Lh(t,n)}function Dh(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):Dh(e[r],t[r],n):e[r]=t[r]);return e}function Rh(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var jh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Ah(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return jh[e]})):e}var Fh="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1;function Ih(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),o=e,i=0;i<r.length;++i){if(!o)return;if("string"==typeof o[r[i]]&&i+1<r.length)return;if(void 0===o[r[i]]){for(var a=2,s=r.slice(i,i+a).join(n),l=o[s];void 0===l&&r.length>i+a;)a++,l=o[s=r.slice(i,i+a).join(n)];if(void 0===l)return;if("string"==typeof l)return l;if(s&&"string"==typeof l[s])return l[s];var u=r.slice(i+a).join(n);return u?Ih(l,u,n):void 0}o=o[r[i]]}return o}}var _h=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return ph(this,t),n=mh(this,bh(t).call(this)),Fh&&Eh.call(yh(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),void 0===n.options.ignoreJSONStructure&&(n.options.ignoreJSONStructure=!0),n}return xh(t,Eh),vh(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[e,t];n&&"string"!=typeof n&&(a=a.concat(n)),n&&"string"==typeof n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(a=e.split("."));var s=Lh(this.data,a);return s||!i||"string"!=typeof n?s:Ih(this.data&&this.data[e]&&this.data[e][t],n,o)}},{key:"addResource",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[e,t];n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),Mh(this.data,a,r),o.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"!=typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=Lh(this.data,a)||{};r?Dh(s,n,o):s=hh({},s,n),Mh(this.data,a,s),i.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?hh({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(),Bh={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var i=this;return e.forEach((function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,o))})),t}},$h={},Wh=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ph(this,t),n=mh(this,bh(t).call(this)),Fh&&Eh.call(yh(n)),Nh(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,yh(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=kh.create("translator"),n}return xh(t,Eh),vh(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var i=e.match(this.interpolator.nestingRegexp);if(i&&i.length>0)return{key:e,namespaces:o};var a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(o=a.shift()),e=a.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(e,n,r){var o=this;if("object"!==fh(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var i=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(e[e.length-1],n),s=a.key,l=a.namespaces,u=l[l.length-1],c=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(f){var d=n.nsSeparator||this.options.nsSeparator;return u+d+s}return s}var h=this.resolve(e,n),p=h&&h.res,g=h&&h.usedKey||s,v=h&&h.exactUsedKey||s,y=Object.prototype.toString.apply(p),m=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject,x="string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p;if(w&&p&&x&&m.indexOf(y)<0&&("string"!=typeof b||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,p,hh({},n,{ns:l})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(i){var S="[object Array]"===y,k=S?[]:{},E=S?v:g;for(var O in p)if(Object.prototype.hasOwnProperty.call(p,O)){var C="".concat(E).concat(i).concat(O);k[O]=this.translate(C,hh({},n,{joinArrays:!1,ns:l})),k[O]===C&&(k[O]=p[O])}p=k}}else if(w&&"string"==typeof b&&"[object Array]"===y)(p=p.join(b))&&(p=this.extendTranslation(p,e,n,r));else{var N=!1,T=!1,M=void 0!==n.count&&"string"!=typeof n.count,L=t.hasDefaultValue(n),P=M?this.pluralResolver.getSuffix(c,n.count):"",D=n["defaultValue".concat(P)]||n.defaultValue;!this.isValidLookup(p)&&L&&(N=!0,p=D),this.isValidLookup(p)||(T=!0,p=s);var R=n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,j=R&&T?void 0:p,A=L&&D!==p&&this.options.updateMissing;if(T||N||A){if(this.logger.log(A?"updateKey":"missingKey",c,u,s,A?D:p),i){var F=this.resolve(s,hh({},n,{keySeparator:!1}));F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var I=[],_=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&_&&_[0])for(var B=0;B<_.length;B++)I.push(_[B]);else"all"===this.options.saveMissingTo?I=this.languageUtils.toResolveHierarchy(n.lng||this.language):I.push(n.lng||this.language);var $=function(e,t,r){o.options.missingKeyHandler?o.options.missingKeyHandler(e,u,t,A?r:j,A,n):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(e,u,t,A?r:j,A,n),o.emit("missingKey",e,u,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?I.forEach((function(e){o.pluralResolver.getSuffixes(e).forEach((function(t){$([e],s+t,n["defaultValue".concat(t)]||D)}))})):$(I,s,D))}p=this.extendTranslation(p,e,n,h,r),T&&p===s&&this.options.appendNamespaceToMissingKey&&(p="".concat(u,":").concat(s)),(T||N)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(e,t,n,r,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(hh({},n,{interpolation:hh({},this.options.interpolation,n.interpolation)}));var a,s=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(s){var l=e.match(this.interpolator.nestingRegexp);a=l&&l.length}var u=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(u=hh({},this.options.interpolation.defaultVariables,u)),e=this.interpolator.interpolate(e,u,n.lng||this.language,n),s){var c=e.match(this.interpolator.nestingRegexp);a<(c&&c.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o&&o[0]===r[0]&&!n.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):i.translate.apply(i,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var f=n.postProcess||this.options.postProcess,d="string"==typeof f?[f]:f;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=Bh.handle(d,e,t,this.options&&this.options.postProcessPassResolved?hh({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,o,i,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var l=a.extractFromKey(e,s),u=l.key;n=u;var c=l.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,d=void 0!==s.context&&("string"==typeof s.context||"number"==typeof s.context)&&""!==s.context,h=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach((function(e){a.isValidLookup(t)||(i=e,!$h["".concat(h[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(i)&&($h["".concat(h[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(h.join(", "),'" won\'t get resolved as namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach((function(n){if(!a.isValidLookup(t)){o=n;var i,l,c=u,h=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(h,u,n,e,s);else f&&(i=a.pluralResolver.getSuffix(n,s.count)),f&&d&&h.push(c+i),d&&h.push(c+="".concat(a.options.contextSeparator).concat(s.context)),f&&h.push(c+=i);for(;l=h.pop();)a.isValidLookup(t)||(r=l,t=a.getResource(n,e,l,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:i}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&void 0!==e[n])return!0;return!1}}]),t}();function Vh(e){return e.charAt(0).toUpperCase()+e.slice(1)}var zh=function(){function e(t){ph(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=kh.create("languageUtils")}return vh(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Vh(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=Vh(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=Vh(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],i=function(e){e&&(n.isSupportedCode(e)?o.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),r.forEach((function(e){o.indexOf(e)<0&&i(n.formatLanguageCode(e))})),o}}]),e}(),Uh=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Hh={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}};function Kh(){var e={};return Uh.forEach((function(t){t.lngs.forEach((function(n){e[n]={numbers:t.nr,plurals:Hh[t.fc]}}))})),e}var qh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ph(this,e),this.languageUtils=t,this.options=n,this.logger=kh.create("pluralResolver"),this.rules=Kh()}return vh(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var o=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),i=r.numbers[o];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),Gh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ph(this,e),this.logger=kh.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return vh(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:Ah,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?Rh(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Rh(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Rh(t.nestingPrefix):t.nestingPrefixEscaped||Rh("$t("),this.nestingSuffix=t.nestingSuffix?Rh(t.nestingSuffix):t.nestingSuffixEscaped||Rh(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var o,i,a,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(e){return e.replace(/\$/g,"$$$$")}var c=function(e){if(e.indexOf(s.formatSeparator)<0){var o=Ph(t,l,e);return s.alwaysFormat?s.format(o,void 0,n,hh({},r,t,{interpolationkey:e})):o}var i=e.split(s.formatSeparator),a=i.shift().trim(),u=i.join(s.formatSeparator).trim();return s.format(Ph(t,l,a),u,n,hh({},r,t,{interpolationkey:a}))};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,h=[{regex:this.regexpUnescape,safeValue:function(e){return u(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?u(s.escape(e)):u(e)}}];return h.forEach((function(t){for(a=0;o=t.regex.exec(e);){if(void 0===(i=c(o[1].trim())))if("function"==typeof f){var n=f(e,o,r);i="string"==typeof n?n:""}else{if(d){i=o[0];continue}s.logger.warn("missed to pass in variable ".concat(o[1]," for interpolating ").concat(e)),i=""}else"string"==typeof i||s.useRawValueToEscape||(i=Ch(i));var l=t.safeValue(i);if(e=e.replace(o[0],l),d?(t.regex.lastIndex+=l.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=hh({},i);function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0],o=(o=this.interpolate(o,a)).replace(/'/g,'"');try{a=JSON.parse(o),t&&(a=hh({},t,a))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete a.defaultValue,e}for(a.applyPostProcessor=!1,delete a.defaultValue;n=this.nestingRegexp.exec(e);){var l=[],u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var c=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=c.shift(),l=c,u=!0}if((r=t(s.call(this,n[1].trim(),a),a))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=Ch(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),u&&(r=l.reduce((function(e,t){return o.format(e,t,i.lng,hh({},i,{interpolationkey:n[1].trim()}))}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();var Jh=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ph(this,t),o=mh(this,bh(t).call(this)),Fh&&Eh.call(yh(o)),o.backend=e,o.store=n,o.services=r,o.languageUtils=r.languageUtils,o.options=i,o.logger=kh.create("backendConnector"),o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(r,i.backend,i),o}return xh(t,Eh),vh(t,[{key:"queueLoad",value:function(e,t,n,r){var o=this,i=[],a=[],s=[],l=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?a.indexOf(s)<0&&a.push(s):(o.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),i.indexOf(s)<0&&i.push(s),l.indexOf(t)<0&&l.push(t)))})),r||s.push(e)})),(i.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:i,pending:a,toLoadLanguages:s,toLoadNamespaces:l}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),o=r[0],i=r[1];t&&this.emit("failedLoading",o,i,t),n&&this.store.addResourceBundle(o,i,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){!function(e,t,n,r){var o=Th(e,t,Object),i=o.obj,a=o.k;i[a]=i[a]||[],r&&(i[a]=i[a].concat(n)),r||i[a].push(n)}(n.loaded,[o],i),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,l){s&&l&&o<5?setTimeout((function(){r.read.call(r,e,t,n,o+1,2*i,a)}),i):a(s,l)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var i=this.queueLoad(e,t,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(i," for language ").concat(o," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(i," for language ").concat(o),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,hh({},i,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}();function Yh(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===fh(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===fh(e[2])||"object"===fh(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function Xh(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Qh(){}var Zh=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(ph(this,t),e=mh(this,bh(t).call(this)),Fh&&Eh.call(yh(e)),e.options=Xh(n),e.services={},e.logger=kh,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),mh(e,yh(e));setTimeout((function(){e.init(n,r)}),0)}return e}return xh(t,Eh),vh(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=hh({},Yh(),this.options,Xh(t)),this.format=this.options.interpolation.format,n||(n=Qh),!this.options.isClone){this.modules.logger?kh.init(r(this.modules.logger),this.options):kh.init(null,this.options);var o=new zh(this.options);this.store=new _h(this.options.resources,this.options);var i=this.services;i.logger=kh,i.resourceStore=this.store,i.languageUtils=o,i.pluralResolver=new qh(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),i.interpolator=new Gh(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Jh(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new Wh(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var a=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);a.length>0&&"dev"!==a[0]&&(this.options.lng=a[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");var s=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}}));var l=["addResource","addResources","addResourceBundle","removeResourceBundle"];l.forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var u=Oh(),c=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),u.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),u}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qh,r=n,o="string"==typeof e?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&"cimode"===o.toLowerCase())return r();var i=[],a=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};if(o)a(o);else{var s=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);s.forEach((function(e){return a(e)}))}this.options.preload&&this.options.preload.forEach((function(e){return a(e)})),this.services.backendConnector.load(i,this.options.ns,r)}else r(null)}},{key:"reloadResources",value:function(e,t,n){var r=Oh();return e||(e=this.languages),t||(t=this.options.ns),n||(n=Qh),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Bh.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=Oh();this.emit("languageChanging",e);var o=function(o){e||o||!n.services.languageDetector||(o=[]);var i="string"==typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);i&&(n.language||(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i)),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,(function(e){!function(e,o){o?(n.language=o,n.languages=n.services.languageUtils.toResolveHierarchy(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t,n){var r=this,o=function e(t,o){var i;if("object"!==fh(o)){for(var a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];i=r.options.overloadTranslationOptionHandler([t,o].concat(s))}else i=hh({},o);i.lng=i.lng||e.lng,i.lngs=i.lngs||e.lngs,i.ns=i.ns||e.ns;var u=r.options.keySeparator||".",c=n?"".concat(n).concat(u).concat(t):t;return r.t(c,i)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],o=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!this.services.backendConnector.backend||!(!a(r,e)||o&&!a(i,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=Oh();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=Oh();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],o=e.filter((function(e){return r.indexOf(e)<0}));return o.length?(this.options.preload=r.concat(o),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new t(e,n)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qh,o=hh({},this.options,n,{isClone:!0}),i=new t(o),a=["store","services","language"];return a.forEach((function(t){i[t]=e[t]})),i.services=hh({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i.translator=new Wh(i.services,i.options),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))})),i.init(o,r),i.translator.options=i.options,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages}}}]),t}(),ep=new Zh,tp="translation";function np(e,t){ep.addResourceBundle(e,tp,t,!0,!0)}function rp(e){ep.changeLanguage(e)}function op(e){return ep.getResourceBundle(e,tp)}ep.init({lng:"zh-CN",resources:{}});var ip=ep.t.bind(ep);export{rl as DomEditor,Il as ELEM_TO_HTML_CONF,wc as PARSE_ELEM_HTML_CONF,mc as PARSE_STYLE_HTML_FN_LIST,vc as PRE_PARSE_HTML_CONF_LIST,Xf as RENDER_ELEM_CONF,Jf as RENDER_STYLE_HANDLER_LIST,Al as STYLE_TO_HTML_FN_LIST,gc as TEXT_TAGS,nh as Toolbar,Xd as coreCreateEditor,rh as coreCreateToolbar,ch as createUploader,Bd as genModalButtonElems,Id as genModalInputElems,_d as genModalTextareaElems,np as i18nAddResources,rp as i18nChangeLanguage,op as i18nGetResources,_l as registerElemToHtmlConf,sl as registerMenu,xc as registerParseElemHtmlConf,bc as registerParseStyleHtmlHandler,yc as registerPreParseHtmlConf,Qf as registerRenderElemConf,Yf as registerStyleHandler,Fl as registerStyleToHtmlHandler,ip as t};
//# sourceMappingURL=index.esm.js.map
