import{i18nAddResources as t,DomEditor as e,t as n,genModalInputElems as r,genModalButtonElems as o,createUploader as i}from"@wangeditor/core";import{Transforms as u,Range as a}from"slate";import{jsx as c,h as f}from"snabbdom";import s,{append as l,on as d,focus as p,attr as v,val as h,html as y,parent as g,hasClass as m,empty as b}from"dom7";import{nanoid as w}from"nanoid";t("en",{videoModule:{delete:"Delete",uploadVideo:"Upload video",insertVideo:"Insert video",videoSrc:"video source",insertPlaceHolder:"video file url, or third-party <iframe>",ok:"Ok"}}),t("zh-CN",{videoModule:{delete:"删除视频",uploadVideo:"上传视频",insertVideo:"插入视频",videoSrc:"视频地址",insertPlaceHolder:"视频文件 url 或第三方 <iframe>",ok:"确定"}});var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function x(t){var e={exports:{}};return t(e,e.exports),e.exports}var O,j,E=function(t){return t&&t.Math==Math&&t},T=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof S&&S)||function(){return this}()||Function("return this")(),I=function(t){try{return!!t()}catch(t){return!0}},P=!I((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),A=Function.prototype.call,M=A.bind?A.bind(A):function(){return A.apply(A,arguments)},k={}.propertyIsEnumerable,R=Object.getOwnPropertyDescriptor,C=R&&!k.call({1:2},1)?function(t){var e=R(this,t);return!!e&&e.enumerable}:k,L={f:C},N=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},F=Function.prototype,_=F.bind,z=F.call,V=_&&_.bind(z),D=_?function(t){return t&&V(z,t)}:function(t){return t&&function(){return z.apply(t,arguments)}},$=D({}.toString),W=D("".slice),B=function(t){return W($(t),8,-1)},G=T.Object,H=D("".split),U=I((function(){return!G("z").propertyIsEnumerable(0)}))?function(t){return"String"==B(t)?H(t,""):G(t)}:G,K=T.TypeError,X=function(t){if(null==t)throw K("Can't call method on "+t);return t},Y=function(t){return U(X(t))},q=function(t){return"function"==typeof t},J=function(t){return"object"==typeof t?null!==t:q(t)},Q=function(t){return q(t)?t:void 0},Z=function(t,e){return arguments.length<2?Q(T[t]):T[t]&&T[t][e]},tt=D({}.isPrototypeOf),et=Z("navigator","userAgent")||"",nt=T.process,rt=T.Deno,ot=nt&&nt.versions||rt&&rt.version,it=ot&&ot.v8;it&&(j=(O=it.split("."))[0]>0&&O[0]<4?1:+(O[0]+O[1])),!j&&et&&(!(O=et.match(/Edge\/(\d+)/))||O[1]>=74)&&(O=et.match(/Chrome\/(\d+)/))&&(j=+O[1]);var ut=j,at=!!Object.getOwnPropertySymbols&&!I((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ut&&ut<41})),ct=at&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ft=T.Object,st=ct?function(t){return"symbol"==typeof t}:function(t){var e=Z("Symbol");return q(e)&&tt(e.prototype,ft(t))},lt=T.String,dt=function(t){try{return lt(t)}catch(t){return"Object"}},pt=T.TypeError,vt=function(t){if(q(t))return t;throw pt(dt(t)+" is not a function")},ht=function(t,e){var n=t[e];return null==n?void 0:vt(n)},yt=T.TypeError,gt=Object.defineProperty,mt=function(t,e){try{gt(T,t,{value:e,configurable:!0,writable:!0})}catch(n){T[t]=e}return e},bt=T["__core-js_shared__"]||mt("__core-js_shared__",{}),wt=x((function(t){(t.exports=function(t,e){return bt[t]||(bt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.19.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),St=T.Object,xt=function(t){return St(X(t))},Ot=D({}.hasOwnProperty),jt=Object.hasOwn||function(t,e){return Ot(xt(t),e)},Et=0,Tt=Math.random(),It=D(1..toString),Pt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+It(++Et+Tt,36)},At=wt("wks"),Mt=T.Symbol,kt=Mt&&Mt.for,Rt=ct?Mt:Mt&&Mt.withoutSetter||Pt,Ct=function(t){if(!jt(At,t)||!at&&"string"!=typeof At[t]){var e="Symbol."+t;at&&jt(Mt,t)?At[t]=Mt[t]:At[t]=ct&&kt?kt(e):Rt(e)}return At[t]},Lt=T.TypeError,Nt=Ct("toPrimitive"),Ft=function(t,e){if(!J(t)||st(t))return t;var n,r=ht(t,Nt);if(r){if(void 0===e&&(e="default"),n=M(r,t,e),!J(n)||st(n))return n;throw Lt("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,r;if("string"===e&&q(n=t.toString)&&!J(r=M(n,t)))return r;if(q(n=t.valueOf)&&!J(r=M(n,t)))return r;if("string"!==e&&q(n=t.toString)&&!J(r=M(n,t)))return r;throw yt("Can't convert object to primitive value")}(t,e)},_t=function(t){var e=Ft(t,"string");return st(e)?e:e+""},zt=T.document,Vt=J(zt)&&J(zt.createElement),Dt=function(t){return Vt?zt.createElement(t):{}},$t=!P&&!I((function(){return 7!=Object.defineProperty(Dt("div"),"a",{get:function(){return 7}}).a})),Wt=Object.getOwnPropertyDescriptor,Bt={f:P?Wt:function(t,e){if(t=Y(t),e=_t(e),$t)try{return Wt(t,e)}catch(t){}if(jt(t,e))return N(!M(L.f,t,e),t[e])}},Gt=T.String,Ht=T.TypeError,Ut=function(t){if(J(t))return t;throw Ht(Gt(t)+" is not an object")},Kt=T.TypeError,Xt=Object.defineProperty,Yt={f:P?Xt:function(t,e,n){if(Ut(t),e=_t(e),Ut(n),$t)try{return Xt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw Kt("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},qt=P?function(t,e,n){return Yt.f(t,e,N(1,n))}:function(t,e,n){return t[e]=n,t},Jt=D(Function.toString);q(bt.inspectSource)||(bt.inspectSource=function(t){return Jt(t)});var Qt,Zt,te,ee=bt.inspectSource,ne=T.WeakMap,re=q(ne)&&/native code/.test(ee(ne)),oe=wt("keys"),ie=function(t){return oe[t]||(oe[t]=Pt(t))},ue={},ae=T.TypeError,ce=T.WeakMap;if(re||bt.state){var fe=bt.state||(bt.state=new ce),se=D(fe.get),le=D(fe.has),de=D(fe.set);Qt=function(t,e){if(le(fe,t))throw new ae("Object already initialized");return e.facade=t,de(fe,t,e),e},Zt=function(t){return se(fe,t)||{}},te=function(t){return le(fe,t)}}else{var pe=ie("state");ue[pe]=!0,Qt=function(t,e){if(jt(t,pe))throw new ae("Object already initialized");return e.facade=t,qt(t,pe,e),e},Zt=function(t){return jt(t,pe)?t[pe]:{}},te=function(t){return jt(t,pe)}}var ve={set:Qt,get:Zt,has:te,enforce:function(t){return te(t)?Zt(t):Qt(t,{})},getterFor:function(t){return function(e){var n;if(!J(e)||(n=Zt(e)).type!==t)throw ae("Incompatible receiver, "+t+" required");return n}}},he=Function.prototype,ye=P&&Object.getOwnPropertyDescriptor,ge=jt(he,"name"),me={EXISTS:ge,PROPER:ge&&"something"===function(){}.name,CONFIGURABLE:ge&&(!P||P&&ye(he,"name").configurable)},be=x((function(t){var e=me.CONFIGURABLE,n=ve.get,r=ve.enforce,o=String(String).split("String");(t.exports=function(t,n,i,u){var a,c=!!u&&!!u.unsafe,f=!!u&&!!u.enumerable,s=!!u&&!!u.noTargetGet,l=u&&void 0!==u.name?u.name:n;q(i)&&("Symbol("===String(l).slice(0,7)&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!jt(i,"name")||e&&i.name!==l)&&qt(i,"name",l),(a=r(i)).source||(a.source=o.join("string"==typeof l?l:""))),t!==T?(c?!s&&t[n]&&(f=!0):delete t[n],f?t[n]=i:qt(t,n,i)):f?t[n]=i:mt(n,i)})(Function.prototype,"toString",(function(){return q(this)&&n(this).source||ee(this)}))})),we=Math.ceil,Se=Math.floor,xe=function(t){var e=+t;return e!=e||0===e?0:(e>0?Se:we)(e)},Oe=Math.max,je=Math.min,Ee=function(t,e){var n=xe(t);return n<0?Oe(n+e,0):je(n,e)},Te=Math.min,Ie=function(t){return t>0?Te(xe(t),9007199254740991):0},Pe=function(t){return Ie(t.length)},Ae=function(t){return function(e,n,r){var o,i=Y(e),u=Pe(i),a=Ee(r,u);if(t&&n!=n){for(;u>a;)if((o=i[a++])!=o)return!0}else for(;u>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Me={includes:Ae(!0),indexOf:Ae(!1)},ke=Me.indexOf,Re=D([].push),Ce=function(t,e){var n,r=Y(t),o=0,i=[];for(n in r)!jt(ue,n)&&jt(r,n)&&Re(i,n);for(;e.length>o;)jt(r,n=e[o++])&&(~ke(i,n)||Re(i,n));return i},Le=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ne=Le.concat("length","prototype"),Fe={f:Object.getOwnPropertyNames||function(t){return Ce(t,Ne)}},_e={f:Object.getOwnPropertySymbols},ze=D([].concat),Ve=Z("Reflect","ownKeys")||function(t){var e=Fe.f(Ut(t)),n=_e.f;return n?ze(e,n(t)):e},De=function(t,e){for(var n=Ve(e),r=Yt.f,o=Bt.f,i=0;i<n.length;i++){var u=n[i];jt(t,u)||r(t,u,o(e,u))}},$e=/#|\.prototype\./,We=function(t,e){var n=Ge[Be(t)];return n==Ue||n!=He&&(q(e)?I(e):!!e)},Be=We.normalize=function(t){return String(t).replace($e,".").toLowerCase()},Ge=We.data={},He=We.NATIVE="N",Ue=We.POLYFILL="P",Ke=We,Xe=Bt.f,Ye=function(t,e){var n,r,o,i,u,a=t.target,c=t.global,f=t.stat;if(n=c?T:f?T[a]||mt(a,{}):(T[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(u=Xe(n,r))&&u.value:n[r],!Ke(c?r:a+(f?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;De(i,o)}(t.sham||o&&o.sham)&&qt(i,"sham",!0),be(n,r,i,t)}},qe={};qe[Ct("toStringTag")]="z";var Je,Qe="[object z]"===String(qe),Ze=Ct("toStringTag"),tn=T.Object,en="Arguments"==B(function(){return arguments}()),nn=Qe?B:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=tn(t),Ze))?n:en?B(e):"Object"==(r=B(e))&&q(e.callee)?"Arguments":r},rn=T.String,on=function(t){if("Symbol"===nn(t))throw TypeError("Cannot convert a Symbol value to a string");return rn(t)},un=Ct("match"),an=T.TypeError,cn=function(t){if(function(t){var e;return J(t)&&(void 0!==(e=t[un])?!!e:"RegExp"==B(t))}(t))throw an("The method doesn't accept regular expressions");return t},fn=Ct("match"),sn=Bt.f,ln=D("".startsWith),dn=D("".slice),pn=Math.min,vn=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[fn]=!1,"/./"[t](e)}catch(t){}}return!1}("startsWith"),hn=!(vn||(Je=sn(String.prototype,"startsWith"),!Je||Je.writable));Ye({target:"String",proto:!0,forced:!hn&&!vn},{startsWith:function(t){var e=on(X(this));cn(t);var n=Ie(pn(arguments.length>1?arguments[1]:void 0,e.length)),r=on(t);return ln?ln(e,r,n):dn(e,n,n+r.length)===r}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var yn=function(){return yn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},yn.apply(this,arguments)};function gn(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))}function mn(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function bn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wn(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function Sn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=bn(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(e=t[n](e)).done,e.value)}))}}}var xn,On="\t\n\v\f\r                　\u2028\u2029\ufeff",jn=D("".replace),En="["+On+"]",Tn=RegExp("^"+En+En+"*"),In=RegExp(En+En+"*$"),Pn=function(t){return function(e){var n=on(X(e));return 1&t&&(n=jn(n,Tn,"")),2&t&&(n=jn(n,In,"")),n}},An={start:Pn(1),end:Pn(2),trim:Pn(3)},Mn=me.PROPER,kn=An.trim;Ye({target:"String",proto:!0,forced:(xn="trim",I((function(){return!!On[xn]()||"​᠎"!=="​᠎"[xn]()||Mn&&On[xn].name!==xn})))},{trim:function(){return kn(this)}});var Rn={type:"video",renderElem:function(t,n,r){var o,i=t.src,u=void 0===i?"":i,a=e.isNodeSelected(r,t);return o=0===u.trim().indexOf("<iframe")?c("div",{className:"w-e-textarea-video-container","data-selected":a?"true":"",innerHTML:u}):c("div",{className:"w-e-textarea-video-container","data-selected":a?"true":"","on-click":function(t){return console.log(123)}},c("video",{controls:!0},c("source",{src:u,type:"video/mp4"}),"Sorry, your browser doesn't support embedded videos.\n 抱歉，浏览器不支持 video 视频")),f("div",{props:{contentEditable:!1},on:{mousedown:function(t){return t.preventDefault()}}},o)}};var Cn,Ln={type:"video",elemToHtml:function(t,e){var n=t.src,r=void 0===n?"":n,o='<div data-w-e-type="video" data-w-e-is-void>\n';return 0===r.trim().indexOf("<iframe")?o+=r:o+='<video controls="true"><source src="'+r+'" type="video/mp4"/></video>',o+="\n</div>"}},Nn=Object.keys||function(t){return Ce(t,Le)},Fn=P?Object.defineProperties:function(t,e){Ut(t);for(var n,r=Y(e),o=Nn(e),i=o.length,u=0;i>u;)Yt.f(t,n=o[u++],r[n]);return t},_n=Z("document","documentElement"),zn=ie("IE_PROTO"),Vn=function(){},Dn=function(t){return"<script>"+t+"<\/script>"},$n=function(t){t.write(Dn("")),t.close();var e=t.parentWindow.Object;return t=null,e},Wn=function(){try{Cn=new ActiveXObject("htmlfile")}catch(t){}var t,e;Wn="undefined"!=typeof document?document.domain&&Cn?$n(Cn):((e=Dt("iframe")).style.display="none",_n.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Dn("document.F=Object")),t.close(),t.F):$n(Cn);for(var n=Le.length;n--;)delete Wn.prototype[Le[n]];return Wn()};ue[zn]=!0;var Bn=Object.create||function(t,e){var n;return null!==t?(Vn.prototype=Ut(t),n=new Vn,Vn.prototype=null,n[zn]=t):n=Wn(),void 0===e?n:Fn(n,e)},Gn=Ct("unscopables"),Hn=Array.prototype;null==Hn[Gn]&&Yt.f(Hn,Gn,{configurable:!0,value:Bn(null)});var Un=function(t){Hn[Gn][t]=!0},Kn=Me.includes;function Xn(t){return t.length?t[0].tagName.toLowerCase():""}Ye({target:"Array",proto:!0},{includes:function(t){return Kn(this,t,arguments.length>1?arguments[1]:void 0)}}),Un("includes"),Ye({global:!0},{globalThis:T}),l&&(s.fn.append=l),d&&(s.fn.on=d),p&&(s.fn.focus=p),v&&(s.fn.attr=v),h&&(s.fn.val=h),y&&(s.fn.html=y),g&&(s.fn.parent=g),m&&(s.fn.hasClass=m),b&&(s.fn.empty=b);var Yn={selector:"iframe,video,p",preParseHtml:function(t){var e=s(t),n=e;if("p"===Xn(e)){var r=e.children();if(1===r.length){var o=r[0],i=o.tagName.toLowerCase();["iframe","video"].includes(i)&&(n=s(o))}}var u=Xn(n);if("iframe"!==u&&"video"!==u)return n[0];if("video"===n.parent().attr("data-w-e-type"))return n[0];var a=s('<div data-w-e-type="video" data-w-e-is-void></div>');return a.append(n),a[0]}},qn=D(D.bind),Jn=function(t,e){return vt(t),void 0===e?t:qn?qn(t,e):function(){return t.apply(e,arguments)}},Qn=Array.isArray||function(t){return"Array"==B(t)},Zn=function(){},tr=[],er=Z("Reflect","construct"),nr=/^\s*(?:class|function)\b/,rr=D(nr.exec),or=!nr.exec(Zn),ir=function(t){if(!q(t))return!1;try{return er(Zn,tr,t),!0}catch(t){return!1}},ur=!er||I((function(){var t;return ir(ir.call)||!ir(Object)||!ir((function(){t=!0}))||t}))?function(t){if(!q(t))return!1;switch(nn(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return or||!!rr(nr,ee(t))}:ir,ar=Ct("species"),cr=T.Array,fr=function(t,e){return new(function(t){var e;return Qn(t)&&(e=t.constructor,(ur(e)&&(e===cr||Qn(e.prototype))||J(e)&&null===(e=e[ar]))&&(e=void 0)),void 0===e?cr:e}(t))(0===e?0:e)},sr=D([].push),lr=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,u=7==t,a=5==t||i;return function(c,f,s,l){for(var d,p,v=xt(c),h=U(v),y=Jn(f,s),g=Pe(h),m=0,b=l||fr,w=e?b(c,g):n||u?b(c,0):void 0;g>m;m++)if((a||m in h)&&(p=y(d=h[m],m,v),t))if(e)w[m]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return m;case 2:sr(w,d)}else switch(t){case 4:return!1;case 7:sr(w,d)}return i?-1:r||o?o:w}},dr={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6),filterReject:lr(7)},pr=dr.find,vr=!0;"find"in[]&&Array(1).find((function(){vr=!1})),Ye({target:"Array",proto:!0,forced:vr},{find:function(t){return pr(this,t,arguments.length>1?arguments[1]:void 0)}}),Un("find");var hr=Qe?{}.toString:function(){return"[object "+nn(this)+"]"};function yr(t){return{type:"video",src:t,children:[{text:""}]}}Qe||be(Object.prototype,"toString",hr,{unsafe:!0});var gr,mr,br={selector:'div[data-w-e-type="video"]',parseElemHtml:function(t,e,n){var r=s(t),o="",i=r.find("iframe");if(i.length>0)return yr(o=i[0].outerHTML);var u=r.find("video");return(o=u.attr("src")||"")||u.length>0&&(o=u.find("source").attr("src")||""),yr(o)}},wr=function(){var t=Ut(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Sr=T.RegExp,xr=I((function(){var t=Sr("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Or=xr||I((function(){return!Sr("a","y").sticky})),jr={BROKEN_CARET:xr||I((function(){var t=Sr("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:Or,UNSUPPORTED_Y:xr},Er=T.RegExp,Tr=I((function(){var t=Er(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Ir=T.RegExp,Pr=I((function(){var t=Ir("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Ar=ve.get,Mr=wt("native-string-replace",String.prototype.replace),kr=RegExp.prototype.exec,Rr=kr,Cr=D("".charAt),Lr=D("".indexOf),Nr=D("".replace),Fr=D("".slice),_r=(mr=/b*/g,M(kr,gr=/a/,"a"),M(kr,mr,"a"),0!==gr.lastIndex||0!==mr.lastIndex),zr=jr.BROKEN_CARET,Vr=void 0!==/()??/.exec("")[1];(_r||Vr||zr||Tr||Pr)&&(Rr=function(t){var e,n,r,o,i,u,a,c=this,f=Ar(c),s=on(t),l=f.raw;if(l)return l.lastIndex=c.lastIndex,e=M(Rr,l,s),c.lastIndex=l.lastIndex,e;var d=f.groups,p=zr&&c.sticky,v=M(wr,c),h=c.source,y=0,g=s;if(p&&(v=Nr(v,"y",""),-1===Lr(v,"g")&&(v+="g"),g=Fr(s,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Cr(s,c.lastIndex-1))&&(h="(?: "+h+")",g=" "+g,y++),n=new RegExp("^(?:"+h+")",v)),Vr&&(n=new RegExp("^"+h+"$(?!\\s)",v)),_r&&(r=c.lastIndex),o=M(kr,p?n:c,g),p?o?(o.input=Fr(o.input,y),o[0]=Fr(o[0],y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:_r&&o&&(c.lastIndex=c.global?o.index+o[0].length:r),Vr&&o&&o.length>1&&M(Mr,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=u=Bn(null),i=0;i<d.length;i++)u[(a=d[i])[0]]=o[a[1]];return o});var Dr=Rr;Ye({target:"RegExp",proto:!0,forced:/./.exec!==Dr},{exec:Dr});var $r=Function.prototype,Wr=$r.apply,Br=$r.bind,Gr=$r.call,Hr="object"==typeof Reflect&&Reflect.apply||(Br?Gr.bind(Wr):function(){return Gr.apply(Wr,arguments)}),Ur=Ct("species"),Kr=RegExp.prototype,Xr=D("".charAt),Yr=D("".charCodeAt),qr=D("".slice),Jr=function(t){return function(e,n){var r,o,i=on(X(e)),u=xe(n),a=i.length;return u<0||u>=a?t?"":void 0:(r=Yr(i,u))<55296||r>56319||u+1===a||(o=Yr(i,u+1))<56320||o>57343?t?Xr(i,u):r:t?qr(i,u,u+2):o-56320+(r-55296<<10)+65536}},Qr={codeAt:Jr(!1),charAt:Jr(!0)},Zr=Qr.charAt,to=function(t,e,n){return e+(n?Zr(t,e).length:1)},eo=Math.floor,no=D("".charAt),ro=D("".replace),oo=D("".slice),io=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,uo=/\$([$&'`]|\d{1,2})/g,ao=function(t,e,n,r,o,i){var u=n+t.length,a=r.length,c=uo;return void 0!==o&&(o=xt(o),c=io),ro(i,c,(function(i,c){var f;switch(no(c,0)){case"$":return"$";case"&":return t;case"`":return oo(e,0,n);case"'":return oo(e,u);case"<":f=o[oo(c,1,-1)];break;default:var s=+c;if(0===s)return i;if(s>a){var l=eo(s/10);return 0===l?i:l<=a?void 0===r[l-1]?no(c,1):r[l-1]+no(c,1):i}f=r[s-1]}return void 0===f?"":f}))},co=T.TypeError,fo=function(t,e){var n=t.exec;if(q(n)){var r=M(n,t,e);return null!==r&&Ut(r),r}if("RegExp"===B(t))return M(Dr,t,e);throw co("RegExp#exec called on incompatible receiver")},so=Ct("replace"),lo=Math.max,po=Math.min,vo=D([].concat),ho=D([].push),yo=D("".indexOf),go=D("".slice),mo="$0"==="a".replace(/./,"$0"),bo=!!/./[so]&&""===/./[so]("a","$0");!function(t,e,n,r){var o=Ct(t),i=!I((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),u=i&&!I((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ur]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!u||n){var a=D(/./[o]),c=e(o,""[t],(function(t,e,n,r,o){var u=D(t),c=e.exec;return c===Dr||c===Kr.exec?i&&!o?{done:!0,value:a(e,n,r)}:{done:!0,value:u(n,e,r)}:{done:!1}}));be(String.prototype,t,c[0]),be(Kr,o,c[1])}r&&qt(Kr[o],"sham",!0)}("replace",(function(t,e,n){var r=bo?"$":"$0";return[function(t,n){var r=X(this),o=null==t?void 0:ht(t,so);return o?M(o,t,r,n):M(e,on(r),t,n)},function(t,o){var i=Ut(this),u=on(t);if("string"==typeof o&&-1===yo(o,r)&&-1===yo(o,"$<")){var a=n(e,i,u,o);if(a.done)return a.value}var c=q(o);c||(o=on(o));var f=i.global;if(f){var s=i.unicode;i.lastIndex=0}for(var l=[];;){var d=fo(i,u);if(null===d)break;if(ho(l,d),!f)break;""===on(d[0])&&(i.lastIndex=to(u,Ie(i.lastIndex),s))}for(var p,v="",h=0,y=0;y<l.length;y++){for(var g=on((d=l[y])[0]),m=lo(po(xe(d.index),u.length),0),b=[],w=1;w<d.length;w++)ho(b,void 0===(p=d[w])?p:String(p));var S=d.groups;if(c){var x=vo([g],b,m,u);void 0!==S&&ho(x,S);var O=on(Hr(o,void 0,x))}else O=ao(g,u,m,b,S,o);m>=h&&(v+=go(u,h,m)+O,h=m+g.length)}return v+go(u,h)}]}),!!I((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!mo||bo);var wo=T.Promise,So=function(t,e,n){for(var r in e)be(t,r,e[r],n);return t},xo=T.String,Oo=T.TypeError,jo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=D(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Ut(n),function(t){if("object"==typeof t||q(t))return t;throw Oo("Can't set "+xo(t)+" as a prototype")}(r),e?t(n,r):n.__proto__=r,n}}():void 0),Eo=Yt.f,To=Ct("toStringTag"),Io=function(t,e,n){t&&!jt(t=n?t:t.prototype,To)&&Eo(t,To,{configurable:!0,value:e})},Po=Ct("species"),Ao=T.TypeError,Mo=function(t,e){if(tt(e,t))return t;throw Ao("Incorrect invocation")},ko={},Ro=Ct("iterator"),Co=Array.prototype,Lo=Ct("iterator"),No=function(t){if(null!=t)return ht(t,Lo)||ht(t,"@@iterator")||ko[nn(t)]},Fo=T.TypeError,_o=function(t,e,n){var r,o;Ut(t);try{if(!(r=ht(t,"return"))){if("throw"===e)throw n;return n}r=M(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Ut(r),n},zo=T.TypeError,Vo=function(t,e){this.stopped=t,this.result=e},Do=Vo.prototype,$o=function(t,e,n){var r,o,i,u,a,c,f,s,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),h=Jn(e,l),y=function(t){return r&&_o(r,"normal",t),new Vo(!0,t)},g=function(t){return d?(Ut(t),v?h(t[0],t[1],y):h(t[0],t[1])):v?h(t,y):h(t)};if(p)r=t;else{if(!(o=No(t)))throw zo(dt(t)+" is not iterable");if(void 0!==(s=o)&&(ko.Array===s||Co[Ro]===s)){for(i=0,u=Pe(t);u>i;i++)if((a=g(t[i]))&&tt(Do,a))return a;return new Vo(!1)}r=function(t,e){var n=arguments.length<2?No(t):e;if(vt(n))return Ut(M(n,t));throw Fo(dt(t)+" is not iterable")}(t,o)}for(c=r.next;!(f=M(c,r)).done;){try{a=g(f.value)}catch(t){_o(r,"throw",t)}if("object"==typeof a&&a&&tt(Do,a))return a}return new Vo(!1)},Wo=Ct("iterator"),Bo=!1;try{var Go=0,Ho={next:function(){return{done:!!Go++}},return:function(){Bo=!0}};Ho[Wo]=function(){return this},Array.from(Ho,(function(){throw 2}))}catch(t){}var Uo,Ko,Xo,Yo,qo=function(t,e){if(!e&&!Bo)return!1;var n=!1;try{var r={};r[Wo]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Jo=T.TypeError,Qo=Ct("species"),Zo=function(t,e){var n,r=Ut(t).constructor;return void 0===r||null==(n=Ut(r)[Qo])?e:function(t){if(ur(t))return t;throw Jo(dt(t)+" is not a constructor")}(n)},ti=D([].slice),ei=/(?:ipad|iphone|ipod).*applewebkit/i.test(et),ni="process"==B(T.process),ri=T.setImmediate,oi=T.clearImmediate,ii=T.process,ui=T.Dispatch,ai=T.Function,ci=T.MessageChannel,fi=T.String,si=0,li={};try{Uo=T.location}catch(t){}var di=function(t){if(jt(li,t)){var e=li[t];delete li[t],e()}},pi=function(t){return function(){di(t)}},vi=function(t){di(t.data)},hi=function(t){T.postMessage(fi(t),Uo.protocol+"//"+Uo.host)};ri&&oi||(ri=function(t){var e=ti(arguments,1);return li[++si]=function(){Hr(q(t)?t:ai(t),void 0,e)},Ko(si),si},oi=function(t){delete li[t]},ni?Ko=function(t){ii.nextTick(pi(t))}:ui&&ui.now?Ko=function(t){ui.now(pi(t))}:ci&&!ei?(Yo=(Xo=new ci).port2,Xo.port1.onmessage=vi,Ko=Jn(Yo.postMessage,Yo)):T.addEventListener&&q(T.postMessage)&&!T.importScripts&&Uo&&"file:"!==Uo.protocol&&!I(hi)?(Ko=hi,T.addEventListener("message",vi,!1)):Ko="onreadystatechange"in Dt("script")?function(t){_n.appendChild(Dt("script")).onreadystatechange=function(){_n.removeChild(this),di(t)}}:function(t){setTimeout(pi(t),0)});var yi,gi,mi,bi,wi,Si,xi,Oi,ji={set:ri,clear:oi},Ei=/ipad|iphone|ipod/i.test(et)&&void 0!==T.Pebble,Ti=/web0s(?!.*chrome)/i.test(et),Ii=Bt.f,Pi=ji.set,Ai=T.MutationObserver||T.WebKitMutationObserver,Mi=T.document,ki=T.process,Ri=T.Promise,Ci=Ii(T,"queueMicrotask"),Li=Ci&&Ci.value;Li||(yi=function(){var t,e;for(ni&&(t=ki.domain)&&t.exit();gi;){e=gi.fn,gi=gi.next;try{e()}catch(t){throw gi?bi():mi=void 0,t}}mi=void 0,t&&t.enter()},ei||ni||Ti||!Ai||!Mi?!Ei&&Ri&&Ri.resolve?((xi=Ri.resolve(void 0)).constructor=Ri,Oi=Jn(xi.then,xi),bi=function(){Oi(yi)}):ni?bi=function(){ki.nextTick(yi)}:(Pi=Jn(Pi,T),bi=function(){Pi(yi)}):(wi=!0,Si=Mi.createTextNode(""),new Ai(yi).observe(Si,{characterData:!0}),bi=function(){Si.data=wi=!wi}));var Ni,Fi,_i,zi,Vi=Li||function(t){var e={fn:t,next:void 0};mi&&(mi.next=e),gi||(gi=e,bi()),mi=e},Di=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=vt(e),this.reject=vt(n)},$i={f:function(t){return new Di(t)}},Wi=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Bi="object"==typeof window,Gi=ji.set,Hi=Ct("species"),Ui="Promise",Ki=ve.getterFor(Ui),Xi=ve.set,Yi=ve.getterFor(Ui),qi=wo&&wo.prototype,Ji=wo,Qi=qi,Zi=T.TypeError,tu=T.document,eu=T.process,nu=$i.f,ru=nu,ou=!!(tu&&tu.createEvent&&T.dispatchEvent),iu=q(T.PromiseRejectionEvent),uu=!1,au=Ke(Ui,(function(){var t=ee(Ji),e=t!==String(Ji);if(!e&&66===ut)return!0;if(ut>=51&&/native code/.test(t))return!1;var n=new Ji((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Hi]=r,!(uu=n.then((function(){}))instanceof r)||!e&&Bi&&!iu})),cu=au||!qo((function(t){Ji.all(t).catch((function(){}))})),fu=function(t){var e;return!(!J(t)||!q(e=t.then))&&e},su=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Vi((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var u,a,c,f=n[i++],s=o?f.ok:f.fail,l=f.resolve,d=f.reject,p=f.domain;try{s?(o||(2===t.rejection&&vu(t),t.rejection=1),!0===s?u=r:(p&&p.enter(),u=s(r),p&&(p.exit(),c=!0)),u===f.promise?d(Zi("Promise-chain cycle")):(a=fu(u))?M(a,u,l,d):l(u)):d(r)}catch(t){p&&!c&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&du(t)}))}},lu=function(t,e,n){var r,o;ou?((r=tu.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),T.dispatchEvent(r)):r={promise:e,reason:n},!iu&&(o=T["on"+t])?o(r):"unhandledrejection"===t&&function(t,e){var n=T.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},du=function(t){M(Gi,T,(function(){var e,n=t.facade,r=t.value;if(pu(t)&&(e=Wi((function(){ni?eu.emit("unhandledRejection",r,n):lu("unhandledrejection",n,r)})),t.rejection=ni||pu(t)?2:1,e.error))throw e.value}))},pu=function(t){return 1!==t.rejection&&!t.parent},vu=function(t){M(Gi,T,(function(){var e=t.facade;ni?eu.emit("rejectionHandled",e):lu("rejectionhandled",e,t.value)}))},hu=function(t,e,n){return function(r){t(e,r,n)}},yu=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,su(t,!0))},gu=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Zi("Promise can't be resolved itself");var r=fu(e);r?Vi((function(){var n={done:!1};try{M(r,e,hu(gu,n,t),hu(yu,n,t))}catch(e){yu(n,e,t)}})):(t.value=e,t.state=1,su(t,!1))}catch(e){yu({done:!1},e,t)}}};if(au&&(Qi=(Ji=function(t){Mo(this,Qi),vt(t),M(Ni,this);var e=Ki(this);try{t(hu(gu,e),hu(yu,e))}catch(t){yu(e,t)}}).prototype,(Ni=function(t){Xi(this,{type:Ui,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=So(Qi,{then:function(t,e){var n=Yi(this),r=n.reactions,o=nu(Zo(this,Ji));return o.ok=!q(t)||t,o.fail=q(e)&&e,o.domain=ni?eu.domain:void 0,n.parent=!0,r[r.length]=o,0!=n.state&&su(n,!1),o.promise},catch:function(t){return this.then(void 0,t)}}),Fi=function(){var t=new Ni,e=Ki(t);this.promise=t,this.resolve=hu(gu,e),this.reject=hu(yu,e)},$i.f=nu=function(t){return t===Ji||t===_i?new Fi(t):ru(t)},q(wo)&&qi!==Object.prototype)){zi=qi.then,uu||(be(qi,"then",(function(t,e){var n=this;return new Ji((function(t,e){M(zi,n,t,e)})).then(t,e)}),{unsafe:!0}),be(qi,"catch",Qi.catch,{unsafe:!0}));try{delete qi.constructor}catch(t){}jo&&jo(qi,Qi)}function mu(t,e){return gn(this,void 0,void 0,(function(){var n,r,o,i,a,c,f;return mn(this,(function(s){switch(s.label){case 0:return e?(t.restoreSelection(),n=t.getMenuConfig("insertVideo"),r=n.onInsertedVideo,o=n.checkVideo,i=n.parseVideoSrc,[4,o(e)]):[2];case 1:return"string"==typeof(a=s.sent())?(t.alert(a,"error"),[2]):null==a?[2]:[4,i(e)];case 2:return 0!==(c=s.sent()).trim().indexOf("<iframe")&&(c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;")),f={type:"video",src:c,children:[{text:""}]},Promise.resolve().then((function(){u.insertNodes(t,f)})),r(f),[2]}}))}))}function bu(){return void 0===(t="w-e-insert-video")&&(t="r"),t+"-"+w();var t}Ye({global:!0,wrap:!0,forced:au},{Promise:Ji}),Io(Ji,Ui,!1),function(t){var e=Z(t),n=Yt.f;P&&e&&!e[Po]&&n(e,Po,{configurable:!0,get:function(){return this}})}(Ui),_i=Z(Ui),Ye({target:Ui,stat:!0,forced:au},{reject:function(t){var e=nu(this);return M(e.reject,void 0,t),e.promise}}),Ye({target:Ui,stat:!0,forced:au},{resolve:function(t){return function(t,e){if(Ut(t),J(e)&&e.constructor===t)return e;var n=$i.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),Ye({target:Ui,stat:!0,forced:cu},{all:function(t){var e=this,n=nu(e),r=n.resolve,o=n.reject,i=Wi((function(){var n=vt(e.resolve),i=[],u=0,a=1;$o(t,(function(t){var c=u++,f=!1;a++,M(n,e,t).then((function(t){f||(f=!0,i[c]=t,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=nu(e),r=n.reject,o=Wi((function(){var o=vt(e.resolve);$o(t,(function(t){M(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var wu=function(){function t(){this.title=n("videoModule.insertVideo"),this.iconSvg='<svg viewBox="0 0 1024 1024"><path d="M981.184 160.096C837.568 139.456 678.848 128 512 128S186.432 139.456 42.816 160.096C15.296 267.808 0 386.848 0 512s15.264 244.16 42.816 351.904C186.464 884.544 345.152 896 512 896s325.568-11.456 469.184-32.096C1008.704 756.192 1024 637.152 1024 512s-15.264-244.16-42.816-351.904zM384 704V320l320 192-320 192z"></path></svg>',this.tag="button",this.showModal=!0,this.modalWidth=320,this.$content=null,this.srcInputId=bu(),this.buttonId=bu()}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!a.isCollapsed(n)||!!e.getSelectedElems(t).some((function(n){return"pre"===e.getNodeType(n)||!!t.isVoid(n)})))},t.prototype.getModalPositionNode=function(t){return null},t.prototype.getModalContentElem=function(t){var e=this,i=this.srcInputId,u=this.buttonId,a=wn(r(n("videoModule.videoSrc"),i,n("videoModule.insertPlaceHolder")),2),c=a[0],f=a[1],l=s(f),d=wn(o(u,n("videoModule.ok")),1)[0];if(null==this.$content){var p=s("<div></div>");p.on("click","#"+u,(function(n){return gn(e,void 0,void 0,(function(){var e;return mn(this,(function(r){switch(r.label){case 0:return n.preventDefault(),e=p.find("#"+i).val().trim(),[4,mu(t,e)];case 1:return r.sent(),t.hidePanelOrModal(),[2]}}))}))})),this.$content=p}var v=this.$content;return v.empty(),v.append(c),v.append(d),l.val(""),setTimeout((function(){l.focus()})),v[0]},t}(),Su=D([].join),xu=U!=Object,Ou=function(t,e){var n=[][t];return!!n&&I((function(){n.call(null,e||function(){throw 1},1)}))}("join",",");Ye({target:"Array",proto:!0,forced:xu||!Ou},{join:function(t){return Su(Y(this),void 0===t?",":t)}});var ju,Eu,Tu,Iu=!I((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Pu=ie("IE_PROTO"),Au=T.Object,Mu=Au.prototype,ku=Iu?Au.getPrototypeOf:function(t){var e=xt(t);if(jt(e,Pu))return e[Pu];var n=e.constructor;return q(n)&&e instanceof n?n.prototype:e instanceof Au?Mu:null},Ru=Ct("iterator"),Cu=!1;[].keys&&("next"in(Tu=[].keys())?(Eu=ku(ku(Tu)))!==Object.prototype&&(ju=Eu):Cu=!0);var Lu=null==ju||I((function(){var t={};return ju[Ru].call(t)!==t}));Lu&&(ju={}),q(ju[Ru])||be(ju,Ru,(function(){return this}));var Nu={IteratorPrototype:ju,BUGGY_SAFARI_ITERATORS:Cu},Fu=Nu.IteratorPrototype,_u=function(){return this},zu=me.PROPER,Vu=me.CONFIGURABLE,Du=Nu.IteratorPrototype,$u=Nu.BUGGY_SAFARI_ITERATORS,Wu=Ct("iterator"),Bu=function(){return this},Gu=function(t,e,n,r,o,i,u){!function(t,e,n,r){var o=e+" Iterator";t.prototype=Bn(Fu,{next:N(+!r,n)}),Io(t,o,!1),ko[o]=_u}(n,e,r);var a,c,f,s=function(t){if(t===o&&h)return h;if(!$u&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",d=!1,p=t.prototype,v=p[Wu]||p["@@iterator"]||o&&p[o],h=!$u&&v||s(o),y="Array"==e&&p.entries||v;if(y&&(a=ku(y.call(new t)))!==Object.prototype&&a.next&&(ku(a)!==Du&&(jo?jo(a,Du):q(a[Wu])||be(a,Wu,Bu)),Io(a,l,!0)),zu&&"values"==o&&v&&"values"!==v.name&&(Vu?qt(p,"name","values"):(d=!0,h=function(){return M(v,this)})),o)if(c={values:s("values"),keys:i?h:s("keys"),entries:s("entries")},u)for(f in c)($u||d||!(f in p))&&be(p,f,c[f]);else Ye({target:e,proto:!0,forced:$u||d},c);return p[Wu]!==h&&be(p,Wu,h,{name:o}),ko[e]=h,c},Hu=ve.set,Uu=ve.getterFor("Array Iterator"),Ku=Gu(Array,"Array",(function(t,e){Hu(this,{type:"Array Iterator",target:Y(t),index:0,kind:e})}),(function(){var t=Uu(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ko.Arguments=ko.Array,Un("keys"),Un("values"),Un("entries");var Xu=Qr.charAt,Yu=ve.set,qu=ve.getterFor("String Iterator");Gu(String,"String",(function(t){Yu(this,{type:"String Iterator",string:on(t),index:0})}),(function(){var t,e=qu(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Xu(n,r),e.index+=t.length,{value:t,done:!1})}));var Ju=function(t,e,n){var r=_t(e);r in t?Yt.f(t,r,N(0,n)):t[r]=n},Qu=T.Array,Zu=Math.max,ta=Fe.f,ea="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],na=function(t){try{return ta(t)}catch(t){return function(t,e,n){for(var r=Pe(t),o=Ee(e,r),i=Ee(void 0===n?r:n,r),u=Qu(Zu(i-o,0)),a=0;o<i;o++,a++)Ju(u,a,t[o]);return u.length=a,u}(ea)}},ra={f:function(t){return ea&&"Window"==B(t)?na(t):ta(Y(t))}},oa=I((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),ia=Object.isExtensible,ua=I((function(){ia(1)}))||oa?function(t){return!!J(t)&&((!oa||"ArrayBuffer"!=B(t))&&(!ia||ia(t)))}:ia,aa=!I((function(){return Object.isExtensible(Object.preventExtensions({}))})),ca=x((function(t){var e=Yt.f,n=!1,r=Pt("meta"),o=0,i=function(t){e(t,r,{value:{objectID:"O"+o++,weakData:{}}})},u=t.exports={enable:function(){u.enable=function(){},n=!0;var t=Fe.f,e=D([].splice),o={};o[r]=1,t(o).length&&(Fe.f=function(n){for(var o=t(n),i=0,u=o.length;i<u;i++)if(o[i]===r){e(o,i,1);break}return o},Ye({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ra.f}))},fastKey:function(t,e){if(!J(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!jt(t,r)){if(!ua(t))return"F";if(!e)return"E";i(t)}return t[r].objectID},getWeakData:function(t,e){if(!jt(t,r)){if(!ua(t))return!0;if(!e)return!1;i(t)}return t[r].weakData},onFreeze:function(t){return aa&&n&&ua(t)&&!jt(t,r)&&i(t),t}};ue[r]=!0})),fa=ca.getWeakData,sa=ve.set,la=ve.getterFor,da=dr.find,pa=dr.findIndex,va=D([].splice),ha=0,ya=function(t){return t.frozen||(t.frozen=new ga)},ga=function(){this.entries=[]},ma=function(t,e){return da(t.entries,(function(t){return t[0]===e}))};ga.prototype={get:function(t){var e=ma(this,t);if(e)return e[1]},has:function(t){return!!ma(this,t)},set:function(t,e){var n=ma(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=pa(this.entries,(function(e){return e[0]===t}));return~e&&va(this.entries,e,1),!!~e}};var ba,wa={getConstructor:function(t,e,n,r){var o=t((function(t,o){Mo(t,i),sa(t,{type:e,id:ha++,frozen:void 0}),null!=o&&$o(o,t[r],{that:t,AS_ENTRIES:n})})),i=o.prototype,u=la(e),a=function(t,e,n){var r=u(t),o=fa(Ut(e),!0);return!0===o?ya(r).set(e,n):o[r.id]=n,t};return So(i,{delete:function(t){var e=u(this);if(!J(t))return!1;var n=fa(t);return!0===n?ya(e).delete(t):n&&jt(n,e.id)&&delete n[e.id]},has:function(t){var e=u(this);if(!J(t))return!1;var n=fa(t);return!0===n?ya(e).has(t):n&&jt(n,e.id)}}),So(i,n?{get:function(t){var e=u(this);if(J(t)){var n=fa(t);return!0===n?ya(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return a(this,t,e)}}:{add:function(t){return a(this,t,!0)}}),o}},Sa=ve.enforce,xa=!T.ActiveXObject&&"ActiveXObject"in T,Oa=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},ja=function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=r?"set":"add",u=T[t],a=u&&u.prototype,c=u,f={},s=function(t){var e=D(a[t]);be(a,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!J(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!J(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!J(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(Ke(t,!q(u)||!(o||a.forEach&&!I((function(){(new u).entries().next()})))))c=n.getConstructor(e,t,r,i),ca.enable();else if(Ke(t,!0)){var l=new c,d=l[i](o?{}:-0,1)!=l,p=I((function(){l.has(1)})),v=qo((function(t){new u(t)})),h=!o&&I((function(){for(var t=new u,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((c=e((function(t,e){Mo(t,a);var n=function(t,e,n){var r,o;return jo&&q(r=e.constructor)&&r!==n&&J(o=r.prototype)&&o!==n.prototype&&jo(t,o),t}(new u,t,c);return null!=e&&$o(e,n[i],{that:n,AS_ENTRIES:r}),n}))).prototype=a,a.constructor=c),(p||h)&&(s("delete"),s("has"),r&&s("get")),(h||d)&&s(i),o&&a.clear&&delete a.clear}return f[t]=c,Ye({global:!0,forced:c!=u},f),Io(c,t),o||n.setStrong(c,t,r),c}("WeakMap",Oa,wa);if(re&&xa){ba=wa.getConstructor(Oa,"WeakMap",!0),ca.enable();var Ea=ja.prototype,Ta=D(Ea.delete),Ia=D(Ea.has),Pa=D(Ea.get),Aa=D(Ea.set);So(Ea,{delete:function(t){if(J(t)&&!ua(t)){var e=Sa(this);return e.frozen||(e.frozen=new ba),Ta(this,t)||e.frozen.delete(t)}return Ta(this,t)},has:function(t){if(J(t)&&!ua(t)){var e=Sa(this);return e.frozen||(e.frozen=new ba),Ia(this,t)||e.frozen.has(t)}return Ia(this,t)},get:function(t){if(J(t)&&!ua(t)){var e=Sa(this);return e.frozen||(e.frozen=new ba),Ia(this,t)?Pa(this,t):e.frozen.get(t)}return Pa(this,t)},set:function(t,e){if(J(t)&&!ua(t)){var n=Sa(this);n.frozen||(n.frozen=new ba),Ia(this,t)?Aa(this,t,e):n.frozen.set(t,e)}else Aa(this,t,e);return this}})}var Ma={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ka=Dt("span").classList,Ra=ka&&ka.constructor&&ka.constructor.prototype,Ca=Ra===Object.prototype?void 0:Ra,La=Ct("iterator"),Na=Ct("toStringTag"),Fa=Ku.values,_a=function(t,e){if(t){if(t[La]!==Fa)try{qt(t,La,Fa)}catch(e){t[La]=Fa}if(t[Na]||qt(t,Na,e),Ma[e])for(var n in Ku)if(t[n]!==Ku[n])try{qt(t,n,Ku[n])}catch(e){t[n]=Ku[n]}}};for(var za in Ma)_a(T[za]&&T[za].prototype,za);_a(Ca,"DOMTokenList");var Va=me.EXISTS,Da=Yt.f,$a=Function.prototype,Wa=D($a.toString),Ba=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Ga=D(Ba.exec);P&&!Va&&Da($a,"name",{configurable:!0,get:function(){try{return Ga(Ba,Wa(this))[1]}catch(t){return""}}});var Ha=Ct("species"),Ua=function(t){return ut>=51||!I((function(){var e=[];return(e.constructor={})[Ha]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}("slice"),Ka=Ct("species"),Xa=T.Array,Ya=Math.max;function qa(t){return t.getMenuConfig("uploadVideo")}Ye({target:"Array",proto:!0,forced:!Ua},{slice:function(t,e){var n,r,o,i=Y(this),u=Pe(i),a=Ee(t,u),c=Ee(void 0===e?u:e,u);if(Qn(i)&&(n=i.constructor,(ur(n)&&(n===Xa||Qn(n.prototype))||J(n)&&null===(n=n[Ka]))&&(n=void 0),n===Xa||void 0===n))return ti(i,a,c);for(r=new(void 0===n?Xa:n)(Ya(c-a,0)),o=0;a<c;a++,o++)a in i&&Ju(r,o,i[a]);return r.length=o,r}});var Ja=new WeakMap;function Qa(t,e){return gn(this,void 0,void 0,(function(){var n,r,o,u;return mn(this,(function(a){switch(a.label){case 0:return n=function(t){var e=Ja.get(t);if(null!=e)return e;var n=qa(t),r=n.onSuccess,o=n.onProgress,u=n.onFailed,a=n.customInsert,c=n.onError;return e=i(yn(yn({},n),{onProgress:function(e){t.showProgressBar(e),o&&o(e)},onSuccess:function(e,n){if(a)a(n,(function(e){return mu(t,e)}));else{var o=n.errno,i=void 0===o?1:o,c=n.data,f=void 0===c?{}:c;if(0!==i)return console.error("'"+e.name+"' upload failed",n),void u(e,n);var s=f.url;mu(t,void 0===s?"":s),r(e,n)}},onError:function(t,e,n){var r=t.name;console.error("'"+r+" upload error",e,n),c&&c(t,e,n)}})),Ja.set(t,e),e}(t),r=e.name,o=e.type,u=e.size,n.addFile({name:r,type:o,size:u,data:e}),[4,n.upload()];case 1:return a.sent(),[2]}}))}))}var Za=function(){function t(){this.title=n("videoModule.uploadVideo"),this.iconSvg='<svg viewBox="0 0 1056 1024"><path d="M805.902261 521.819882a251.441452 251.441452 0 0 0-251.011972 246.600033 251.051015 251.051015 0 1 0 502.023944 8.823877 253.237463 253.237463 0 0 0-251.011972-255.42391z m59.463561 240.001647v129.898403h-116.701631v-129.898403h-44.041298l101.279368-103.504859 101.279368 103.504859z" p-id="6802"></path><path d="M788.254507 0.000781H99.094092A98.663439 98.663439 0 0 0 0.001171 99.093701v590.067495a98.663439 98.663439 0 0 0 99.092921 99.092921h411.7549a266.434235 266.434235 0 0 1-2.186448-41.815807 275.843767 275.843767 0 0 1 275.180024-270.729042 270.650955 270.650955 0 0 1 103.504859 19.834201V99.093701A101.51363 101.51363 0 0 0 788.254507 0.000781zM295.054441 640.747004V147.507894l394.146189 246.600033z"></path></svg>',this.tag="button"}return t.prototype.getValue=function(t){return""},t.prototype.isActive=function(t){return!1},t.prototype.exec=function(t,e){var n=this.getMenuConfig(t),r=n.allowedFileTypes,o=void 0===r?[]:r,i=n.customBrowseAndUpload;if(i)i((function(e){return mu(t,e)}));else{var u="";o.length>0&&(u='accept="'+o.join(", ")+'"');var a=s("body"),c=s('<input type="file" '+u+" multiple/>");c.hide(),a.append(c),c.click(),c.on("change",(function(){var e=c[0].files;!function(t,e){var n,r;gn(this,void 0,void 0,(function(){var o,i,u,a,c,f;return mn(this,(function(s){switch(s.label){case 0:if(null==e)return[2];o=Array.prototype.slice.call(e),i=qa(t).customUpload,s.label=1;case 1:s.trys.push([1,9,10,15]),u=Sn(o),s.label=2;case 2:return[4,u.next()];case 3:return(a=s.sent()).done?[3,8]:(c=a.value,i?[4,i(c,(function(e){return mu(t,e)}))]:[3,5]);case 4:return s.sent(),[3,7];case 5:return[4,Qa(t,c)];case 6:s.sent(),s.label=7;case 7:return[3,2];case 8:return[3,15];case 9:return f=s.sent(),n={error:f},[3,15];case 10:return s.trys.push([10,,13,14]),a&&!a.done&&(r=u.return)?[4,r.call(u)]:[3,12];case 11:s.sent(),s.label=12;case 12:return[3,14];case 13:if(n)throw n.error;return[7];case 14:return[7];case 15:return[2]}}))}))}(t,e)}))}},t.prototype.isDisabled=function(t){var n=t.selection;return null==n||(!a.isCollapsed(n)||!!e.getSelectedElems(t).some((function(n){return"pre"===e.getNodeType(n)||!!t.isVoid(n)})))},t.prototype.getMenuConfig=function(t){return t.getMenuConfig("uploadVideo")},t}();var tc={renderElems:[Rn],elemsToHtml:[Ln],preParseHtml:[Yn],parseElemsHtml:[br],menus:[{key:"insertVideo",factory:function(){return new wu},config:{onInsertedVideo:function(t){},checkVideo:function(t){return!0},parseVideoSrc:function(t){return t}}},{key:"uploadVideo",factory:function(){return new Za},config:{server:"",fieldName:"wangeditor-uploaded-video",maxFileSize:10485760,maxNumberOfFiles:5,allowedFileTypes:["video/*"],meta:{},metaWithUrl:!1,withCredentials:!1,timeout:3e4,onBeforeUpload:function(t){return t},onProgress:function(t){},onSuccess:function(t,e){},onFailed:function(t,e){},onError:function(t,e,n){}}}],editorPlugin:function(t){var n=t.isVoid,r=t.normalizeNode,o=t;return o.isVoid=function(t){return"video"===t.type||n(t)},o.normalizeNode=function(t){var n=wn(t,2),i=n[0],a=n[1];if("video"===e.getNodeType(i)){var c=(o.children||[])[a[0]+1]||{},f=e.getNodeType(c);if("paragraph"!==f&&"blockquote"!==f&&!f.startsWith("header")){var s=[a[0]+1];u.insertNodes(o,{type:"paragraph",children:[{text:""}]},{at:s})}}return r([i,a])},o}};export{tc as default};
//# sourceMappingURL=index.esm.js.map
