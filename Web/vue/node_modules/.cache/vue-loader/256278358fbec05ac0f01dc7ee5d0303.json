{"remainingRequest":"D:\\2023\\BearPi\\paper\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\2023\\BearPi\\paper\\vue\\src\\views\\Detail.vue?vue&type=template&id=40f4caea","dependencies":[{"path":"D:\\2023\\BearPi\\paper\\vue\\src\\views\\Detail.vue","mtime":1710050714634},{"path":"D:\\2023\\BearPi\\paper\\vue\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023\\BearPi\\paper\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\2023\\BearPi\\paper\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":499162500000},{"path":"D:\\2023\\BearPi\\paper\\vue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023\\BearPi\\paper\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdj4KICAgIDxlbC1jb250YWluZXI+CiAgICAgIDxlbC1oZWFkZXI+CiAgICAgICAgPGgxIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPnt7Zm9ybS50aXRsZX19PC9oMT4KICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXIiPnt7Zm9ybS5hdXRob3JzfX08L2Rpdj4KICAgICAgPC9lbC1oZWFkZXI+CiAgICAgIDxlbC1tYWluIHN0eWxlPSJtYXJnaW4tdG9wOiAxMHB4Ij4KCgogICAgICAgIAogICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMTVweDsiPuaXpeacn++8mnt7Zm9ybS5kYXRlfX08L2Rpdj4KICAgICAgICA8ZWwtZGl2aWRlcj48L2VsLWRpdmlkZXI+CiAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOiAxNXB4OyI+6LSn5p6277yae3tmb3JtLmZpZWxkfX08L2Rpdj4KCiAgICAgICAgPGVsLWRpdmlkZXI+PC9lbC1kaXZpZGVyPgogICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMTVweDsiPuWGheWuue+8mgogICAgICAgIDxkaXYgdi1odG1sPSJ0aGlzLmZvcm0uY29udGVudCI+PC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxlbC1kaXZpZGVyIHYtaWY9InRoaXMuZm9ybS5yZWZlcmVuY2VzLmxlbmd0aCE9PTAiPjwvZWwtZGl2aWRlcj4KICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6IDEwcHg7IiB2LWlmPSJ0aGlzLmZvcm0ucmVmZXJlbmNlcy5sZW5ndGghPT0wIj7lvJXnlKjmlofnjK7vvJoKICAgICAgICAgIDxlbC1idXR0b24gdi1mb3I9ImEgaW4gZm9ybS5yZWZlcmVuY2VzIiB0eXBlPSJ0ZXh0IiBAY2xpY2s9Imp1bXBSZWYoYS5wYXBlcl9pZCkiPgoKICAgICAgICAgICAgICB7e2EudGl0bGV9fTwvZWwtYnV0dG9uPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZWwtZGl2aWRlciBjb250ZW50LXBvc2l0aW9uPSJjZW50ZXIiPgogICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luOjBweCBhdXRvIj4KICAgICAgICAgICAgPGVsLWJ1dHRvbiB2LWlmPSJyb2xlID09PSAxIHx8IHVzZXJfaWQgPT09dGhpcy5mb3JtLnVzZXJfaWQiIEBjbGljaz0ianVtcFBhcGVyQ2hhbmdlKGZvcm0pIj7kv67mlLnkv6Hmga88L2VsLWJ1dHRvbj4KICAgICAgICAgICAgPGVsLWJ1dHRvbiB2LWlmPSJ0aGlzLmZvcm0uZmlsZXMubGVuZ3RoIT09MCIgQGNsaWNrPSJkb3duRmlsZXMoZm9ybS5maWxlcykiPuS4i+i9vemZhOS7tjwvZWwtYnV0dG9uPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9lbC1kaXZpZGVyPgoKICAgICAgICA8Y29tbWVudCBzdHlsZT0id2lkdGg6IDEwMCUiIDpwYXBlcmlkID10aGlzLnBhcGVyX2lkPgogICAgICAgIDwvY29tbWVudD4KCiAgICAgIDwvZWwtbWFpbj4KICAgIDwvZWwtY29udGFpbmVyPgoKICA8L2Rpdj4KCg=="},{"version":3,"sources":["D:\\2023\\BearPi\\paper\\vue\\src\\views\\Detail.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,CAAC;IACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACR,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;;;QAI/B,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEpD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACvE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;cAE5E,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5B,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UACnC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3G,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;UAC7F,CAAC,CAAC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;QAEZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;MAEX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEhB,CAAC,CAAC,CAAC,CAAC,CAAC","file":"D:/2023/BearPi/paper/vue/src/views/Detail.vue","sourceRoot":"","sourcesContent":["<template>\n  <div>\n    <el-container>\n      <el-header>\n        <h1 style=\"text-align: center\">{{form.title}}</h1>\n        <div style=\"text-align: center\">{{form.authors}}</div>\n      </el-header>\n      <el-main style=\"margin-top: 10px\">\n\n\n        \n        <div style=\"font-size: 15px;\">日期：{{form.date}}</div>\n        <el-divider></el-divider>\n        <div style=\"font-size: 15px;\">货架：{{form.field}}</div>\n\n        <el-divider></el-divider>\n        <div style=\"font-size: 15px;\">内容：\n        <div v-html=\"this.form.content\"></div>\n        </div>\n\n        <el-divider v-if=\"this.form.references.length!==0\"></el-divider>\n        <div style=\"font-size: 10px;\" v-if=\"this.form.references.length!==0\">引用文献：\n          <el-button v-for=\"a in form.references\" type=\"text\" @click=\"jumpRef(a.paper_id)\">\n\n              {{a.title}}</el-button>\n        </div>\n\n        <el-divider content-position=\"center\">\n          <div style=\"margin:0px auto\">\n            <el-button v-if=\"role === 1 || user_id ===this.form.user_id\" @click=\"jumpPaperChange(form)\">修改信息</el-button>\n            <el-button v-if=\"this.form.files.length!==0\" @click=\"downFiles(form.files)\">下载附件</el-button>\n          </div>\n        </el-divider>\n\n        <comment style=\"width: 100%\" :paperid =this.paper_id>\n        </comment>\n\n      </el-main>\n    </el-container>\n\n  </div>\n\n</template>\n\n<script>\nimport comment from \"@/components/Comment\";\nimport request from \"@/utils/request\";\nimport axios from \"axios\";\nexport default {\n  name: \"Detail\",\n  inject:['reload'],\n  components:{\n    comment\n  },\n  data(){\n    return{\n      field_name:'',\n      paper_id:'',\n      user_id:'',\n      role:'',\n      lastPath:'',\n      form:{\n        field:String,\n        files:[],\n        references:[]\n      },\n      Req:{\n        serverfile:'',\n        savefile:''\n      }\n    }\n  },\n\n  methods:{\n    jumpRef(paperid){\n      window.location.href='detail?paper_id='+paperid\n      //this.$router.push({path: '/detail',query:{paper_id: paperid }})\n    },\n    routeClick(e){\n      window.location.href = e;\n    },\n    jumpPaperChange(row){\n      this.$router.push({path:'/changePaper', query:{origin_paper_id: row.paper_id,upload_id : row.upload_id}})\n    },\n    downFiles(files){\n      for (let i = 0;i<files.length;i++){\n        this.Req.serverfile = files[i]\n        this.Req.savefile = '/Users/liujiaming/Downloads//'+files[i]\n        //console.log(this.Req)\n\n        axios({\n          url:\"/api/file/download\",\n          method: 'post',\n          responseType:'blob',\n          data: this.Req\n        }).then((res) => {\n          console.log(res.config.responseType)\n            console.log(res)\n            let url = window.URL.createObjectURL(new Blob([res.data])) // 将获取的文件转化为blob格式\n            let a = document.createElement('a'); // 此处向下是打开一个储存位置\n            a.style.display = 'none';\n            a.href = url;\n            // 下面两行是自己项目需要的处理，总之就是得到下载的文件名（加后缀）即可\n            //var fileNameArray = path.split('#')[1].split('/')\n            //var fileName = fileNameArray[fileNameArray.length-1]\n\n            a.setAttribute('download',files[i]);\n            document.body.appendChild(a);\n            a.click();//点击下载\n            document.body.removeChild(a);// 下载完成移除元素\n            window.URL.revokeObjectURL(url);// 释放掉blob对象\n            this.$message.success(\"下载成功\")\n            //console.log(res.msg)\n            }\n        )\n        // request.post(\"/api/file/download\",this.Req).then(res => {\n        //   if (res.code === 0){\n        //     console.log(res)\n        //     let url = window.URL.createObjectURL(new Blob([res.data])) // 将获取的文件转化为blob格式\n        //     let a = document.createElement('a'); // 此处向下是打开一个储存位置\n        //     a.style.display = 'none';\n        //     a.href = url;\n        //     // 下面两行是自己项目需要的处理，总之就是得到下载的文件名（加后缀）即可\n        //     //var fileNameArray = path.split('#')[1].split('/')\n        //     //var fileName = fileNameArray[fileNameArray.length-1]\n        //\n        //     a.setAttribute('download',files[i]);\n        //     document.body.appendChild(a);\n        //     a.click();//点击下载\n        //     document.body.removeChild(a);// 下载完成移除元素\n        //     window.URL.revokeObjectURL(url);// 释放掉blob对象\n        //     this.$message.success(\"下载成功\")\n        //     //console.log(res.msg)\n        //   }else{\n        //     this.$message.error(\"下载失败\")\n        //     //console.log(res.msg)\n        //   }\n        // })\n      }\n\n    }\n  },\n  created() {\n    let userStrr = sessionStorage.getItem(\"user\")\n    this.role = JSON.parse(userStrr).role\n    this.user_id = JSON.parse(userStrr).user_id\n    this.paper_id = this.$route.query.paper_id\n    console.log(\"jiazai详情\")\n    request.post(\"/api/paper?paper_id=\"+this.paper_id).then(res => {\n      if (res.code === 0){\n        this.form = res.data\n        console.log(this.form)\n        var temp\n        for (var i = 0;i<res.data.fields.length;i++){\n          //console.log(res.data.fields[i].field_name)\n          if (i===0){\n            temp = res.data.fields[i].field_name\n          }else{\n            temp= temp + ','+ res.data.fields[i].field_name\n          }\n        }\n        this.form.field=temp\n        for (var i = 0;i<res.data.authors.length;i++){\n          //console.log(res.data.fields[i].field_name)\n          if (i===0){\n            temp = res.data.authors[i]\n          }else{\n            temp= temp + ','+ res.data.authors[i]\n          }\n        }\n        this.form.authors=temp\n      }else{\n        this.$message.error(\"加载失败\")\n        //console.log(res.msg)\n      }\n    })\n  },\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}