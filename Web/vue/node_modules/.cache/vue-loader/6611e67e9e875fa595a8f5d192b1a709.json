{"remainingRequest":"/Users/linto/Documents/EasyReach/Web/vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/linto/Documents/EasyReach/Web/vue/src/views/ChangeProfile.vue?vue&type=style&index=0&id=61bd88e2&scoped=true&lang=css","dependencies":[{"path":"/Users/linto/Documents/EasyReach/Web/vue/src/views/ChangeProfile.vue","mtime":1720424447118},{"path":"/Users/linto/Documents/EasyReach/Web/vue/node_modules/css-loader/dist/cjs.js","mtime":1720424445004},{"path":"/Users/linto/Documents/EasyReach/Web/vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1720424444365},{"path":"/Users/linto/Documents/EasyReach/Web/vue/node_modules/postcss-loader/src/index.js","mtime":1720424446218},{"path":"/Users/linto/Documents/EasyReach/Web/vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1720424444334},{"path":"/Users/linto/Documents/EasyReach/Web/vue/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1720424444364}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5hdmF0YXItdXBsb2FkZXIgLmVsLXVwbG9hZCB7CiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7CiAgYm9yZGVyLXJhZGl1czogNnB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQouYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQ6aG92ZXIgewogIGJvcmRlci1jb2xvcjogIzQwOUVGRjsKfQouYXZhdGFyLXVwbG9hZGVyLWljb24gewogIGZvbnQtc2l6ZTogMjhweDsKICBjb2xvcjogIzhjOTM5ZDsKICB3aWR0aDogMTIwcHg7CiAgaGVpZ2h0OiAxMjBweDsKICBsaW5lLWhlaWdodDogMTIwcHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5hdmF0YXIgewogIHdpZHRoOiAxNzhweDsKICBoZWlnaHQ6IDE3OHB4OwogIGRpc3BsYXk6IGJsb2NrOwp9Cg=="},{"version":3,"sources":["/Users/linto/Documents/EasyReach/Web/vue/src/views/ChangeProfile.vue"],"names":[],"mappings":";AAyJA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAClB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACN,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAChB","file":"/Users/linto/Documents/EasyReach/Web/vue/src/views/ChangeProfile.vue","sourceRoot":"","sourcesContent":["<template>\n\n  <div>\n    <el-card style=\"width: 45%; margin: 10px\">\n        <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n          <el-form-item style=\"text-align: center\" label-width=\"0\">\n            <el-upload\n                class=\"avatar-uploader\"\n                action=\"http://localhost:9090/files/upload\"\n                :show-file-list=\"false\"\n                :on-success=\"handleAvatarSuccess\"\n            >\n              <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avatar\">\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n            </el-upload>\n          </el-form-item>\n          <el-form-item label=\"用户ID\">\n            <el-input v-model=\"form.user_id\" disabled></el-input>\n          </el-form-item>\n          <el-form-item label=\"用户名\">\n            <el-input v-model=\"form.userName\"></el-input>\n          </el-form-item>\n\n\n          <!--        <el-form-item label=\"密码\">-->\n          <!--          <el-input v-model=\"form.password\" show-password></el-input>-->\n          <!--        </el-form-item>-->\n          <div style=\"display: flex\">\n            <el-form-item label=\"邮箱验证\" style=\"width: 50%\">\n              <el-input prefix-icon=\"el-icon-caret-right\" v-model=\"form.identify\" placeholder=\"请输入验证码\" ></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button v-if=\"disabled\" type=\"primary\" size=\"mini\" style=\"width: 200px; height: 40px;margin-left: 12px\" @click=\"verification\" plain>\n                发送邮箱验证码\n              </el-button>\n              <el-button v-if=\"!disabled\" type=\"info\" disabled size=\"mini\" style=\"width: 200px;height: 40px;margin-left: 12px\">\n                <div>\n                  {{ timer }}秒后重试\n                </div>\n              </el-button>\n            </el-form-item>\n          </div>\n        <el-form-item label=\"新密码\" prop=\"newPass\">\n          <el-input v-model=\"form.newPass\" show-password></el-input>\n        </el-form-item>\n        <el-form-item label=\"再次确认\" prop=\"confirmPass\">\n          <el-input v-model=\"form.confirmPass\" show-password></el-input>\n        </el-form-item>\n      </el-form>\n\n      <div style=\"text-align: center\">\n        <el-button type=\"primary\" @click=\"update\">保存</el-button>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"ChangeProfile\",\n  created() {\n    let userStr = sessionStorage.getItem(\"user\") || \"{}\"\n    this.form = JSON.parse(userStr)\n  },\n  data() {\n    return {\n      disabled: true,\n      timer: 60,\n     form: {\n\n       userName: \"\",\n       user_id: \"\",\n       identify: '',\n       password: '',\n       confirmPass: ''\n     },\n      userInfo:{\n\n      },\n      rules: {\n        userName: [\n          {required: true, message: '请输入用户名', trigger: 'blur'}\n          ,{\n            min: 3,\n            max: 20,\n            message: '长度在 3 到 20 个字符',\n            trigger: 'blur'\n          }\n        ],\n        newPass: [\n          {required: true, message: '请输入新密码', trigger: 'blur'},\n        ],\n        confirmPass: [\n          {required: true, message: '请输入确认新密码', trigger: 'blur'},\n        ],\n      },\n    }\n  },\n  methods: {\n    handleAvatarSuccess(res) {\n      this.form.avatar = res.data\n      this.$message.success(\"上传成功\")\n      // this.update()\n    },\n    verification() {\n\n      this.disabled = false\n      this.send()// 调获取验证码接口\n      const authTimer = setInterval(() => {\n        this.timer--\n        if (this.timer <= 0) {\n          this.disabled = true\n          this.timer = 11\n          clearInterval(authTimer)\n        }\n      }, 1000)\n    },\n    send() {\n      request.post(\"/api/register/sendemail\", this.form).then(res => {\n        //console.log(\"发送验证码\")\n      })\n\n    },\n    update() {\n            //console.log(this.form)\n            request.post(\"api/modifypwd\", this.form).then(res => {\n              //console.log(res)\n              if (res.code === 0) {\n                this.$message({\n                  type: \"success\",\n                  message: \"更新成功\",\n                })\n                sessionStorage.removeItem(\"user\")\n                sessionStorage.removeItem(\"userPermission\")\n                request.post(\"/api/logout\",this.form).then(res=>{\n                  //console.log(res)\n                })\n                this.$router.push('/login')\n              } else {\n                this.$message({\n                  type: \"error\",\n                  message: res.msg\n                })\n              }\n            })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 120px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n</style>\n"]}]}